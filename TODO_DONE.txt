TODO_DONE list  ------- NEW ENTRIES GO AT THE TOP, WITH YOUR NAME & DATE

- (Jun, 7/12/06) (Requested by Anne 7-11-06) - The Crop module, in mouse/ellipse mode, does not visibly mark the points that you have clicked. It's kind of strange because I think at one point it did this successfully, and the mouse/rectangle mode works just fine, creating little star marks wherever you have clicked.
=>Jun: Changes made to Crop.m. Also added check for correct number of mouse clicks, allowing user to try again.

- (Jun, 7/12/06) (Requested by Anne 7-11-06) - In the Rotate module, at this line:
        if length(x) < 2
            error(['Image processing was canceled in the ', ModuleName, ' module because you must click on at least two points then press enter.'])
        end
Instead of producing an error and canceling out, the module should ask the user to start over again - that is, getpts should be repeated from scratch. I imagine this would use the "while" function.
=>Jun: Changes made to Rotate.m.

- (Rodrigo, 7/11/06) - (Requested by Anne 2-24-06) - In LoadImages, provide more instruction in the help on how to use regular expressions. For example, if you had files named like xxx01xxx, except 01 is anywhere from 01 to 99, how would you choose just files 01-12? Also, I guess .* is a wild card of any length. Maybe we can find nice instructions online somewhere.

- (Jun, 7/11/06) (Requested by Anne 7-7-06) - the histogram flipping looks great and hopefully will make the reviewers of our paper happy! I only noticed one small problem, when you plot something with the axes flipped and then add a control histogram, the control histogram is not flipped but is in the normal orientation instead. It would be a reasonable solution to just disable/remove the button when in flipped mode, because I don't think people will use that combination very often. But if it's easy to fix, go ahead. Also, the button Export Data To MATLAB should be non visible when running the compiled version. I don't know how we normally disable functions in the compiled version, but Mike can tell you.
=>Jun: Changes made to Histogram.m and CPcontrolhistogram.m. "Add a Control Histogram" button was fixed.

- (Jun, 7/11/06) (Requested by Anne 7-11-06) - The Crop module, when in rectangle mode, gives an error if you click outside the image (in mouse mode) or enter a pixel value outside the range of the image (in coordinates mode). Instead, as we have already adjusted in the ellipse option, it should do something like this (and inform the user that this is what has been done): CPmsgbox('You have chosen points outside of the range of the image. These points have been rounded to the closest compatible number.');
=>Jun: It seems like this modification has already been made.

--------------
(Mike) J Biology paper:

- Find new shape weirdo from NIRHT using CellVisualizer, preferably a Zernike one (medium order might work best) if you can find one. Take care to find an example where it's not the area that is the real difference, because a lot of shape measures correlate to area. Add to figure 3.

- Compile and release fresh version of CellProfiler. (Wait till updates)

- Make x axis marks more visible for figure 2A/B. Figure out if it's log base 2 or 10 and label appropriately?

- Move Fig 3A and C to a supplemental figure, and label the x axes with numbers.

- In Jason's 06_14 NIRHT re-analysis, it appears that the Neighbors module is putting a bunch of underscores in the feature names. There should only be underscores when separating things that should be in pulldown menus, so surrounding "and" with underscores gives you a silly pulldown menu where you have to choose "and". Fixing the correlation module to remove "and" would be good too, as long as you are preparing a new release.
--------------

- (Rodrigo 7/10/06) - (Requested by Anne 2-23-06) - In Load Single Image, when you browse to choose the image file, it does not seem to go to the default image folder, though i think when it's running it assumes that this is the folder where the image is located.

- (Rodrigo, 7/10/06) - (Requested by Rodrigo 7/6/06) - The window that asks to change the output name when the user specified name is already taken asummed 'Yes' was selected when the window was closed. I changed it so that when you close it, it assumes 'Cancel' was selected.

- (Rodrigo, 7/10/06) - (Requested by Anne 7-5-06) - When you start up CellProfiler, then doubleclick "No Modules Loaded" in the pipeline window, it produces a dialog that says "No modules are loaded". Instead, it should open the Add module window (the same window you would get if clicking the + button.)
Note: I added a question dialog first, so that the Add Module window doesn't pop up due to random careless clicks.

- (Rodrigo, 7/10/06) (Requested by Anne 7-5-06) - In the IdentifyPrimAutomatic window, the bottom left window says "Outlined Objects" rather than "Outlined Nuclei" or whatever the ObjectName is. I think I put this on the TODO a while ago, so maybe it's on someone's personal TODO list. Check to see if it's fixed before working on it.

- (Rodrigo, 7/10/06) (Requested by Rodrigo 07/05/06) - After using the InteractiveZoom, clicking on any image that wasn't the last one to use the interactivezoom doesn't pop up the Image Tools window as it should, but creates an error instead. The same happens for any axis clicked.
Note: I couldnt fix another error that occurs when you double-click, but move the pointer fast enough such that one click lands on one image and the other lands in another. This will almost never happen when used though.

- (Rodrigo, 7/10/06) (Requested by Anne 12-15-05) - When you click Open Figure (during processing), the figure pops up with a really high figure number. Seems a little strange.
Also fixed other bugs: The window that would pop up would display all Module Displays instead of only its own; the figure number sometimes didn't agree with the one saved in the handles structure.

- (Rodrigo, 7/10/06) (Requested by Colin 1-13-06) - The InteractiveZoom creates an error when the mouse is going over the image, but a different figure it on top.

- (Rodrigo, 7/10/06) (Requested by Anne 11-30-05) - Measure Ratios currently does not display anything in the figure window. It might be nice to display the average ratios, as is done for many of the MeasureObject modules.

- (Jun, 7/10/06) (Requested by Anne 6-21-06) - We would like to run some tests to try to improve CellProfiler's speed: 
* Change CPimread to put the images in single format rather than double. We hypothesize that subsequent processing in single format will be faster. We are pretty certain that we won't lose any precision, because we are using 12-bit and occasionally 16-bit images, whereas single precision already has more than 20-bit data storage capability; therefore we think double precision is overkill. However, we don't know whether all of the matlab functions will work on single format numbers, so we should run a long test pipeline to see if any errors result. It's also possible that many MATLAB functions may process single precision numbers by converting to double and back again, which would make single precision numbers be slower! Run comparisons of how long processing takes in double and in single format to help us decide whether it's worth it to switch to single.
* What are the most time-consuming steps of IdentifyPrimAutomatic? Use the "Profiler" tool within MATLAB to determine this.
=>Jun: Testing done 7/3/06-7/10/06, documented in word file. It seems that it's not worth it to switch to single format. In some cases, double is faster and in other cases single is faster, but the difference is usually only 10% or less. There are also a few errors associated with switching to single.

- (Jun, 6/30/06) (Requested by Anne 6/12/06) - After you save preferences, it tells you that they are saved in the matlab root directory, which is not true for the non-developer's version of CellProfiler (see the Set Preferences window for a description of what really happens; i think it is up to date).
=>Jun: Changes made to CellProfiler.m.

- (Jun, 6/30/06) (Requested by Anne 6/27/06): Need to add option to Histogram menu to flip x and y axes when plotting histogram.
=>Jun: Changes made to Histogram.m.

- (Jun, 6/30/06) (Requested by Anne 6-20-06) - Let's make a more informative error window that tells the user possible reasons why the image might not be found:
Question:"I have been trying to persuade CellProfiler to save images generated by tiled, but every time SaveImages complains about not being able to find the input image. I set this to be the output image of Tiled. I am running cellprofiler on MacOS 10.4.6. Am I missing something or is this a known bug ... "
Answer: "The full tiled image is only made on the final cycle, so you must set the SaveImages module to save on "Last Cycle" instead of All. That should take care of your problem!"
=>Jun: Changes made to SaveImages.m and Tile.m. Processing will continue when user saves tiled image(s) on cycles other than the last. Instead of an error, user gets warning. Error still occurs for images not existent in pipeline.

- (Jun, 6/30/06) (Requested by Anne 6/12/06) - LoadSingleImage seems to spit its text display into other windows, depending on what you have open and are looking at. Maybe this a fluke, transient thing but perhaps we can make it put its text in the proper window more consistently? If we fix it for this module, make sure LoadImages is also working similarly.
=>Jun: Works for both LoadImages.m and LoadSingleImage.m.

- (Rodrigo, 6/29) (Requested by Anne 6/12/06) - It would be so great, when you have tons of windows open, to have under "Windows" on the main menu bar a listing of all open windows in CellProfiler so that you can make any open window you want come to the front. It should list the same info that is in the title bar of the window, including Figure XX: IdentifyPrimAutomatic, for example.
Note: I made it such that it only shows the module display windows and not others.

- (Rodrigo, 6/29) (Requested by Anne 6/12/06) - The window that opens when you click Details in the Timer window needs a title in its title bar (I guess "Timer Details" or "Status Details"), and it needs to look decent! Right now none of the columns line up.
Note: Most bugs were fixed, along with format, but these still remain: 1. If the window is left open and another run is made, the old info doesn't clear before showing the new one; 2. The window size might not be big enough if ran in linux due to font size; 3. Figure # X gets taken by this window when opened while processing.

- (Rodrigo, 6/29) (Requested by Anne 6/22/06) - There is some strangeness relating to the image tool help. In any of the figures produced during processing, there is "CellProfiler Image Tools" in the menu bar and there is an option "Show Toolbox help". What it really should be called is "ShowHelpForThisMenu". Also, if you choose that option then choose "Show Toolbox help", a bunch of stuff is displayed - make this help file display like the other menu items.

- (Rodrigo, 6/29) (Requested by Anne 6-22-06) - In any of the figures produced during processing, there is a problem with "OpenNewImageFile" under the "CellProfiler Image Tools" in the menu bar. If you choose an image, an error results and the image is not displayed. If you make changes to the underlying subfunction, be sure that other features using that subfunction still work.

- (Rodrigo, 6/29) (Requested by Anne 6/12/06) - Should the Timer be renamed "Status"? Yes

- (Rodrigo, Jun, 6/28) (Requested by Mike 5/7/06) - Make IdentifyTertiary and IdentifySecondary use CPrelateobjects and make sure CPrelateobjects can handle if the first image set does not have objects. So where we have if handles.current.setbeinganalyzed == 1 there should be a check also if it is not image set 1 to be able to add the new set of data

- (Rodrigo, Jun, 6/20) (Requested by Anne 6/2/06) - When you change the size of smooth filter in IdPrimAuto so that it's not automatic, the number it displays in the window is not the number you entered. Check also the Max Suppression Size.

- (Rodrigo, Jun, 6/19) (Requested by Anne 4/25/06) - See the "important" note in the help for ConvertBatchFiles data tool - we should make the appropriate change so that the first image cycle is removed (but be sure that whatever change you make does not disturb the first and second batch output files in a set (Batch_data.mat and Batch_2_to_XX.mat))

- (Rodrigo, Jun, 6/19) (Requested by Anne 6/19/06) - Bug in MeasureCorrelation module when measuring correlation in Nuclei before Image

- (UROPs, 6/16) (Requested by Anne 3/15/06) - Some of our modules are putting out data in an inconsistent format. I think the per-cell measures are usually pretty good, but per-image measures are sometimes a little strange when I access them from the database. For example, the identifyPrim module puts something in Image Nuclei NumberOfMergedObjects Nuclei NumberOfMergedObjects (yes, it seems duplicated) relating to how many small objects were merged and that field has strange naming. Also, the measure total intensity of the whole image seemed strange. The critical thing is how subfields are made: whenever we use an underscore, CellVisualizer interprets it as a new subcategory, so we want to avoid underscores in our fieldnames. ObjectCount.ObjectCount_Cells should have the underscore removed: ObjectCountCells, and Form_Factor, too.

- (UROPs, 6/14) (Requested by Anne 5/31/06) - When you analyze images and the output filename you entered already exists, it automatically changes the name and asks if it's ok. The code isn't too smart right now, though, because a dialog box flashes momentarily and then is replaced by the window asking 'is it ok to change the filename?' We should prevent the initial window from coming up if possible.

- (UROPs, 6/14) (Requested by Anne 6/12/06) - IdentifyPrimAutomatic: the lower left image inthe display window has a title that does not match the upper right - it should say Outlined XXX, where XXX is the same name as is in the upper right title (Identified XXX). Also the ConvertToImage window should call the objects by their name rather than saying "Objects"

- (UROPs, 6/14) (Requested by Anne 6/12/06) - I think 'New Pipeline' should actually be called 'Clear Pipeline'

- (UROPs, 6/14) (Requested by Mike) - Use polyfit in correlation module to get the slope of Image vs. Image per pixel

-(Mike 6/23) - Add code to CPwritemeasurements so that ExportData can export text measurements (such as when classifyobjects adds text labels)

-(Mike 6/20) New, 6-15-06. - add the pipeline to the figure for each application (like we did for Figure 1a).

-(Mike 6/20) Combine Five Biotechniques figures into three by combining Figures 3-5 all together - maybe rotate the lungs in figure 3 90 degrees to give you enough room to put the pipeline at the left. Here is the legend for the new mega-figure:
Figure 3: Identification and measurement of GFP-labeled tumors in mouse lungs, the wound healing assay, and Drosophila tissue topology.  (A) The pipeline of modules used for the analysis shown in B-D. (B) Original image. (C) Image with tumors outlined by CellProfiler. (D) Tumors in a set of 20 images were counted by CellProfiler and by two researchers. The manual tumor count for each image (vertical axis) is plotted versus the CellProfiler count (horizontal axis), revealing strong concordance (R2 value is shown). (E) The pipeline of modules used for the analysis shown in F-G. (F) At timepoint zero, the wound visible in the original image (top) is large and the cells present at the edges of the image cover a small percentage of the area of the image, as quantified by CellProfiler (bottom). (G) After 24 hours, the wound has recovered due to cells migrating from the edges (top) and now is much smaller in measured size (bottom). (H) The pipeline of modules used for the analysis shown in I-J. (I) Original image of Drosophila epithelial cells growing in a sheet. Box indicates the region shown enlarged below. (J) Image showing cells identified and color-coded by CellProfiler based on how many neighbors they have.

-*Really, Really, Ridiculously, Important* (Anne 5/10/06) - Is it possible to add the following measurement to the MeasureObjectNeighbors module:
What is the distance to the nearest two neighboring objects? DECIDED NOT TO DO
what are the vectors to the nearest two neighbors? DONE COVERS "DISTANCE"
What are the indices (ObjectNumbers) of the two nearest neighbors? DONE
How many of its border pixels are bordering other objects? DONE

- (Peter Swire, 5/18) (Requested by Anne 2-24-06) - In Calculate Statistics, if the number of image sets does not equal the number of imported text data (dose data), I think it generates an error at the subfunction (which is called VZfactors or something like that). Because this processing only occurs at the end of  the set (and it's really annoying to have the run not be complete just because of an error in this module), this error should be caught, a warning box produced, and processing should continue. 

- (Peter Swire, 5/17) (Requested by Anne 2-12-06) - Images with the ending 'tiff' do not show up in the main GUI window when they are in the default image directory, although 'tif' shows up fine.

- (Peter Swire) (Requested By Colin 1-13-06) - In the ShowDataOnImage data tool, there is an error when you close out of the window that pops up after clicking on the NumberOfDecimals button.

- (Peter Swire) (Anne 4/25/06) - ViewData fails on batch-created output files (this error is expected), but the error occurs at the command line (see below) - we should catch the error and tell the user to use the data tool MergeOutputFiles or ConvertBatchFiles to put the batch output files in a format which can be analyzed properly with the data tools. In fact, once we fix this for ViewData, we should do the same for all data tools.
??? Cell contents reference from a non-cell array object.
Error in ==> ViewData at 97
        TextToDisplay{ImageSet} = sprintf('Cycle #%d, %s:     %s',...
??? Error while evaluating uimenu Callback.

- (Peter Swire) (Requested by Anne 2-23-06) - Make Calculate Ratios Data Tool (in the Developer's drop box) into a real data tool (right now, you run it from the command line with all the variables hardcoded). Share code with the Calc Ratios module as much as possible.

-(Mike 5/9) (Anne 5-2-06) For the website, add this link to "Press > CellProfiler in the news":
http://www.nature.com/nmeth/journal/v2/n7/full/nmeth0705-547.html

-(Mike 5/9) (Anne 5-2-06) Add this article to Papers > Review articles mentioning CellProfiler (need to write out the full citation, but instead of linking to a PDF we should just link to pubmed: 
http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?cmd=Retrieve&db=pubmed&dopt=Abstract&list_uids=16607398&query_hl=8&itool=pubmed_docsum

-(Mike 5/8) (Anne 5-5-06) I will need to analyze Fly200 data soon, which means consolidating the tables somehow in the database. Can you make this happen? I'm not sure the details of what needs to happen to let me look at individual slides grouped together, but In Han knows.

-(Mike 4/25)
************************************************************
Changes for CP
-Install guide (windows) change font size
-Change name of programming notes
-Check on old PC if can open huge directory
-Create new help category for Batch processing
-(installation guide, programming notes, getting started, batch processing) into new category Geting Started
-Combine createclusterfiles and createbatchscripts
-Separate help for createbatchfiles module and how to run batch files
-Make WriteSQL use both Oracle and MySQL, add help rename to ExportToDatabase, also add ability to keep in one database or use existing with changing the table names from Per_Image to Experiment_Per_Image
-Add help for importing data into database
-On website have source for Batch processing w/out matlab plus instructions
-Add reference to Watershed
************************************************************

-(Colin 4/20) (Anne 2-14-06)
Can you fix this bug in histogram tool: I am trying to use the thresholding value. I am using the Jason MitHits file: \\gobo\sabatini3_ata\FIGURES\Figure2-validationPhenotypes\2006_02_13_MitosisHits\2006_2_14_1100MitHitsOUT.mat
I am trying to do a histogram of Nuc AreaShape Eccentricity. Then the settings are:
1
8
b
30
auto
auto
no 
>=
[Next page]
22
relative
no
no
image
yes
p
line
yes
Then I pick Nuc Intens Blue, Integrated INtensity. For some reason it then asks me to the name the file (which I didn't ask to save). I click Ok and it says saving did not work. After closing that warning, my figure pops up displaying the first histogram but yielding this error:
??? Error while evaluating uimenu Callback.

??? Error using ==> set
Cell array of strings may only contain string and numeric matrices.

??? Error using ==> set
Invalid cell array of strings.

Error in ==> Histogram at 569
        set(get(h,'XLabel'),'String',{MeasurementToExtract;AdditionalInfoForTitle})

??? Error while evaluating uimenu Callback.
------------


-(Mike 4/18) (Anne 3-2-06) Copy 'Ready to delete' folder from kahuna ( i think it's in fly/images?) to the archivas. After a few weeks, we can delete the original copy. Email Robert that you are doing this, so he knows where the data went and also so that he doesn't add anything new to the 'ready to archive' folder between the time we copy it and the time we delete it.  Maybe also email him now and see if he has anything additional that he wants to archive with archivas.

-(Mike 4/17) When the manuscript is submitted, *please* move *everything* you've ever processed on the G5's and your PC to its own, dated experiment folder on sabatini3_ata, within a Figure folder if appropriate. Move expts from within FIGURES subfolders out to the main directory, with FIG1 appended, etc.

-(Mike 4/17) (Anne 3-22-06) - Should we send an email via the forum announcing the new version?

-(Mike also did this before 3443 release) TIMER ISSUES: a) Number of sets analyzed is actually the current set being analyzed so either change the text to reflect this or subtract 1 from the count. b) The timing for first cycle is way off (told me 3 seconds when it is more like 40), and I think this calculation is also effecting time for other cycles. The first cycle should NOT be included in the calculation for time for other cycles.

-(Mike did this before 3443 release) (Requested by Anne 2-16-06) - there is a pipeline bug (sigh) - my pipeline (ProblemPIPE.mat in the DevDropBox) was loading OrigGreen image in the second space of the LoadImages module and had several modules downstream that use OrigGreen. If I load the pipeline and go to the LoadImages module to change OrigGreen to / (because I don't want to load an image in that space anymore), it yields an error. Normally this sort of thing works just fine and any place in the pipeline that had OrigGreen is converted to one of the other image names. Here's the error:
??? Assignment has more non-singleton rhs dimensions than non-singleton
subscripts

Error in ==> CellProfiler>storevariable at 2158
                    handles.Settings.VariableValues(ModuleNumber, str2double(VariableNumber)) = VarVals;

Error in ==> CellProfiler>VariableBox_Callback at 2243
        storevariable(ModuleNumber,VariableNumberStr,UserEntry, handles);

Error in ==> CellProfiler>gui_mainfcn at 5209
        feval(varargin{:});

Error in ==> CellProfiler at 60
    gui_mainfcn(gui_State, varargin{:});

??? Error while evaluating uicontrol Callback.

-(Tony 3/31) (Requested by Anne 2-16-06) - Please make ExportData data tool have the option of exporting standard deviations instead of means by clicking a box.  Be sure to use existing code as much as possible. This will probably require sending an additional variable to CPwritemeasurements. Someday we might also allow the option of medians, etc. but for now st dev is critical.

-(Tony 3/31) (Requested by Anne 12-15-05)- IdentifyPrimAutomatic says 'Outlined Objects' in the figure window instead of 'Outlined Nuclei' or 'Cells'.

-(Tony 3/31) (Requested by Anne 12-12-05)- The test mode for IdentifyPrimAuto does not have the CP image tools in the menu bar.

-(Tony 3/31) (Requested by Anne 12-07-05)  Can we add "Help for image tools" to the CP image tools menu that appears as a result of CPfigure on each figure window, which would pop up the same help window as in the main GUI (Help>Image tools help)?

-(Mike 3/30) (Requested by Colin 3/20) - I've put in ErrorExampleYeastPatchPIPE.mat into the developerdropbox.  It is an older version of a pipeline.  When one tries to load it, it creates an error and then there is an error for any module that you try to load until you restart CellProfiler.  Lets make sure this does not happen in the future when we try to use old pipelines.

-(Fixed for next release) (Anne 3-21-06) - The Mac compiled version - clicking on an image does not reveal the CP image tool window. the error msg is: undefined variable or function 'CPimagetool'

-(Mike 3/28) (Anne 3-22-06) -EMAILED ALSO - Yaz's analysis failed at the 14th cycle because the image had no objects - it's only a problem with the Distance option. Ray fixed the bug and restarted but I don't think it will finish before I leave today.  I don't know if this is key enough to warrant re-releasing when you get back, but it's just FYI. 
     I just spoke to her and she says that it's not critical to her to get the data back until monday. I spoke to her about the fact that she and Jan both had really dim images and we agreed that perhaps there was something wrong with the acquisition because Jan and Yaz both got poor images (high background and/or low signal). So she will try to figure that out.  
    So hopefully the data set will be all ready for you to analyze when you return. I thought you were going to set it up to do the ratio and then the classify thing so it would spit out the one number she needs, but I didn't see that in the pipeline. That is, I thought you were going to calculate the cyto/nuc ratio, log it, and then classify objects based on that value. But maybe the log step has to be done offline so you are going to run a matlab script later. It would be useful, I think, to write whatever modules we need so we can do this kind of analysis without running scripts later.

-(Mike 3/21) (Anne 3-13-06) this website is linking to cellprofiler, but it links to the MCRinstaller.exe which is silly. At some point, we should notify them that they are not linking to the right thing?  It's really kind of annoying.
http://www.softpedia.com/progDownload/CellProfiler-Download-31132.html

-(Mike 3/28) (Anne 3-21-06) - (EMAILED ALSO) When you have a chance, can you put a note on the forum about CP not yet being compatible with the intel mac?  And also that starting CellProfiler when another user is running X11 will cause errors (maybe copy the specific errors into the forum post so that if people go looking for that error msg they will see the answer). In the long term, can we write some sort of catch that figures out if the X11 problem will occur and tells the user?

-(Mike 3/28 implemented new MOD, will see if it works) (Anne 3-22-06) - Are you going to make the Forum not have spam somehow? I think you mentioned requiring login to post? I moved a bunch of posts to 'spam' because i didn't know how to delete en masse, and deleting one at a time was getting old after like 15 of them.

-(Mike 3/28) (Anne 3-22-06) - send little matlab project to poornima. She interviews thursday the 30th with us again, so should probably send this on monday to her. I don't even know what language or what scope you should send her - it's up to you!

-(Mike 3/28) (Anne 2-24-06) Please add this to the install.htm page of the website (i'd suggest just after the Mac 0s 10.4 instructions):  Intel-processor Mac users: Sorry, CellProfiler is not yet compatible with this new hardware.

-(Mike 3/21) Usually when Jason published virus shRNAs, each shRNA has a name like AURKB-558 where the 558 refers to the hairpin number or something? So I'd like our shRNAs to be labeled properly instead of using #1 to #5. Check with Jason to figure out where the hairpin number comes from; i am sure it's in our database.

-(Mike 3/21) Colin has apparently updated our example PIPEs for the new format. We should check them all and then zip them up and put them on the website. Apparently there is an error in ExampleYeastPatch in the define grid module (he put it on TODO), so we should just remove that PIPE for now.

-(Mike 3/21) Release software.

-(Mike 3/21) (Requested by Colin 3/20) - There is an error in definegrid.  Run ExamplYeastPatchImages and an error "Attempted to access Location(:,1); index out of bounds because size(Loaction) = [0, 0]. in  the DefineGrid module, which is module #09 in the pipeline" should occur.

-(Mike 3/21) (Requested by Colin 3/20) - An error occurs when you click on the area between browse and browse on the main GUI (browse for image folder and output folder).

-(Mike 3/8) (Anne 3-8-06) When several Load Images are run in a row, it says in the figure window it's loading the wrong image even though the right images are loaded. 

-(Mike 3/7) (Mike 1-31-06) Compile CP for cluster purposes. REPORT BUG TO MATLAB.

-(Mike 3/6) (Requested by Mike 2-10-06) Currently, when module variables change (as indicated by a more recent Variable Revision NUmber), loading saved settings does not work and even loading default variables does not work correctly. Here is what Anne and Mike decided would be the best way to handle this:

When a module with a newer variable revision number is encountered, CellProfiler should simply open a dialog box which tells the user that Module #X LoadImages is out of date and here are the values used in the previous version (we have all the code for this already because currently the dialog box opens showing you the saved and default settings side by side). Then CellProfiler should load all the default settings for that module (correctly, i am pretty sure it doesn't work now). The saved settings window should stay open so that after the rest of the pipeline loads, the user can see the saved settings and change from the default settings as needed. 

-(Mike 3/6) (Anne 2-21-06) The timer says Number of cycles completed = 7 of 8 when it's in the middle of processing the 7th cycle (i/e/ number 7 is not yet completed). It's ok to leave the calculation as is and just change the text to say Cycle being processed = 7 of 8.

-(Mike 2/28) (Anne 2-9-06) Please reprocess Fly200, all slides, and deposit data into the database under a new name.

-(Mike 2/28) Run pipeline without display (For Jason's analysis)

-(Mike 2/28) CreateBatchScripts should be able to handles going from PC to Linux

-(Mike 2/28) Post all the example images and pipelines at cellprofiler.org

-(Mike 2/28) (Anne 2-16) Put figure 5's SBS PIPE and examples on the website as the more typical CNT assay. Also, put all those unzipped example folders into our SVN repository.

-(Mike 2/28) (Anne 2-9-06) Please reprocess NIRHT and deposit data into the database under a new name.

-(Mike 2/28) (Anne 2-22) Robert reports that Zeiss will *probably* fix the macro, possibly even by thursday or friday, but in the meantime, please run a pipeline where we rotate the SYBR green image so the top two spots are horizontal and then make a position list from the identified spots. That way, Robert can test the position list imaging on Thursday after lab meeting and also we will have a chance to see how the new computer handles this big job.

-(Mike 2/28) (Anne 2-24) CP image analysis pipeline text is up high on the mac's.

-(Mike 2/28) (Anne 2-24) There is something wrong with exporting data, or with how measurements are recorded. See sab3_ata > 02_14 Arne images > 03_2DoseResponseOnly, RowsAB_OUT__5.mat. The LoadImages ModuleError column has some empties and some zeros - the zero lines are offset relative to the others. This is one of the only times I set my pref's to skip modules with errors, though no errors popped up during analysis. Maybe it's something related to that. I put this on your list rather than general TODO because exporting of data is so critical I don't want it to get messed up.  In fact, I am really suspicious of the data i exported from these files, because the numbers don't seem to come out right, even after I move the obvious cells over to make the columns line up properly. I think maybe the column headings are messed up or something.
UPDATE> ok, I re ran the job and changed the prefs to not skip errors so everything should be pretty normal. Things are still messed up when you export the data.

-(Mike 2/22) Anne 2-21-06 New pipeline bug:
I tried to remove the last two modules (by highlighting both and pressing -) in the 2006_2_16_1130NIRHTPIPE.mat from sabatini3_ata and got this error:

??? Matrix index is out of range for deletion.

Error in ==> CellProfiler>RemoveModule_Helper at 1669
    handles.Settings.VariableInfoTypes(ModuleHighlighted(ModuleDelete)-ModuleDelete+1,:) = [];

Error in ==> CellProfiler>RemoveModule_Callback at 1623
RemoveModule_Helper(ModuleHighlighted, hObject, eventdata, handles, 'Confirm');

Error in ==> CellProfiler>gui_mainfcn at 5209
        feval(varargin{:});

Error in ==> CellProfiler at 60
    gui_mainfcn(gui_State, varargin{:});

??? Error while evaluating uicontrol Callback.

-(Colin 2/10) (Anne 2-9-06 URGENT) - someone tried opening tif files that do not have an extension and they do not even show up in the window of CP. We need to fix the display in the window, plus the LoadImages module to handle files with no extension. There is a variable that asks the user what the format is, if no extension is present, but we have never set it up to work. I put a tif file called slide3-1 in the Dev DropBox, plus slide3-1.tif.

-(Mike 2/8) (Anne 2-7-06) - Some people at the meeting who downloaded mentioned that it was not obvious they'd need Matlab 7 - can you make sure the installation instructions/website are clear? Also, people seem to always miss the fact that the installation instructions and manual are there near the download button. Can we redesign the page to make it more clear?

-(Mike 2/8) (Anne 2-7-06) - please install python 2.4 on one of the macs and let me know. There is an open-source tool for clustering genome-wide data I think we should try out.

-(Mike 2/7) Mike 1-31-06: Prepare stuff to send to Sheldon for OME - test which substructures are needed for running CP 'headless'. Add this info to the programming notes, too (list of substructures needed by modules: X,y,z)

-(Mike 2/7) Mike, we should develop a Programming note to answer the FAQ "I already have a Matlab script that does most of my processing; can I just use one CellProfiler module to do a particular step?" 
This would give us a place to document how to call modules 'headless'. In particular, like what you are specifying for Sheldon, it would describe what components of the handles structure are needed (handles.Settings, handles.Preferences.FontSize or whatever).

-(Mike 2/6) Anne 1/17: I think you mentioned wanting to make MergeBatchOutput a data tool rather than a module so that we fix the time elapsed problems that were preventing exporting. Also, MergeBatchOutput produces an output file that has lost its real pipeline - the pipeline is just the MergeBatchOutput module. It should take the Pipeline and settings from the Batch_data.mat (first image set's output file).

-(Mike 2/2) Mike 1-31-06: Make ExportData a module.

-(Colin 1/26) - (Requested by Mike 1-25-06) Allow DefineGrid to save grid-lines as an RGB image, where R = grayscale image, G = gridlines, B = possibly text. This image can be opened in Photoshop and the grid can be applied/removed by showing or hiding the channel. Also if possible we would like a way to have gene names displayed within each location, but this may prove difficult since text and grid-lines are vector graphics and not pixel values.

-(Colin 1/25) - Completely updated it. (Requested by Anne 12-15-05)- Most of the text doesn't fit on the Timer window buttons.
-(Mike 1/25) Anne 12/23: Matlab license issues - think ahead whether we will need to license matlab on the whole cluster next year? did you hear from fran?  If it helps for us to cut back the needed licenses, you could put on your TODO long term to get the cluster compiled version figured out.

(Colin 1/18) - (Requested by Anne 1-17-06) - Make the figures stop storing the entire handles structure in them!!  The Histograms I just made are 280 MB for a single figure! Apparently we need some info that is in there (fontsize, maybe the locations of default directories or something), so that's why it is there. So we need to determine what do we actually need that is in there so we don't lose functionality.

- (Colin 1/18) - Put in a meandermode option in tile.

- (Colin 1/17) - (Requested by Anne 12-15-05)- Allow doubleclicking a .fig file in the image folder list box and have the figure window open.  Also, make doubleclicking allow to load a saved preference file.

-(Colin 1/17) - (Requested by Anne 12-16-05)- Try to make a cute icon for the Mac and PC compiled CellProfiler.

-(Colin 1/13) - (Requested by Anne 12-16-05)- Is the Save Image window (from the image tool sub-window) and the image tool sub-window itself using the usr's choice of font size?

- (Colin 1/13) - (Requested by Anne 12-16-05)- Filter by object measurement: if you are NOT using intensity or texture, i think it goes and retrieves the image anyway, because I had left a color image in the 'which image' variable and it complained that the image was a color image and errored out, even though it should not be using that image at all if i am filtering by area shape.

- (Colin 1/13) - It is the StdDev, and it is already in the help and on the label for the y axis. (Requested by Anne 12-16-05)- In the plot measurement window, when choosing line plot, are the grey lines stdev or the range? the black = mean I assume. We need to add this documentation to the help for this tool.

- (Colin 1/13) - Stopped variables from being stored in the workspace and things being displayed in the command window.

- (Colin 1/13) - (Requested by Anne 12-15-05)- ShowDataOnImage data tool does not have the RGB toggle checkboxes or the CP Image Tools.

-(Colin 1/11) - (Requested by Anne 12-16-05)- An error dialog produced by Crop is wrong, i think. It said "Image procs canceled b/s an image you wanted to analyze is not the same size as the image used for cropping. The pixel dimensions must be identical". The real problem was that I was using rectangle, coordinates and the coordinates I entered worked fine for the initial large images but were outside the range of the later, smaller images. The error box should reflect a more general statement about the image size I guess.

-(Mike 1/5) Anne 12/15 - Make sure the instructions for uploading the cp website to jura are up to date now.

-(Mike 1/5) NOTE: for manual cell counting, feel free to post images on web and ask Joo Han to count them - he is an author on the paper but as yet has not done any work on the paper itself.  Robert might also be able to help. It'd be nice to have two people count them to give us error bars for person-to-person variation.

-(Mike 1/5) Anne 1/5: Try new plots for “separating G2/M based on nuclear area” figure: Select these subpopulations and make separate line histograms (displayed in the same chart) of their nuclear area (right now CP lets you make histograms based on threshold data, but the thresholding can be based on one parameter but not two, I think, so perhaps doing this in excel or matlab might be easiest):
	- 4N cells that are pH3 positive (should show smaller nuclear area - at least a subpopulation)
	- 4N cells that are pH3 negative 
	- (maybe) All 4N cells together, though this doesn’t really add much info.

-(Mike 1/5) Instructions for installing on 10.4; can't download X11 for 10.4 you need 10.4 installation disk to get X11
Possibly compile on 10.2

-(Mike 12/22) Anne 12/21 - Could you run every module we have (well, ok, as many as you can stand) and make sure that the table of measures is complete? Many non "Measure" modules actually put stuff in the handles.Measurements so I want to be sure I covered everything.

-(Mike 12/22) Anne 12/15 - Make sure the Compile wizard instructions are up to date now.

-(Mike 12/22) Anne 12/21 - answer the form factor question i emailed you.

-(Mike 12/22) Anne 12/21 - need the list of modules w/short descriptions to be in their categories.

-(Mike 12/22) Anne 12/21 - I cannot remember if this is resolved... please let me know what the status is and if it changes the description in the module help (and therefore the description in the paper).

-(Mike 12/22) Anne 12/16 - Put folders for all of your projects so far on sabatini3_ata (our new server). These all should have the same format 2005_12_16_ProjectName so we can keep things straight. I will move my projects there too. I'd move everything from the local computers (G5's and PC) there and put them in a folder for deletion on the desktop of those computers and when we are sure that server is being backed up we can delete the local copies. This will allow us to easily share data, keep projects straight, work on our projects from any of our computers, and have the data backed up (the G5's and PC are not backed up so if they die all your data is gone!).

- (Mike 12/21) Anne 12/19 - post in han's images on the web.

- (Mike 12/21) Anne 12/16 - Set up the CellProfilerG5 computer (IN han's room) to access all our servers, using either the Wiki GUI instructions or the instructions that Nate might email you. We need to set up groups/users on the computer itself and meanwhile he is setting up the servers to allow that computer to access them. I guess we can assume he has done his thing already, but if it seems to not be working we might ask him if he has given our the CP G5 a static address yet and given it permission to access the servers.  If you get command line instructions from Nate, add them to the Wiki.

-(Mike 12/19) (Requested by Anne 12-16-05)- ClassifyObjects fails if there are no objects in the image, I think.

-(Mike 12/19 Pipeline won't work with released version, we changed CalculateRatios) Anne 12/15 - SBS image set: Need fresh data for dose response chart for Wortmannin only (like David's ppt slide). just need the excel data. Also, need supplemental table of the Z and V factors for any measure whose Z FACTOR is above 0.5. For this, we need to make sure we have the full measure name (e.g. which compartment, etc). Also, we need the final image set and PIPE to be zipped and put online as an example (if we are sure it's final).

- (Requested by Anne 12-09-05)-- Check CalcStatistics to make sure it's processing numbers properly.

-(Anne 12/16) Publicly announced CellProfiler:
------------------------------------------------
ISAC website: brajwa@purdue.edu
This might be appropriate to list in the Freeware/Shareware portion of your website, alongside NIH Image:


We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler!   www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure cells in thousands of images automatically.

This is the LAST email you will receive from this mailing list. If you wish to continue to receive updates on CellProfiler, please register as a member of our Forum and you will automatically receive (very infrequent) updates from the CellProfiler team.

Anne Carpenter
CellProfiler
------------------------------------------------
Flow cytometry facility at Purdue, Imaging centers at WIBR and MIT and Harvard.
jpr@flowcyt.cyto.purdue.edu, watson@wi.mit.edu, matsudaira@wi.mit.edu, caroline_shamu@hms.harvard.edu

We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler!   www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure cells in thousands of images automatically.

This is the LAST email you will receive from this mailing list. If you wish to continue to receive updates on CellProfiler, please register as a member of our Forum and you will automatically receive (very infrequent) updates from the CellProfiler team.

Anne Carpenter
CellProfiler
------------------------------------------------
To allen.parmelee@tufts.edu
I do not know whether this would be of interest to the boston user group website or mail lists - it's image cytometry...

We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler!   www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure cells in thousands of images automatically.

Anne Carpenter
CellProfiler

------------------------------------------------
 emailed ncicb@pop.nci.nih.gov    caBIG
We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler!   www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure cells in thousands of images automatically.

I thought this might be useful to link on your list of bioinformatics software.
------------------------------------------------
submitted to www.mathworks.com:
Thank you for your submission. Your file will be published within the next 2-3 business days. 
 Login:  carpenter@wi.mit.edu
 Password: 1104267
 The login information and temporary password provided above allow you to update your submission or modify your author information.  You will have access to the login screen only after your file has been published. You will not be able to make changes to your submission and author information before that.
  Please contact files@mathworks.com if you have any further questions. 
------------------------------------------------
Ray will submit to freshmeat.net
------------------------------------------------
To PNG image website (newt@pobox.com):
for the Scientific section of your website, you might want to link to my software:
-----
We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler!   www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure cells in thousands of images automatically.

Have fun!

Anne Carpenter
CellProfiler
------------------------------------------------
Submitted to www.dmoz.org, which links to directory.google.com:
CellProfiler is free open-source image analysis software designed for biologists without training in computer vision or programming to quantitatively measure cells in thousands of images automatically.
------------------------------------------------
www.zdnet.com, submitted this via website:
We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler!   www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure phenotypes from thousands of images automatically.
------------------------------------------------
www.open-bio.org, sent this message:

We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler!   www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure phenotypes from thousands of images automatically.

This is the LAST email you will receive from this mailing list. If you wish to continue to receive updates on CellProfiler, please register as a member of our Forum and you will automatically receive (very infrequent) updates from the CellProfiler team.

Have fun!

Anne Carpenter
CellProfiler
------------------------------------------------
biostuff.mit.edu, posted this message:

We are pleased to announce the first public release of the free, open-source cell image analysis software CellProfiler, developed as a collaboration between MIT and the Whitehead Institute!

www.cellprofiler.org

CellProfiler is designed for biologists without training in computer vision or programming to quantitatively measure phenotypes from thousands of images automatically.

Have fun!

Anne Carpenter, Postdoc in Sabatini Lab at WIBR

------------------------------------------------
Sent an email (below) to 192 people on the email list:

xiangjianjian0@hotmail.com, cameron@wi.mit.edu, aach@genetics.med.harvard.edu, James.Ackman@huskymail.uconn.edu, AndelovaH@lfhk.cuni.cz, narini@definiens.com, atkinson@bcm.tmc.edu, austinc@mail.nih.gov, mbaatz@definiens.com, tballou@alum.wustl.edu, buzz@ludwig.ucl.ac.uk, asbel@uiuc.edu, vytas@drugs.bsd.uchicago.edu, abirch@gmail.com, Colin.Blackmore@perkinelmer.com, lbleicher@scitegic.com, Andre.Blondiau@nmi.de, dutch_boltz@merck.com, ben@phy.ucsf.edu, cbonnard@isrec-sg1.unil.ch, joeb@universal-imaging.com, elliot@ucsd.edu, m.boutros@dkfz-heidelberg.de, jbradner@partners.org, laurent.brino@canceropole-ge.org, stephen.bunnell@tufts.edu, ncaplen@mail.nih.gov, diannec@kvremcwb.com, Ada.Cavalcanti-Adam@urz.uni-heidelberg.de, nicolas.cebron@uni-konstanz.de, ytc_hcs@yahoo.com, antony@biotrue.net, ACGREEN@mail.dstl.gov.uk, thomas.chung@sbcglobal.net, MCIK@PRDBE.jnj.com, colinc@mit.edu, pclemons@broad.harvard.edu, acohen@wisemail.weizmann.ac.il, mcollins@cellomics.com, cconrad@metasystems.org, Patrick.Courtney@perkinelmer.com, patrik.dahlen@bioimage.com, james.deeds@novartis.com, imagingworkbench@sbcglobal.net, diaz.victormanuel@hsr.it, sdiederichs@bics.bwh.harvard.edu, dietzel@lrz.uni-muenchen.de, ibrahima@videotron.ca, ulrike_eggert@hms.harvard.edu, cem_elbi@merck.com, seliasof@broad.harvard.edu, jelliott@nist.gov, jgevans@wi.mit.edu, fava@mpi-cbg.de, francesca_santini@merck.com, friman@bwh.harvard.edu, daniela.gabriel@novartis.com, Y.Garini@tnw.tudelft.nl, ralph_j.garippa@roche.com, stephan.geley@uibk.ac.at, vgelfand@uiuc.edu, Guenter.Giese@mpimf-heidelberg.mpg.de, michal_goldfish@yahoo.com, polina@csail.mit.edu, pgoodwin@apllc.com, a.gough@worldnet.att.net, scott.gruver@vanderbilt.edu, tguo@mit.edu, yuriy-gusev@ouhsc.edu, guy.voirin@csem.ch, haggarty@fas.harvard.edu, kyle_hart@rallyscientific.com, stephen.helliwell@novartis.com, Arne.Heydorn@bioimage.com, erlend.hodneland@biomed.uib.no, HoldenDP@appliedbiosystems.com, JingHuang@mednet.ucla.edu, hunter@mcb.harvard.edu, hyun@cc.ucsf.edu, yvonne.ibig@novartis.com, jinglese@mail.nih.gov, yoginho@usa.net, baj2107@columbia.edu, rajarvis@gmail.com, xiangjianjian0@hotmail.com, paj18@pitt.edu, thouis@csail.mit.edu, rjosest@bwh.harvard.edu, djulian@ufl.edu, katzenel@uiuc.edu, bbk@mit.edu, dbk@umist.ac.uk, prashant.khodade@gmail.com, akiger@ucsd.edu, jkim@molbio.mgh.harvard.edu, Evgeny.Kireev@invitrogen.com, juergen@hedges-klenk.com, korn@mpi-cbg.de, A.Kovacic@unsw.edu.au, kozak@mpi-cbg.de, phak004@mail.uni-wuerzburg.de, krausz@mpi-cbg.de, gkremers@science.uva.nl, akuznets@uchicago.edu, mrl@wi.mit.edu, CALaris@beckman.com, kjleck@ibn.a-star.edu.sg, Dariusz.Leszczynski@stuk.fi, szl116@psu.edu, Feng.Liang@invitrogen.com, liebel@embl.de, yanfeng@wi.mit.edu, dludgate@bccancer.bc.ca, clluengo@lbl.gov, peter.lundh@ucl.ac.uk, xuefang_ma@wi.mit.edu, mancini@bcm.tmc.edu, manj@ece.ucsb.edu, bobm@stanford.edu, bprevot@receptor.med.harvard.edu, Max.Sonnleitner@uar.at, mamcin@umich.edu, GMcNamara@coh.org, mdmcwilliams@beckman.com, smiller@blueshiftbiotech.com, ronm@wisemail.weizmann.ac.il, birbaumer@imsb.biol.ethz.ch, timothy_mitchison@hms.harvard.edu, murphy@cmu.edu, niederle@mpi-cbg.de, eorourke@molbio.mgh.harvard.edu, orlovni@mail.nih.gov, paiha@imp.univie.ac.at, Patrice.Bouchard@cnrc-nrc.gc.ca, serge.pelet@bc.biol.ethz.ch, richard_peltier@merck.com, Pengdong.Xiao@anu.edu.au, zperlman@fas.harvard.edu, perrimon@receptor.med.harvard.edu, jhprice10@yahoo.com, peter.ramm@invictaresearch.com, rao.movva@novartis.com, wsr@nih.gov, iravkin@vitrabio.com, brhee@utk.edu, srogers@bio.unc.edu, froth@hms.harvard.edu, Sarah.Ryan@biogenidec.com, sabatini@wi.mit.edu, Sabina.Winograd-Katz@weizmann.ac.il, scelfo@gmail.com, andreas.scheel@gmx.net, D.Schiffmann@dundee.ac.uk, mark.schurdak@abbott.com, kmscudder@usermail.com, seldin@essen-instruments.com, jbs@temple.edu, h.shen@umist.ac.uk, cshumate@blueshiftbiotech.com, kaylene_simpson@hms.harvard.edu, msipe@cellomics.com, francesco.sola@nervianoms.com, sophie.brachat@novartis.com, psorger@mit.edu, Harald.Stachelscheid@charite.de, bstaffopoulos@maia-scientific.com, Frank.straube@pharma.novartis.com, FrankStraube@web.de, berta_strulovici@merck.com, nicos@itsa.ucsf.edu, judy@MIT.EDU, Sai_Subramaniam@merck.com, dsudar@lbl.gov, jhs45@cornell.edu, susannej.szabo@pharma.novartis.com, tany@mri.co.jp, a_tarachandani@merck.com, st34@duke.edu, dthirstr@fhcrc.org, gthompson@cybexintl.com, KVACKER1@PRDBE.JNJ.COM, L.J.vanVliet@tnw.tudelft.nl, b.j.vermolen@tnw.tudelft.nl, JVictor@api.com, voldman@mit.edu, valmik@alum.mit.edu, X.Wang@dkfz-heidelberg.de, wangy1@ornl.gov, Jennifer.Wilson@Dal.Ca, stephen_wong@hms.harvard.edu, jerry.wu@sanger.ac.uk, dzahniser@dxvision.com, michael@zahniser.net

We are pleased to announce the first public release of the free,
open-source cell image analysis software CellProfiler!
www.cellprofiler.org

This is the LAST email you will receive from this mailing list. If you
wish to continue to receive updates on CellProfiler, please register as
a member of our Forum and you will automatically receive (very
infrequent) updates from the CellProfiler team.

Have fun!

Anne Carpenter
CellProfiler
------------------------------------------------

-(Mike 12/16) (Anne 12/15) - write a developer script to create a table of module name and short description. Same for image and data tools.  Ultimately, this code should be added to the ManualCOmpiler in DevScripts so that the table is put into the beginning of the manual as a quick reference guide (maybe after all the Help and before the individual module descirptions).

-(Mike 12/16) Anne 12/15 - Track PC vs Mac vs developer's version downloads.

-(Mike 12/16) (Requested by Anne 12-15-05)- the Set Pref's window says 'directory' in a few places instead of 'folder'; please change to be consistent.

-(Mike 12/16) (Requested by Anne 12-15-05)- Measure Correlation's text is white.

- Fix File > Set Preferences FastMode/SkipErrors.

-(Mike 12/09) Edit HelpCPInstallGuide for compiled versions.

-(Mike 12/08) Rotate: Need to verify - check lots of combinations on an image of a grid of lines or something that is easy to verify that the rotation is really working properly, and that the X,Y (for coordinate) and clockwise/counterclockwise (for ANGLE) is stated correctly. See also the bug I emailed you about on Monday afternoon.

-(Mike 12/08) (Requested by Anne 12-07-05)  Does AddData/ViewData work for numerical *and* text information? If so, adjust the help to state this.  Also, does LoadText module work the same way?  We might want to rename LoadText to be LoadData if so.

-(Mike 12/08 With Ratio, there are two objects, so we display nothing) (Requested by Anne 12-02-05) In Classify objects, it looks like display won't work if using Ratios. Does that still make sense, or is it outdated?

-(Mike 11/22 isdeployed) (Requested by Anne 11-21-05)  We need to disable certain buttons/menu items when running the compiled version, e.g. eval, propedit, image tool > Save to workspace and probably other stuff too. What is the command that allows us to determine if we are using compiled code?
TechDiagnosis 		- DONE
SaveCPcode		- DONE
DownloadNewModules	- DONE

-(Mike 12/7) (Requested by Anne 12-07-05)  Things unneeded/to be disabled in the compiled version (They aren't super-urgent but i thought i'd note things as i realize it): the option to change the Default Modules folder in the Set Preferences.

-(Colin 12/7) (Requested by Anne 12-1-05) - When using the image tool 'save to hard drive', The colormap i chose for a grayscale image does not seem to be used - the image comes out gray.

-(Mike 12/7) RelateObjects (How does it handle partially overlapping objects?
adjust the help to state how these are handled)

-(Mike 12/7) Test SaveImageAs (tif cannot have bitdepth option)

-(Mike 12/7) Fix CPimagetool button locations, fix SetPreferences help button locations

-(Mike 12/7) (Requested by Anne 12-01-05) - Clean up ExportData files and move old versions to outdated. I think the data tool should be called ExportData (not "ToFiles"). Are we going to have a corresponding module(s). right now, it looks like we have WriteSQLfiles as a module - I wanted to check whether this is sharing code with the new ExportData tool and whether it can be expanded to WriteExcelFiles. The module versions should be renamed ExportDataExcel and ExportDataSQL when they are finished up. I assume we need two separate modules because their settings are all different.

-(Anne 12/7) - Did dependency report on Modules folder: only toolbox needed is image processing toolbox. All variables are ok (only one 'Unknown' and that's because it's the result of an eval function).

-(Mike 12/6) Fix Help problems in compiled CellProfiler

-(Mike 12/6 ExportLocations) Jason: Design method for scaling grid and getting locations

-(Mike 12/5) It seems that in several places, like MeasureImageSaturationBlur, we say "Percent" when we actually mean fraction. We should go through all modules/data tools looking for the word percent and make sure that we change it one way or the other so it's accurate & consistent.  Otherwise, if it says 0.08 we don't know whether that is 8% or .08%

-(Mike 12/5) (Requested by Anne 12-02-05) I feel pretty strongly that CPretrieveimage should use text as arguments rather than numbers.  E.g. the colorflag should be 'mustbecolor' 'mustbegray' instead of 2 or 3. That way, when you are in a module and look at the line you can figure out what checks it is making. I'm happy to go through and modify this if necessary.

-(Mike 12/5) (Requested by Anne 12-05-05) - The Tile module works fine now, including the hi-res button, but it dumps a bunch of variables into the general workspace. Can we make it stop?

-(Mike 12/5) (Requested by Anne 12-05-05) - when opening images by doubleclicking the file list in the main GUI, the figures open with really high numbers.

ANNE 12/5 >>>>>(Requested by Anne 12-02-05) TWO OPTIONS TO FIX FONT SIZE FOR TITLES IN ALL FIGURE WINDOWS:
1. For every use of text that's not an image title, be sure to use 'fontsize',handles.Preferences.FontSize.
2. add an argument to CPimagesc: FontSize, passed in as handles.Preferences.FontSize and then add this line to CPimagesc:
set(gca,'fontsize',handles.Preferences.FontSize)

ANNE 12/5 >>>>>(Requested by Anne 12-05-05) - Take a look at the lines added to CPimagesc. Should I pass in the entire handles structure rather than just the colormap (which is taken directly from handles.Preferences.IntensityColormap?)  If so we should do a search and replace for:
CPimagesc(Image,'ColorAlreadySoIgnore')
CPimagesc(Image,handles.Preferences.IntensityColorMap)
except Image could be a bunch of different names.  See also TWO OPTIONS FOR ... because that would also involve adding another argument to CPimagesc, so maybe sending handles is the best option.

-(Mike 12/5) (Requested by Anne 12-02-05) Can we prevent CP main window from being resized? If you click on it during CPresizefigure which is supposed to be operating on one of the other figure windows, it will resize the main GUI!!

-(Mike 12/05) (Requested by Anne 12-02-05) Does FilterBy object measurement work with Neighbors?  If so, add it as selectable in variable 3. and add it to the see also.

-(Mike 12/05) (Requested by Anne 12-01-05) - We need to change the name of the MeasureObjectTexture module to MeasureTexture, since it works for images now too, not just objects. When doing so be sure to search and replace all instances of MeasureObjectTexture in the code (esp. in See also's) and Measure Object Texture (with spaces). Also, open the Example PIPEs as matlab files and change the name by hand in Settings.ModuleNames because it's pretty easy to do it that way.

(12/02, everyone) - Check through each module (~2 per day):
THIS HAS ALREADY BEEN DONE FOR ALL:
	- (Requested by Anne 9-01-05) - We'd like to make the variable descriptions
		consistent - at the very least we should try to be consistent with
		stating "Choose" (rather than "select"), and phrasing things as
		questions versus "Enter the ..."   Also, look through the variable
		descriptions for uses of computer-ific words like 'segmentation'.
	- Write help if DNE
	- Check that fontsize is never hard-coded and instead uses the user's preference.
	- Check Font
	- Go through the code looking for instances of the term "image set" and
		replace with "cycle" where appropriate.
	- check format of error messages.
	- CPfigure rather than figure. DataLayout tool in particular is using figure.
	- Smart Indent
	- M Lint error checking
	- CPimagesc
	- Remove 'saving images' text
	- CPwhichmodule
	- CPwhichmodulefigurenumber
	- (Requested by Anne) - Test each module on color vs grayscale and make
		sure they all work or have some type of error catching.

-(Colin 12/02) (Requested by Anne 12-1-05) - The title for the histogram when using the image tool says histogram for [blank].

-(Colin 12/02) (Requested by Anne 12-1-05) - when you use the image tool 'open in new window', the resulting window does not have the Interactive zoom or CP image tools items on the menu - can you figure out why?

-(Mike 12/02) (Requested by Anne 12-02-05) Does Display Data on Image work with Ratios,If so, add it as selectable in variable 2. and add it to the see also.

-(Mike 12/02) (Requested by Anne 12-02-05) Does Display Histogram work with Ratios,If so, add it as selectable in variable 2. and add it to the see also.

-(Mike 12/02 yes there is no reason to delete, that I can see) (Requested by Anne 12-02-05) This code is commented out of DefineGrid. should it be?
    %%% Deletes the figure to be sure that the text and such is not
    %%% retained in memory.
    %%% delete(ThisModuleFigureNumber)

-(Mike 12/02) IdentifyPrimManual: PROBLEM WITH MAXRESOLUTION

-(Mike 12/02) (Requested by Anne 12-02-05) Does DisplayMeasurement work with Ratios? If so, add it as selectable in variable 3 and 9.. and add it to the see also.

-(Mike 12/02) (Requested by Anne 12-01-05) - What's up with MeasureObjectIntensity? It looks like it works for color images, but the error msg nearby says that it only works for 2D images.

-(Mike 12/02) (Requested by Anne 12-02-05) -Correct the capitalization of all CPsubfunctions.

-(Mike 12/02) Increase speed of Test Mode for IdentifyPrimAutomatic and Secondary

-(Mike 12/02) (Requested by Anne 12-01-05) - Just want to make sure it's on our list to implement the CPretrieveimage (or whatever we decided to call it) throughout all modules.

-(Mike 11/30) We should make *absolutely* certain that all measure modules properly handle pixel size. we have not checked this in a very long time because we always have pixel size = 1, but it would be *so* embarassing to release our software and have it scramble all the measurements!

-(Mike 11/30) (Requested by Anne 12-01-05) - Tile produces a figure with a few buttons that use propedit that should be disabled in the standalone version.

-(Mike 11/30) (Requested by Susan) -SpeedUpCellProfiler module doesn't work for movie. It will stop after the first frame of the movie. Note from Anne: if it's not a quick fix, we should just state in the help for speedupcellprofiler that it doesn't work for movie.

-(Mike 11/30) (Requested by Anne 12-01-05) - Final module cleanup... RelateObjects should be renamed Relate. RenameOrRenumberFile should be renamed RenameOrRenumberFiles. MeasureRatios should be renamed CalculateRatios (but kept as a measurement module).  ExtractHeaderInfo and StretchAlignCrop should be removed to DeveloperScripts. 

-(Mike 11/30) I get (undefined function 'nanmean') when using ExportDataToFiles.

-(Mike 11/30) - what's the status of the weird way that perimeter was measured?  I can't recall what we decided to do about it. Aren't we supposed to use Matlab's built in function for it now? Has this been done? Is Form Factor calculated properly now?

-(Mike 11/30) Regarding MeasureImageIntensity and its unused Variable 2: Mike, I agree it looks like we initially intended for this to be used. I think it's better to leave it out unless there is a chance that leaving as is will overwrite other modules' measurements - are there any other modules that would write to the same place? I guess the only danger is that if you had another module measuring intensity with different settings on the same image, it would get overwritten by this one, but I think that is not a real concern. Also, can you doublecheck that if we leave as is, is it using a consistent format for storing the measurements (e.g. the underscore after 'Intensity'?) that matches other modules?

-(Mike 11/30) ok, I changed my mind about IdentifyPrimYeastPhase - please move it to developer scripts and add it to TODO_Projects!  It's too rough right now.

-(Mike 11/30) Please add all the data tools, image tools, and help files to the module check list so that we are sure to go through them.

-(Mike 11/30) Make LoadSingleImage show the filenames loaded, like LoadImages does.

-(Mike 11/30 REMOVES 'DO NOT USE' NOT '/' WHICH WAS OLD) The code at line 153-154 in MeasureCorrelation doesn't make much sense to me. Does it make sense? I don't know what the comment refers to - i wonder if it's old code.

-(Mike 11/30) Allow LoadText to use a different folder than the default image folder (add a path selection like LoadSingleImages has).

-(Colin 11/29) Move ImageTool to CPsubfunctions, save as CPimagetool to be consistent with other CP functions. I think most modules aren't using the CPimagetool yet, so we need to add it.  Perhaps actually we should make CPimagesc so that every time we show an image in a figure it automatically has the image tool embedded?

-(Colin 11/29) - (Requested by Anne 11-05-05) - None of the image tools work that are embedded in IdentifyPrim figure window - i.e. clicking on one of the panels yields the little pop up window of image tools, but none of them works - here is the error:
??? There is no 'Title' property in the 'figure' class.

Error in ==> CPImageTool at 52
        Title = get(get(get(handle,'Parent'),'Title'),'String');      % Get title of image

??? Error while evaluating uicontrol Callback.

-(Mike 11/29 ALSO CORRECTED FILTERBYOBJECTMEASUREMENT OUTLINES AND RENUMBERING) (Requested by Anne 11-29-05) - Seems like it would be relatively painless to expand FilterByObjectMeasurement to work with MeasureCorrelation and MeasureRatios, since each of these can produce per-object measures. Should we give it a try?

-(Mike 11/29) SBS Data for Anne

-(Mike 11/29) (Requested by Susan 11-29-05) - In ColorToGray modules, Type N to ignore red(or others)  doesn't work well, got error "Error in ==> CellProfiler at 53   gui_mainfcn(gui_State, varargin{:})"

-(Anne) (Requested by Anne 11-29-05) - Why don't the data tools that have been converted to modules have nice headings (like %%%VARIABLES%%%)?

-(Mike 11/29) (Requested by Anne 11-29-05) - We need to add the boilerplate to CPsubfunctions. I updated the boilerplate recently, so be sure to use a copy from any of the modules/data tools/image tools.

-(Mike 11/28 checked and works fine) (Susan 11/28)In IdentifyPrimAutomatic can't set the "Suppress local maxima within this distinace.." to an integer. Only automatic works. Error message "function STREL expected its second input, R, to be integer-valued. in the IdentifyPrimAutomatic module"

-(Mike 11/28) (This is using CPquestdlg which uses handles font size and helvetica. Check again) When clearing a module in the pipeline, the confirm dialog is using times and a pretty small font. I think it should be using a CP version of a dialog box that lets us change the font & size.

-(Mike 11/28) ClassifyObjects should allow the user to save the resulting color-coded image. Are the resulting objects color coded in the display?

-(Mike 11/28) Make platefix able to take in end-XX as a size. The help already describes how to use that option (as soon as i finish in a few minutes), but it doesn't actually work yet (we think).

-(Mike 11/28) Check Ray's clearborder and compare with imclearborder

-(Mike 11/22 I THINK THIS IS ISOLATED CASE FOR CLASSIFY OBJECTS BUT WILL CHANGE IF YOU WANT)(Requested by Anne 11-22-05) - I noticed in the ClassifyObjects module that we are using 'hot' as a colormap sometimes, so you might want to check the code for instances of that during your colormap overhaul.

-(Mike 11/22) (Requested by Anne 11-22-05) - would it make sense to only list the feature numbers within the Measure modules that actually make the measurements? I am nervous having listings elsewhere because they might go out of date. I'd suggest that the following modules' help say "see the individual Measure modules for the feature number of interest":
ClassifyObject DONE
FilterObject DONE
GetDataonImage DONE
GetPlotMeas Done
GetHistogram DONE
MeasureRatios DONE
I think these are all the relevant modules that require feature numbers (but i guess you could do a search for "feature number").  Then, each Measure module should have a listing of its own features (probably already done).

-(Mike 11/22) look for jet

-(Mike 11/22) (Requested by Anne 11-22-05) In ShowDataOnImage, often you want to choose a different image to display on, so one of the choices in the listbox should be to override the automatic looking-up of the image so that you are allowed to browse for the image.

-(Mike 11/22) (Requested by Anne 11-22-05) I think that the overlay outlines module is producing images outside the 0 to 1 range.

-(Mike 11/22)
Replace this repetitive code:
%%% Reads the current module number, because this is needed to find
%%% the variable values that the user entered.
CurrentModule = handles.Current.CurrentModuleNumber;
CurrentModuleNum = str2double(CurrentModule);
ModuleName = char(handles.Settings.ModuleNames(CurrentModuleNum));

With a subfunction:
function [CurrentModuleNum, ModuleName] = CPwhichmodule(handles)
CurrentModuleNum = str2double(handles.Current.CurrentModuleNumber);
ModuleName = char(handles.Settings.ModuleNames(CurrentModuleNum));

-(Mike 11/22) (Requested by Anne 11-22-05)- make sure all the identify primary and object-processing modules (the ones that produce a new object like ExpandOrShrink) create UneditedSegmented and SmallRemovedSegmented and record the object count and locations. I noticed one module did not create these (Id in grid, I think).

-(Mike 11/22) (Requested by Anne 11-21-05)  Histograms: 
1. (DONE) If you choose a starting and ending image set when running this tool, it ignores your inputs and plots the entire image set!!!!!
2. (DONE) Export Data button didn't work for me. No errors, it just doesn't do anything. Perhaps it is because I have a plot plus several control plots on the same chart?
3. (DONE) I would like to be able to choose the color for the initial plot, preferably right after specifying the starting and ending set.
4. (DONE) When choosing the color, please list what color names can be typed in, and also how to specify numerical colors, e.g.  [.7 .7 .9].
Here is something perhaps helpful from the CreateWebPage module:
%textVAR07 = Choose the background color, or provide the html color code (e.g. #00FF00)
%choiceVAR07 = Black
%choiceVAR07 = White
%choiceVAR07 = Aqua
%choiceVAR07 = Blue
%choiceVAR07 = Fuchsia
%choiceVAR07 = Green
%choiceVAR07 = Gray
%choiceVAR07 = Lime
%choiceVAR07 = Maroon
%choiceVAR07 = Navy
%choiceVAR07 = Olive
%choiceVAR07 = Purple
%choiceVAR07 = Red
%choiceVAR07 = Silver
%choiceVAR07 = Teal
%choiceVAR07 = Yellow
And, while we are at it, there is a list of colors in DefineGrid that could probably be expanded too?

-(Mike 11/22)(NO CALCULATIONS SHOULD BE DONE IN DISPLAY WINDOW) (Requested by Anne 11-21-05):  Code like the following is found in several identify modules. I think the error will cause the module to abort, though it's not supposed to. Can we make sure it just pops open a window, and that this window is not popped open repeatedly? I think there is an option for one of the warndlg or errordlg boxes that prevents more than one of the same error message from opening each time.
try
    if ~strcmp(SaveOutlined,'Do not save')
        handles.Pipeline.(SaveOutlined) = FinalOutline;
    end
catch error(['The object outlines were not calculated by the ', ModuleName, ' module, so these images were not saved to the handles structure. The Save Images module will therefore not function on these images. This is just for your information - image processing is still in progress, but the Save Images module will fail if you attempted to save these images.'])
end

-(Mike 11/22) (Mike 11/22 two versions of color, what is going on?) (Requested by Anne 11-21-05): I think this code in MeasureObjectNeighbors should look up the user's preference for the colormap. Or perhaps there is a CP subfunction relating to colormaps?
if sum(sum(IncomingLabelMatrixImage)) >= 1
    cmap = jet(max(64,max(IncomingLabelMatrixImage(:))));
    ColoredLabelMatrixImage = label2rgb(IncomingLabelMatrixImage,cmap, 'k', 'shuffle');
else  ColoredLabelMatrixImage = IncomingLabelMatrixImage;
end

-(Mike 11/22) (Requested by Anne 11-21-05)  There is a bug when using MoG adaptive (see identifyPrimAutomatic).

-(Mike 11/22 replaced all 'times' with 'Helvetica', then moved check font to module checking) (Requested by Anne 11-21-05): Make sure all the Measure modules are using the same font. Actually, make sure all the code is using the same font! We have Times, fixedwidth, helvetica throughout the code.

-(Mike 11/22) (Requested by Anne 11-21-05):  It seems like this code in GetDataOnImage module will fail if that image cycle does not have any objects. The catch should allow processing to continue but display something in the figure window like 'no measurements found for this cycle'.
try
    tmp = handles.Measurements.(ObjectName).(Measure){SetBeingAnalyzed};
catch
    error(['The measurements for ',ModuleName,' could not be found. This module must be after a measure module or no objects were identified.']);
end

-(Mike 11/22) (Requested by Anne 11-21-05):  I think that we should remove the Expand option from MeasureObjectNeighbors. Essentially, this module currently has this one weird option where you can expand objects until they touch, but I think this can be accomplished using the Expandorshrink objects module. If this is true, we should remove the expand option and instead state in the help that you could precede this module with Expand infinitely if desired. As it is, the MeasureObjectNeighbors module needs to have all the same code as an identify module. If we leave it as is, we have to make sure we put in everything expected of an identify module (e.g. storing locations, etc.) which will be a pain.

-(Mike 11/18) Fix removing last module for BrowseButton

-(Mike 11/18) (Requested by Anne 11-02-05) - Susan will eventually work on making ExportData (datatool) into a module.  Is it possible in a general way to make all our data tools easily wrapped so they can be run as modules as well? I think perhaps the easiest way to accomplish this would be to write all the data tools as modules, and then when running them as a data tool, pass the module a fake handles structure.
Histogram: DONE (can talk about options)
PlotMeasurements: DONE (can talk about options)
ShowDataOnImage: DONE (can talk about options)

-(Mike 11/18) (Requested by Anne 11-17-05) - In IdentifyPrimAuto, when throwing out objects at the edge based on a cropped image, they aren't colored with yellow outlines as is the case when throwing out objects at the edge of rectangular images.  Also, just wanted to make sure whether this function (edge-throwing-out) also works for the case where you have typed an image name in (instead of ellipse or rectangular). Just curious.

-(Mike 11/16) Added the option to log ratios

-(Mike 11/16) (Requested by Anne 11-15-05) percentage of objects (for histograms) was actually coming up as fractions (0.2 instead of 20%), so I multiplied the fractions by 100 in the code for Histogram.m. But I had to make the same change in CPcumhistogram.m Why do we have the same code in two places?  Just checking whether Histogram should be calling CPcumhistogram.

-(Mike 11/16) (Requested by Anne 11-16-05) - This is potentially very difficult, but thought I'd ask: right now, we can exclude objects touching the edge for identifyprimautomatic. This only works for objects touching the edge of the rectangular image. If we were feeding in an image to ID Prim Auto that had been cropped into a circle, the cropping shape is stored in the handles structure (CropMask or CroppingMask - one is the size of the original image and the other is the size of the cropped image) so can we use this information to discard objects touching the edge of whatever shape is depicted in the CropMask or CroppingMask (can't remember which one is the size of the cropped image)?

-(Mike 11/16) (Requested by Anne 11-16-05) - The Save as default? question during set preferences has a teeny tiny font size; I couldn't really read it. I had my font size at 12, and didn't change it.

-(Mike 11/16) (Requested by Anne 11-16-05) - Fairly frequently if something goes wrong during closing the CP window, it stays open and it seems like there is no way to force it to close. Can you figure this out?  Is there something we can do at the command line - I tried close all but that didn't help.

e.g. I tried to close CP and got this error:
??? Reference to non-existent field 'FontSize'.
Error in ==> CPquestdlg at 106
    FontSize = handles.Preferences.FontSize;
??? Error while evaluating figure CloseRequestFcn.

-(Mike 11/16) (Requested by Anne 11-15-05) - when plotting histograms on log scale using CPhistbins, the resulting plots comes out with tick labels that are 1, 2, 3 instead of 10superscript1, 10superscript2, 10superscript3. Is it possible to change this? At the very least, the x axis label should say "log scale, 10^x" but it'd be better to have superscripts.

-(Mike 11/15) (Requested by Anne) - DONE Display grid: it looks like the labels are too far one unit to the left and one unit up.

DONE Define grid:  I think the description for MANUAL + MOUSE what is the distance? is incorrect because it says distance from control to the bottom left. In my case, I had the settings: first spot = top left, count by columns, and then MANUAL + MOUSE distance from control to the bottom left = 1,0 (spot units).  In reality, the grid was placed (as I desired) as if that question was asking 'MANUAL + MOUSE distance from control to the *top left*'. So I think we need to change the text to read either 'top left' or maybe 'the first spot' (in other words, as defined by your settings for 'first spot'). Ideally, it would be first spot. I am just not sure how the code actually works.

-(Mike 11/15) from Anne >>> Don't forget the BioImage image processing project (for the manuscript). Still no rush, just wanted to make sure it didn't get lost in the shuffle.

-(Mike 11/15) (Requested by Anne 11-15-05) When plotting intensity measures on scatterplots (and probably other types of plots), the axes and titles and such do not indicate which color stain is being shown (e.g. OrigBlue, Green, etc).

-(Mike 11/15) (Requested by Anne 11-15-05)  the Add module window didn't go away when i shut down CP.

-(Mike 11/15) (Requested by Colin 11-08-05) - When there is a custom input drop down menu and you close out of the input box without typing anything in, there is an error.  Also, it should be use cellprofiler colors.

-(Mike 11/15) (Requested by Colin 11-08-05) - The help for the skip modules preference isn't working (should be an easy fix).

-(Mike 11/14 only one value to display, don't think whole window for one value is worth it)(Requested by Colin 11-08-05) - I think the MeasureRatio module should have a display window, which displays the values similar to other measure modules. (Right now it says it is unnecessary).

-(Mike 11/14) Make the download new modules work - I think it should also download new CellProfiler.m and ImageTools and DataTools, etc.

-(Mike 11/14) Make the help/manual prettier: For each example image that is just text, type the text into the help for that file instead of referring to the image, because as it is these images are stretched a lot.

-(Mike 11/14) Price fix
SaveImages module at line 201:

    FileName = handles.Pipeline.(['Filename', ImageFileName]){...}

- (Requested by Anne 11-10-05) -When a control histogram is plotted and then you use View > Property Editor to adjust the axes (e.g. change the X or Y axis), only the most recently plotted graph changes. It's really misleading!  The same thing happens if you zoom: only the most recently plotted line zooms. I think everything needs to be plotted to the same axis in order for them to all stay linked to each other?

-(Mike 11/14) (Requested by Anne 11-11-05) - Mike - why isn't font size in handles.Preferences.FontSize? Does that mean it's not saved as a user preference? It's in handles.Current.FontSize
A programming note should be added to prognotes telling the user that when they generate figures they should use CPfigure, when they need the font size they should look it up in handles.WHEREVER.FontSize, if they need pixel size it should be in wherever, if they want to generate an error it should be like Whatever and include ModuleName. And so on for anything that is frequently used by programmers so they know where to find stuff and they use the proper syntax.

-(Mike 11/11) Define Grid Changes:
  1. (DONE) What is the least amount of information needed to define grid?
  2. (DONE ONLY PREVIOUS GRID) Implement way to handle failed grids (force grid, previous grid, grid = 0)
  3. (DONE) Have handle's include if grid failed or grid worked

-(Mike 11/10) (Requested by Anne 11-10-05) - Filterbyobjectmeas is not putting out objectcount. make sure it is doing everything that a prim module does - locations, too.

-(Mike 11/10) (Requested by Anne 11-10-05) - When exporting, if you choose Image only, it doesn't give you the mean measurements from the objects in the Image file. This might seem reasonable, but it leads to this weirdness that I found really confusing:  If I export everything in the file (Image and Nuclei), then I get all these nice nuclei average measurements in the output file.  If I export just Image only, suddenly all my nice average measurements are gone.  So I think when Image is selected, the other objects' mean measurements should be exported into the image file too (if it's not a nightmare in the code). I am pretty sure that most people would want this.  If we don't do this, we should at least make a prominent note that says Image will contain mean measures of objects only if you are simultaneously export the objects.

-(Mike 11/10) Browse buttons now move when adding or subtracting modules, but should check when deleting modules and also what about callback function for these buttons when the module number changes? Does this change the value in the wrong modules?

-(Mike 11/10) (Requested by Anne 11-08-05) - Filter by object measurement should have its variables rearranged - What did you call the original image is only necessary for intensity & texture (not shape), right? so it should come after What measurement do you want to filter by.

-(Mike 11/10) (Requested by Anne 11-08-05) -  FilterByObject Measurement fails if there are no objects in an image.

-(Mike 11/10) (Requested by Anne 11-08-05) - Expand or Shrink does not have the option to save outlines. Can you add it and also check any other object processing modules (this is for the general TODO, not steve's but maybe it's quick to check it while you are doing this) to be sure they all are capable of saving outlines properly, and *not* saving colored objects?

-(Mike 11/10) GrayToColor --get "Error while evaluating uicontrol Callback." couldn't even add to pipleine.

-(Mike 11/10) when plotting a scatterplot, it asks 'choose histogram settings' as the dialog box label when asking you to pick which image sets.

-(Mike 11/10) Fix ellipse by clicking points in crop module

-(Mike 11/10) (Requested by Anne 11-08-05) - When you load a non-valid settings file, you get an error message, but the text "Loading" still appears in the pipeline listbox, and it seems to me that there are variables and stuff left loaded in handles.Settings - maybe because I previously had some modules in the pipeline when I tried loading a new one?

-(Mike 11/10 ALL MODULES NOW USE ERROR, NOT SURE WHAT TO DO ABOUT DATA TOOLS) Make sure all modules are using error and not errordlg

-(Mike 11/10 Fixed how handles are stored in Align) (Requested by Anne 11-09-05) - Why does module checks say "Change handles structure?"

-(Mike 11/10) (Requested by Anne 11-09-05) - I don't think we want all our email addresses on the Boilerplate of each file. You know, too much fan mail and all that.   :)   Instead we should just have our names plus the website, right?

-(Mike 11/9) (Requested by Anne 11-08-05) - It looks like there is a little bug in the pipeline loading - whatever setting it is that controls whether a browse button/long pathname box is displayed is not moved up and down the pipeline when the rest of the stuff moves. I had a long pipeline with save images at the end that has one of these pathname/browse variables. It looked fine until I added a module to the pipeline several steps before the end. Then, the save images was moved down one spot but lost its browse button. Meanwhile, the module before the save images gained a mysterious browse button.

-(Mike 11/9) (Requested by Anne 11-09-05) - When exporting data with features as rows, the wait bar doesn't display anything. It's ok if that doesn't work, but since exporting takes a long time I think most people will think it froze and try to quit. We should have the waitbar display a msg saying it takes a really long time and be patient.

-(Mike 11/9) (Requested by Anne 11-08-05) - Gray to Color has some text as a variable description that says type N to leave that color black, but I think that's outdated, right?

-(Mike 11/9) (Requested by Anne 11-08-05) - Expand or Shrink does not work properly for shrinking secondary objects that are touching each other. it looks like the edges that border the background shrink but the edges that touch each other stay the same. Probably b/c we initially wrote this moduel for primary objects which always have a black line between the objects.

-(Mike 11/9) (Requested by Anne 11-08-05) - IdTertiarySubregion doesn't produce nice outlines, they all run together. Can we fix this?

-(Mike 11/9) (HOW DO YOU WANT TO HANDLE NO DATA IN HISTOGRAM/PLOTMEASUREMENT, SKIP IT, WARN USER??) (Requested by Anne 11-08-05) - Fix (DONE) Export SQL, (DONE) ExportData, Histograms, PlotMeasurement, etc. for when number of objects = zero.

-(Mike 11/9) (Requested by Anne 11-05-05) - In Crop, when cropping by clicking pixels, esp. in rectangle shape, it would be nice when you accidentally click a little bit off the image (e.g. you are trying to click the top left most pixel of the image) if it would not fail. Right now, it probably records it as a negative number or something, so it would be nice if positions less than 1 are rounded to 1 and if pixels greater than the size of the image are rounded to the 'end' of the image. If this occurs, however, there should be a warning dialog so you are aware that you clicked off the image (in case you accidentally clicked way off the image and did not intend to). I guess the same thing should be done for clicking points to make an ellipse, right?

-(Mike 11/9) (Requested by Anne 11-08-05) - When in PlotMeasurement, if you click on another window sometime in the process of choosing features, etc, it ends up plotting the data in whatever window you clicked. Which sometimes is the main CP GUI. Which looks kind of cool, but is probably not intended. :)

-(Mike 11/9) (Requested by Anne 11-08-05) - In my opinion, LoadImages window should stay open (though it could be resized to be not very tall) and display the current image filenames that were loaded. Otherwise, there is no easy way to tell which images are being analyzed, esp. if you are working in subfolders.

-(Mike 11/9) (Requested by Anne 11-08-05) - The time for each pipeline window is using wrong font type (looks like times new roman). Also, the set preferences confirmation dialogs after you set the prefs. Also, the error dlg that says your default image folder does not exist. Also, the LoadSavedWindow that helps you load old pipelines is not using proper font size.

-(Mike 11/9) (Requested by Anne 11-08-05) - show data on image needs the underscores to be displayed properly in the title for the image. see other image tools for example of this.

-(Mike 11/9) (Requested by Anne 11-08-05)
-please add log scale option for histograms. The user would still specify the min and max in terms of the actual, original measurements, but the bin widths would be made on a log scale.
-Also, can we add a button onto the histogram figure that's "Export data to Matlab workspace" which runs that line you gave me? It's a different command depending on whether it's bar or line data, and you'd want to run two lines - one for X data (bins) and the other for the data itself:
Bins = cell2mat(get(findobj(gcf,'type','line'),'XData'))
Data = cell2mat(get(findobj(gcf,'type','line'),'YData'))
I'm not sure what order these come out as (if you have two plots on the chart): I guess in order of how they were put on? or does it depend which plotted line you recently selected?

-(Mike 11/9) (Requested by Anne 11-08-05) - I think FilterByObject Measurement should not be producing 'image of the colored objects', so this variable should be removed and the associated code taken out. We now use ConvertObjectsToImage to do that part. I also wonder whether the outlines are stored in the same format as they are in the IdentifyPrim modules.  THEY AREN'T! Need to fix this too.

-(Mike 11/8) (Requested by Anne 11-05-05)
-(DONE) ExportData is not using the proper font size. At normal font size, the different objects' names are kind of cut off a bit on their bottom edge.
-(DONE) The swap rows/columns prompt should state something about which way it will be - like "Each measurement is a " and then the popup would say 'column' or 'row' (I think that is accurate for both Image and Object files).
-(DONE)Change 'Choose base of output' to say 'Base file name for exported files:' (or whatever you think is user friendly).
-(CHECK ON MAC)The Export process info popup menu is too small to display its text, so it needs to be wider, or perhaps better yet it should be a checkbox like the rest.
-(DONE)Export process info doesn't seem to work at the moment - I get an error.
-(DONE)The text prompt should be renamed something more meaningful - like 'Export modules and settings in the pipeline as a text file' (I think that's what it does).
-(DONE)If you deselect all the objects and just try to export process info, nothing happens.

-(Mike 11/7) (Requested by Anne 11-08-05) - The back button fails sometimes when plotting histograms. yields this:
??? Attempted to access SuffixNbr(6); index out of bounds because numel(SuffixNbr)=1.

-(Mike 11/7) (Requested by Anne 11-05-05) - The Histogram tool isn't exporting the data to excel properly (at least when combining several histograms into one histogram) - it has the bin column headings accurate, but the number of cells per bin has blank columns in between each value.

-(Mike 11/7) (Requested by Anne 11-05-05) - There is something very strange with CPthreshold when running in adaptive mode. the threshold fails in IdSecondary - i fixed that problem (see ANNE REPLACED THIS LINE 11-06-05 in IdSecondary to make sure it looks ok to do what I did), but the results just look bad when using MoG adaptive.  Also, it seems very confusing to have CPthreshold, CPgraythresh and CPdoublegraythresh. What's going on? Does it make sense? We put in some effort to figure out whether log transforming was helpful and incorporated it into CPgraythresh, but then CPthreshold doesn't have log transforming? Maybe Ola did this and he knew what he was doing.

-(Mike 11/7) (Requested by Anne 11-05-05) - Have Id Secondary display what threshold was used, and percent of image consists of objects (like IdPrim does).

-(Mike 11/7) (Requested by Anne 11-05-05) - Is it possible to have the figure windows, during the first cycle, open when you get to the module?  This would make things run better on the mac, where opening the windows takes a while now that matlab SP3 is using java instead of X11 (so if you have an error in the first module, you have to wait for all 20 windows to open first). It would also fix the problem of images being displayed in the wrong windows if you close windows while the windows are still in the process of opening up.  Or maybe actually this problem would get worse - I guess you could have multiple modules assigned to the same figure window if you closed some windows during the first cycle. Hmm.

-(Mike 11/7) (Requested by Anne 11-05-05) - We are getting errors again in MeasureTexture:
Warning: Divide by zero.
> In MeasureObjectTexture>CalculateHaralick at 546
  In MeasureObjectTexture at 355
  In CellProfiler>AnalyzeImagesButton_Callback at 3199
  In CellProfiler>gui_mainfcn at 4989
  In CellProfiler at 51

-(Mike 11/7) (Requested by Anne 11-05-05) - The error message needs to be made modal (not open a new one for each cycle) and to have the proper CP color:  It occurred as a result of one of the identify modules - not sure which - and said this: The object outlines or colored objects were not calculate by an identify module (possibly because the window is closed) so these images were not saved to the handles structure. It's strange, because I don't think the message was necessary - i think the outlines were calculated and then saved properly, so we should also check whether this message even ought to be shown.

-(Mike 11/7) (Requested by Anne 11-05-05) - The text "Loading Pipeline" that displays while pipelines are loading in the little status bar dialog box is not the user's font size.

-(Mike 11/7 No, only certain types) (Requested by Anne 11-05-05) - There are some eval commands still in the code. (saw in Crop). Don't we have to remove these for compiled functions to work?

-(Mike 11/7) Identify Secondary Test Mode?

-(Mike 11/4) Identify Secondary is not saving outlines properly. See IdentifyPrimAuto or IdentifyTertiary for an example that is working well. Check the other Identify modules to be sure they are doing the right things with outlines.

-(Mike 11/4) Requested by Anne - IdentifyNeighbors produces a field in the handles.Meas structure called IdentityofNeighbors which does not match all the other measurements, because it is listing the identity of however many neighbors each objects has. So, in order for this to not make the exporting fail, we should move this data to its own structure. I guess handles.Measurements.Neighbors because it won't fit any other place.

-(Mike 11/4) Requested by Anne - MeasureImageAreaOccupied produces a field in the handles.Meas structure called ImageAreaOccupiedCellStain. I think we can take 'Image' off the front of the name, and it seems like perhaps there should be an underscore before CellStain, which is the part the user typed in?  Not really sure about that, but it seems like that would make it more like the Intensity_OrigBlue fields.

-(Mike 11/4) Requested by Anne - For the error msg "There was a problem running the analysis module number XX [then the Matlab error output]" Is it easy to add the module name so you know which module it is?

-(Mike 11/4 yes) Requested by Anne - can you check that cancel after module works on your computer still? it isn't working on mine.

-(Mike 11/4) Requested by Anne -In the FilenamesListBox_Callback, it's possible that a mat file would contain just an image (not an OUT or PIPE file), so we should try to handle that as well.  If it's an image, the file contains a workspace with just one variable "Image".

-(Mike 11/4 MUST BE COORDINATES OR MOUSE, GUESSING THIS IS OLD OPTION) Requested by Anne - in crop, the 4th variable says you can do number of pixels from edge, but there's no way to enter the info - should this be a custom popup menu so you can type in the number of pixels?

-(Mike 11/3) Requested by Anne - when you try starting CP and it's already running, is there a simple way to bring the main CP window to the front of all the other windows?

-(Mike 11/3) (Requested by Anne 10-11-2005) - Can you figure out what TempMovieGenerate.m in the DeveloperScripts folder is trying to do? I think it was making a movie from histograms that were plotted over time. We'd like to have this type of functionality built into a module. Once you get oriented in that m-file let me know and we can figure out how we should implement this sort of thing into a regular module.

-(Mike 11/3 TRIED IMFILTER,CONV2 AND CHANGING ORDFILT2 TO USE UINT8, UINT16, AND SINGLE ALL TO NO AVAIL) (Requested by Anne 8-30-05) - It seems to take forever to smooth images when using a large artifact width in CPsmooth.  Can we make it faster?  Perhaps if the artifact width is large relative to the image size, we could resize the image first or something like that.
imfilter? ordfilt2? conv2? which is faster? are there others?  See IdentifyPrimAutomatic for blurring ideas, and also for an example of resizing.

-(Mike 11/1) Histogram: Choose line or bar graphs

-(Mike 11/1) What do you want as output for Calculate Statistics?

-(Mike 11/1) The help window for General help, image tools, data tools, is not using the user's preference for font size.

-(Mike 11/1) Make overlay on Histogram Data Tool for control

-(Mike 11/1 CODE IS COMPILED) (Requested by Anne 8-29-05) - Not sure if this is feasible (especially across platforms), but it would be nice to have CellProfiler start by the user doubleclicking an icon rather than starting up Matlab and typing CellProfiler.

-(Mike 11/1) (Requested by Anne 10-25-2005) - Add this to the short descriptions for SaveImages: Can be used as a file format converter to save images in a different format than the original.

-(Mike 10/31) (Requested by Anne) - Try to compile the Matlab code so CellProfiler can be run on computers that don't have Matlab.

-(Mike 10/31) (Requested by Anne 10-10-05) (waiting for Ola) - Make MeasureImageTexture based on measureobjecttexture

-(Mike 10/31) (going to set up SVN) (Requested by Anne 10-20-05) - Do we want to set up a Wiki for cellprofiler.org? It would be great if certain people had access to change the site (e.g. only us!) and the rest of the world saw a non-editable version, but I don't know if that's possible - in other words, giving some people write permission and everyone else read permission, but also making all the editing related stuff not appear on the page. It would be annoying for everyone else to have all the extra clutter on pages. Most likely this won't work but I thought we should look into it.

-(Mike 10/31)(Requested by Anne) Histogram DataTool is kind of hacked together at the moment. Streamline it and update its help; possible other improvements: allow fewer labels, plus fewer decimals (right now, it's either-or). If you choose option P (percentage) rather than N (number), the y axis is still labeled 'Number of objects' rather than 'percentage of objects'.

-(Mike 10/31) (Requested by Anne 10-26-05) - As of SP3, I am pretty sure the propedit command works on the mac. There are several places in the code where propedit is used (e.g. ShowDataOnImage). We need to put in some 'if' statements - if you are on a mac and SP2 or earlier, then don't try running the propedit command (it makes matlab crash, or at least freak out a bit). otherwise, go ahead and run propedit as normal.

-(Mike 10/31) (USES CPGETFEATURE, SHOULD THINK ABOUT IF ITS WORTH CHANGING) (Requested by Anne 10-26-05) - Show data on image - it has you choose an object type, but the first thing in the list is 'Image'. We should filter out the field 'Image' and not even allow the user to choose it, because it doesn't work with this tool.

-(Mike 10/28)(IT IS ALSO AN OPTION IN SET PREFERENCES :) (Requested by Anne 10-26-05) -  It seems recently things changed so that the output file is not saved after every cycle of processing - it looks like it's saved only after the last one.  This might be related to Colin's changes in the Set Preferences feature that strips out the Pipeline prior to saving - he got the code for this from SppedUpCellProfiler, which also has code for not saving the output file every time through. I wonder if he changed CP to not save every time (this is a feature which should remain optional via the SpeedUpCellProfiler module).

-(Mike 10/28) (Requested by Anne 10-26-05) - Why does MeasureObjectTexture have two identical variable descriptions?

-(Mike 10/28) (Requested by Anne 10-26-05) - The IdentifyTertiary module seems to pop itself a window open even if I closed it during a previous cycle.

-(Mike 10/28) (Requested by Anne 10-26-05) - I think the SaveImages window stays open (not sure). It should close itself during the first cycle.

-(Mike 10/27) (Requested by Anne 10-18-2005) - Make the delete/backspace keys clear an algorithm in the pipeline.

-(Mike 10/27) (Requested by Anne 10-26-2005) - Is there any way we can address Sophie's request to allow CP to skip image sets if there's an error?  This would be a nice feature. It should stop processing during the first image set if there are errors (so if there is a fundamental error like image not found, it doesn't just start cycling through and skipping *every* image cycle), but for subsequent image sets it should just skip the rest of the pipeline and maybe deposit a flag = 1 in handles.Measurement.Image.ErrorFlag , and handles.Measurements.Image.ErrorFlagFeatures = {'ImageSkipped'}
It's worth thinking about this a bit, just to see whether it's feasible.
(Mike) IdentifyObjectsInGrid can now skip grids which are broken and will add a flag, although we should talk about where that flag is current stored in handles
-ADD ERROR CATCHING TO IDENTIFYOBJECTSINGRID
-ADD PREFERENCE FOR SKIPPING MODULES WHICH FAIL
-SET PREFERENCES MOVING TEXT TO BUTTON

-(Mike 10/27 IMPROVED OUR TEXT DISPLAY BOX)(Not sure this can be fixed, we can talk about it more) (Requested by Anne 10-18-2005) - Help for individual modules (within Add Module), the text is cut off sometimes , see SaveImages module for example. doublecheck that you can print from the help windows.
-CHECK FOR EASY FIX IF NOT SCRAP

-(Mike 10/26) (Has "fix" for *.*, maybe it isn't really fixed that way?) (Requested by Anne 10-26-2005) - Show data on image datatool has a couple of bugs: has *.* problem for uigetfile, and no cellprofiler image tools in the resulting figure.

-(Mike 10/26) (Requested by Anne 10-26-2005) - We would like the classify objects module to be a little more sophisticated. Right now the bins must be evenly spaced, but we would like to allow the user to set up something like:
Let's say they want three bins: 0 to 300, 300 to 1000, and 1000 to 1500. Right now they can't do it because it only lets them choose 3 bins with min 0 and max 1500 and it will force the bins to be 0 to 500, 500 to 1000, and 1000 to 1500. So they should be allowed to enter the minimum acceptable is 0, the maximum is 1500. Then they should be allowed to type 
 type in something like [300 1000] to define the 'edges' of the intermediate bins (an infinite number). Maybe it would be easiest to just let them type into a separate variable box at the bottom 'If you want to define all the edges of your bins manually, type them here:' which would just let the user type [0 300 1000 1500] and then the module would ignore the min,max and number of bins.  That way a user could choose to type 
[0 3 7 99 1500 321403 3434934] and not have to worry about setting the min max and number of bins.

-(Mike 10/26) (Requested by Anne 10-26-2005) - MeasureObjectTexture doesn't look exactly like MeasureObjectIntensity in terms of how many variables can be entered.  They should look the same.

-(Mike 10/26) Check for TODO's and FIX ME's throughout the code

-(Mike 10/25) (Requested by Anne 10-25-2005) - The SubtractBackground module is a bit out of date - I think it looks in the wrong place for the list of file names (FileList is the old way we stored this info). Also, the Background threshold used (MinimumTenthMinimumPixelValue) should be stored in handles.Measurements.Image, in a similar manner to how we normally store thresholds.

-(Mike 10/25) (Requested by Anne 10-25-2005) (I REMOVED BLUR AND CONTRAST STRETCH, BUT THINK MAYBE MULTIPLICATION SHOULD STAY?) - The Subtract module is pretty bizarre. We should remove the multiply and contrast stretch and blur options and make this a simple subtraction module.  Change the RescaleIntensity module to have another option 'F' which allows multiplying an image by a factor.

-(Can't be done across platforms :-( ) (Requested by Anne) - Try to make the CellProfiler logo replace the X11/Matlab logo in the top of the main GUI.

-(Mike 10/25) (Requested by Anne 10-25-2005) - When the AddModule window is open, it would be nice for the selection highlighting to be on the first category (File processing) and the first module (CreateBatchScripts). It's a little confusing when it appears that no category is selected.

-(Mike 10/24) (Requested by Anne) - Adjust the boilerplate of authors in each m file:
 Authors (in order of joining the project):
   Anne E. Carpenter
   Thouis Ray Jones
   In Han Kang
   Ola Friman
   Steve Lowe
   Joo Han Chang
   Colin Clarke
   Mike Lamprecht
   Susan Ma
   Wyman Li

-(Mike 10/24 ONLY ONE CROP MODULE IS NEEDED AFTER IDENTIFYING PLATE, IT NOW USES RECTANGLE COORDINATES IN FIRST CROP MODULE TO CROP OFF EDGES OF PLATE) What do you think of a CropPlate module instead of users having to use IdentPrimAuto->Crop->Crop
[[I think we need to retain the flexibility of having the user identify things any way they want. Combining modules only makes sense if the modules are never needed separately and are only run together. Or, if there is one particular application where very few of the variables need to be adjusted and they can essentially be hard coded, then it might make sense to combine the modules. If we were to do this, we would want to call the individual modules as subfunctions (rather than just copying and pasting the raw code) so the code is easier to maintain. I think this is not worth it because there's so much else to do. We should just provide a pipeline for plate cropping as an example on the website, along with all our other examples.]]

-(Mike 10/24) (Requested by Anne 10-21-2005) - I think you are already working on this, but just in case: when you doubleclick a PIPE or OUT in the lower left file list, it asks you to again choose the file and opens a uigetfile window. We need to rewrite the subfunction to bypass this step if you are running the function from the lower left file list rather than from File > Load pipeline.

-(Mike 10/24) (Requested by Susan 10-21-2005) -please adjust the MeasureObjectAreaShape Display(figure) page, the number of Nuclei(first object) column was not fully displayed.

-(Mike 10/24)(Requested by Anne 10-24-05) - Prevent CellProfiler from starting twice, if it's already open.

-Mike (10/24)(Requested by Anne 9-01-05) - We used to have code that allowed variable edit boxes to expand when the text within them was too long to fit. It mostly became unnecessary when Colin invented the new pathname entry boxes/browse buttons (because this usually only happens when we are dealing with typing pathnames into edit boxes), but I would still like edit boxes to expand if text becomes too long to fit, so we should find that code and re-implement it.

-(Anne 10/24) (Requested by Anne 10-21-2005)(All instances on PC are File > Exit!! :) - Change File > Exit to File > Quit to be consistent with other applications.
[[OK, WE DECIDED NOT TO DO THIS AFTER ALL, TO BE CONSISTENT WITH THE PC PLATFORM]].

-(Colin 10.21) - (Requested by Anne 8-29-05) - Add a check box to the main GUI (in the space near pixel size) for 'Diagnostic mode'. This would basically be like running the SpeedUpCellProfiler module option that strips out the handles.Pipeline just before saving the output file which dramatically reduces the output file size. I think people rarely want the contents of the Pipeline unless they are actually intensively writing a new module, so mostly it just adds a ton of extra data to the file.  The default should be to *not* run in diagnostic mode, and there should be a '?' button nearby telling the user what this does (the SpeedUpCellProfiler module might have a description you could copy & paste).

-(Mike 10/21)(E-mailed Ray if 1.0 is correct, it was already default at this) (Requested by Anne 10-20-2005) - In the IdentifySecondary module, it says to give a regularization factor for Propagate and for Distance-B. I am pretty sure that the regularization factor is really only needed for the propagate option and that you require it for the Distance-B option just so that the subfunction doesn't fail, right?  we should adjust the variable description to make the regularization factor not required for Distance-B option. Perhaps this would require rewriting the subfunction to not choke if it doesn't receive a regularization factor, or if option = = Distance-B, then reg factor = some arbitrary number, like .05, even though that number won't actually be used.

-(Mike 10/21) (Requested by Susan 10-21-2005) -got error when I tried to use ImageTool-showPixelIntensityHistogram 
??? Error using ==> waitforbuttonpress
waitforbuttonpress exit because all figures have been deleted.

Error in ==> ShowPixelIntensityHistogram at 25
waitforbuttonpress

??? Error while evaluating uimenu Callback.

-(Mike 10/21) (Requested by Anne 10-21-2005) - File > New pipeline should ask for confirmation: 'Are you sure you want to clear the current pipeline?'

-(Mike 10/20) (Requested by Anne 10-18-2005) - get rid of variables inthe workspace for the add module window.

-(Mike 10/20) (Requested by Anne 10-18-2005) - fix the questdlg background color thing.

-(Mike 10/20) (Requested by Anne 10-18-2005) - Report Mac SP# bug to matlab: questdlg('qstring','title') does not pay attention to tabbing to highlight the button you want to press.

-(Mike 10/20) (Requested by Anne 10-18-2005) - Make sure CP doesn't start if it's already open. 'Modal' is good but not sufficient. whatever code starts up when you start CP should be ignored if CP is open.

MINOR ISSUE (should wait for someone to fix it who has SP3 7.1 on a mac)>>>
-(TRYING TO FIND FIX FOR SLIDER, BUT NOT SURE IT EXISTS) (Requested by Anne 10-12-2005) - Fix the background color for the variable popupmenus - on the mac with new SP3 7.1 they are white instead of .7 .7 .9  Also, the background color of the highlighted 'Yes' button when clicking Close Windows is black so it looks a little funny. Also, the sliders (when there are not enough contents of listboxes for them to be active) have a stark white background.

-(Mike 10/18) Add text (e.g. After selecting module:) to AddModuleWindow for help buttons; IMPLEMENT NEW LOOK: Two listboxes, one with heading names and other with modules for that heading. Will change when new heading is highlighted?

-(Mike 10/18) (Requested by Anne 10-10-05) - Probably most modules should have a warning at the beginning if the image is outside the range 0-1.  Will have to think carefully about which modules would need this warning in order for them to function properly.  Make sure the warn  dialog does not pop up fresh each time - i think there is a way for matlab to only open the dialog if there isn't already a copy open.

-(Mike 10/18) (Requested by Anne 10-12-05) - In the listbox at the lower left, currently clicking on files there does nothing. It would be cool if the user doubleclicks on something in the listbox the following would happen: if if it's a PIPE or OUT file, check that it has the appropriate fields (Settings or handles.Settings) and ask the user if they want to load the pipeline from the file. If not, try to open it as an image, using the ImageTool for opening images.

-(Colin 10/17)- (Requested by Anne 8-24-05) I HAVE STARTED ADDRESSING THE ABOVE CONCERNS IN THIS MANNER - I have written QuickFixConvertObjectsToImage module. We should develop this further so that it can be used to convert objects into images that are savable by SaveImages. It should also be able to convert objects to images in order to pass them down the pipeline (because if you wanted to process a label matrix image downstream, you can't select its object name in downstream modules because only imagegroup members are selectable in downstream modules). The ability to use this module with the SaveImages module will replace the last few variables and related code from each individual Identify module which will be more streamlined. This module should include options (1) convert entire objects or just outlines, (2) binary, grayscale in range 0 to 1 (be sure to think about what happens if there's more than 256 objects), or RGB. For RGB, allow the user to choose which colormap (e.g. jet, bone, autumn, etc).  We might even include an option to allow overlaying outlines on some image, because that's really handy.

-(Colin 10/17)- (Requested by Anne) - In a similar manner, many identify modules produce a label matrix image and there is an option to save this image in colored label matrix format. I'd like to take this feature out of each individual identify module (it adds another image to the handles structure which takes up space) and instead have the SaveImages module have an option to convert a label matrix to color. Perhaps we can then also have an option in SaveImages to choose the colormap to be used for this conversion. It's useful to take it out of each individual identify module because it's not very common that someone actually wants to save or use the colored label matrix downstream. It's usually just for display purposes during processing. This also is one less thing to make sure is present in every Identify module.

-(Colin 10/17) - Remade the SaveImage Module.

-(Colin 10/17) - (Requested by Anne) - Many of the identify modules produce object outlines on top of the original image. I would like to change all of these so that the outlines only (without the underlying grayscale image) are saved in the handles structure (maybe as logical/binary images?) and then you can overlay them on an image using a separate module. This allows more flexibility. (for example, identify well spots doesn't know what the 'original image' is so it can't display outlines on an original image). It also reduces the size of the image stored in the handles structure, since it would be a logical format rather than full 8 bit, but that's a minor advantage. To accomplish this, we should make a module 'AddImages' that can add two images' pixel values in the normal manner but also has an option to make one of the images' nonzero values be either (a) the maximum allowed value for a particular image format (e.g. 255 for 8 bit images) or (b) the maximum of the grayscale image (e.g. if an image has values from 0 to 0.17, the binary outlines would be assigned the value 0.17). We have already made this change for IdentifyEasy but we need to do a similar thing for the other IdentifyPrim and Sec and Tertiary modules (there is currently a push in progress to merge all identifyprim modules into IdentifyEasy and all IdentifySec modules into one, so perhaps check that first).
This also affects the "SAVING IMAGES" portion of the help for each module, so update the other modules' help using IdentifyEasy's as a template.

-(Mike 10/17) Make IdentifySecondary use same thresholding options as IdentifyPrimAutomatic, CPthreshold?

-(Mike 10/17) (Requested by Anne) - Analyze Scott Floyd's images by writing a new speckle finding module.
- (Requested by Anne) - Make a module to identify and count and measure objects within previously identified objects (e.g. nucleoli or organelles or speckles within nuclei or cells). This also requires designing a way to store measurements of Subobjects. Here's Ola's suggestions:

	From: 	  friman@bwh.harvard.edu
	Subject: 	Storing subobjects
	Date: 	August 13, 2005 3:03:31 PM EDT
	To: 	  carpenter@wi.mit.edu

One simple way to store subobjects that fits into the current way
of saving measurements is simply to have a "feature/measurement" that
indicates the number of the parent object.
For example, to have a structure handles.Measurements.Nucleoli that in addition
to the usual measurements contains a handles.Meaurements.Nucleoli.Parent field
where the number of the corresponding parent object is stored, and a handles.Measurements.Nucleoli.ParentFeatures
which indicate the name of the parent (e.g. 'Cells' or 'Nuclei'). It is not straightforward to have a
similar entry for the parent objects since the parent objects (e.g. Cells) can have
a different number of children (while each child only has one parent object). Storing the numbers of the
children of a parent is not straightforward in the current measurement system, because the parent
objects can have a different number of children. This would require storing a cell array with
the numbers of the children for each parent object, and that would
cause problems for all data tools that don't know how to handle this cell array when
they encounter it. However, I guess there can be a handles.Measurements.Cells.Children field which contains
the names of the children objects (e.g. 'Nucleoli', 'Organelles', 'Speckles'....) but not corresponding numbers.
If one wants to find the children of a  certain Cell object with number K, one must then look in
handles.Measurements.Cells.Children to find the  name of the children (e.g. 'Nucleoli', 'Organelles', 'Speckles'....)
and then search e.g. handles.Meaurements.Nucleoli.Parent for the Nucleoli objects that have object K as parent.
It think it would be quite simple to introduce the above system in the IdentifyPrimary/IdentifySecondary/IndentifyTertiary
way of identifying objects.

Best,
Ola

-(Mike 10/17) (Requested by Anne) - Analyze Merck images - set up general morphology pipeline, possibly with illum correction, and we will send them the numerical measurements from all three images. The major goal is to figure out crucial morphological differences between the two images that aren't bright green.

-(Mike 10/17) (Requested by Anne 10-12-2005) - The main GUI mostly looks fine on SP3  7.1, except the text Output filename is shifted over about two characters too far to the right. It'd also look a bit better if we could move Pixel size and Adjust modules just one pixel to the left.

-(Mike 10/13) Requested by Anne 10-12-2005 - Make a new module called "Flip" which uses the Matlab functions flipud and fliplr to flip an image. Simple inputs: Input image name, output image name, and choose between flip left/right and flip top/bottom (popup menu).  We considered adding this to the Rotate module, but rotate has a bunch of other options relating to the angle of rotation, so it seemed better to have a separate module. Still open for debate though.

-(Mike 10/13) (Requested by Anne) - prepare outlined example images for John Elliott at NIST and prepare email to be sent. We don't need to send CP code right now. In the email, ask him why one folder had only red - we could probly still analyze them but weren't sure if that was the point.

-(Mike 10/13) Requested by Anne 10-12-2005 - Help > ImageTools and Help > DataTools doesn't seem to work - doubleclicking something in the list box or clicking OK doesn't seem to do anything, but there isn't any error msg produced either.  I think maybe it works the first time you click something but not subsequent clicks?

-(Mike 10/13) Requested by Anne 10-12-2005 - Help > General Help is displaying the correct listbox full of help files but the title of the window and the instructions at the top are referring to Tools rather than just general help.

-(Mike 10/13) (Requested by Anne 10-12-2005) - New Service Pack 3 (version 7.1) requests: We commented out the bug workaround which reverses the slider for macs, but we need to put it back in if the user is using a mac && the user is using version 7.0 or earlier. Also, somewhere in the code when you click on a module in the pipeline, the slider is reset so it's supposed to display the top variables (the slider indicator is in the top position), but on my new SP3 7.1 setup, the slider is always placed in the bottom position - is this working ok on the PC, or is it another workaround that needs to be un-worked around for 7.1 and later?

-(Mike 10/12) Change installation guide to use "run /Applications/CellProfiler.m"

-(Mike 10/12) (Requested by Anne 10-11-2005) - Convert SplitUpAviMovie and SpliceAVIMovie (in DeveloperScripts) into a combined, regular CP module called SplitOrSpliceMovie.

-(Mike 10/12) (Requested by Anne 10-10-05) - Make CalculateStatistics module based on Ilya ravkins m files i emailed. Let me know when it's done and we can calculate the stats on the SBS competition and see how we did!!

-(Mike 10/12) (Requested by Anne 10-12-2005) - Mike, see whether doublegraythresh is used in the code anywhere, and if not, move it to Outdated as per my discussion with Ray:
I think this was Colin's, when he was looking at using Otsu's method
to segment three-level images.  I'm not sure if it got incorporated at
some point, or it was abandoned.
Ray

On 10/11/05, Anne Carpenter <carpenter@wi.mit.edu> wrote:
Hi,
There is a file in DeveloperScripts called doublegraythresh.m  Can you
determine whether this is useful to us at all? My guess is that someone
was playing around with it and abandoned it, so I was planning to move
it to Outdated unless you object.

-(Mike 10/12) (Requested by Anne 10-12-2005) - The following disclaimer needs to be added to the LICENSE file. We may also need to change our statement about GPL to read something like "Use of this software is governed by GPL plus the disclaimer present in the LICENSE.txt file".

-(Mike 10/12) (Requested by Anne 10-11-2005) - Retrieve the help from LoadImagesOrder and LoadMovies (Order & Text) and incorporate into LoadImages... we should make sure that we've not lost help from modules that were recently combined b/c a lot of work went into writing it up in the first place!

-(Mike 10/12) (MADE INITIAL CHANGES, WHAT TO DO FROM HERE) (Requested by Anne 9-01-05) - The AddModule window still needs a bit of work; it doesn't look very compact and neat. The browse button should be small and placed near the current path.  The other buttons could be smaller and more compact (e.g. move both help buttons up and have the word 'Help' placed between them). I'd vote for getting rid of the frames so that there is less clutter, and having just one frame around the buttons along the bottom, once we've removed the unnecessary buttons. I think we should get rid of the 'Add module' button and instead just have text say "Doubleclick to add modules to your pipeline" (maybe the title of the window itself should state that text; otherwise it could just be text along the top of the window). We could get rid of the Done button and assume the user will use the normal mechanism to close the window.
NEW IDEAS>>>  if no module selected and you clikc module help, it shoudl say 'click and then push this button'
'adding modules' help should be called '? Getting Started'
Did we lose the ? button above object processing?
Too much empty space at the top
change add module to Add Selected Module
Select a module, then...  [Add to pipeline] [get help on that one]
Done should be in bottom right or get rid of it altogether
Get rid of large frame? leave bottom one?
switch buttons with pathname

-(Mike 10/12) (Requested by Anne 10-11-2005)  - Remove makezips.sh from DeveloperScripts. Its functionality is now built into CP, as File > Save current CP code.

-(Mike 10/12) (Requested by Anne 10-11-2005) - Move CreateIlluminationCorrectionImageFromProjection.m to Outdated

-(Mike 10/12) (Requested by Anne 10-10-05) - Change the name of RGBMerge to GraytoRGB, and adjust the ExampleFlyPIPE & OUT accordingly.  Maybe also: should we change "RGB" to "Color", so it's GrayToColor and ColorToGray? I think this might make it nicer for biologists. Not sure if the general public knows what RGB means.

-(Mike 10/12 DECIDED THAT CELLPROFILER SHOULD ONLY ADD FOLDERS TO PATH IF THEY DO NOT EXIST) (Requested by Anne 10-10-05) - We should somehow let the user change the path specifying which CellProfiler code will be used since we often have several copies of CP on a single computer. Option 1: allow the user to choose which CellProfiler will be used somewhere in CellProfiler itself (e.g. in the Set/LoadPreferences window). But would this allow the changes to take place immediately, or would it be a problem that CellProfiler is already running when the path is set? I would guess that changing the path would allow the Modules or subfunctions in the new location to be used, but I am not sure whether the CellProfiler.m file in the new location would be used when CP is already open and running. Option 2: we could remember to start up CellProfiler in Matlab using the full path (i.e. type this:  /Users/anne/trunk/CellProfiler/CellProfiler  rather than just typing CellProfiler to start it up). I think the code we have currently in place would work - e.g. adding the Modules subfolder to the path I think is done when you click the Add Modules button but I am not sure it pays attention to which CellProfiler is being run in order to use the same path.

In this process, we should check every use of the command 'path' to make sure that we aren't adding other things to the path so that it behaves as expected.

-(Mike 10/11) (Requested by Anne 10-10-05) - For pathnames that are entered as variables, I think most do not allow you to specify relative pathnames, for example:   ./Subfolder1  (meaning the default image folder + /Subfolder1).  We would like to make this possible.

-(Mike 10/11) (Requested by Anne 10-10-05) - IdentifyPrimManually - the colormap is not applied to the image when you are asked to click on points.  Also colormap doesn't seem applied in DisplayGridInfo module. DisplayGridInfo seems a little unpolished - e.g. it says 'Figure1' at the top rather than saying which module it is, and it doesn't say what image # it is. We'd like to be able to change the text properties and gridlines in a manner similar to DefineGrid's display, so that code should be copied over to DsiplayGridInfo.

-(Mike 10/11) (Requested by Anne 10-10-05) - send beta terms, current CP code, ExampleFlyPIPE, and link to images to juergen@hedges-klenk.com This should be very similar to what you sent to Max Sonnleitner recently, except it should include fresh code & PIPE. Hello, Anne asked me to send you the beta version of CellProfiler to play with....

-(Mike 10/11) (Requested by Anne 10-10-05) - In the LoadImages module, if the incoming image is 16 bit AND if the maximum value in the image is below 1/16th of the usable range (0.0625 in the 0-1 scale), have a warndlg pop up to warn the user that their incoming image might be a 16 bit image format using an image collected with a 12 bit camera, so they might want to use the rescale intensity module (and then explain how to do that).  Make sure the warn dialog doesn't pop up fresh each time around the pipeline (only if setbeinganalyzed == 1). 

-(Mike 10/11) (SINCE THIS RUNS OF SAVEIMAGES MODULE, CAN NOW ADD FEATURE TO USE OPTIONS WHICH ARE SPECIFIC TO THE IMAGE TYPE, WILL THIS FIX PROBLEMS?) (Requested by Anne) - Save Image As tool: does not work well for all kinds of displayed images (e.g. The mean image produced by correct illum divide all mean comes out weird). Test it with a bunch of image outputs and make it more compatible.
>>Make the variable descriptions in the Save Image As window match the fuller, better descriptions in the SaveImages module.

>>>'color',8,'string,'twttt'
>>> in the help, point then to the imwrite help.

-(Mike 10/11) (COULDNT REPRODUCE, BUT WE CAN JUST REMOVE RGB BUTTONS FROM TEXT ONLY DISPLAY) (Requested by Anne) - The RGB buttons on CPfigures produce an error at the command line when the figure is only displaying text. It should either produce a warning dialog stating what the RGB buttons are for and that there is no image in the window, or it should just do nothing.
??? Error using ==> set
Index exceeds matrix dimensions.
??? Error using ==> set
Error while evaluating uicontrol Callback.

-(Mike 10/11) (WHICH ERROR DIALOGS, DONT THINK ERROR AND ERRORDLG CAN BE CHANGED) (Requested by Anne) - The error dialogs are not proper CP color. Also, in several places, we use the helpdlg Matlab function and so the color of the resulting help dialog window is not the proper CP color.

-(Mike 10/11) (Requested by Anne 10-10-05) - Move CPsplash.jpg to CPsubfunctions. Take capitals out of other subfunctions' names.

-(Mike 10/11 *.* IS MATLAB BUG) (IMAGE LOOKUP NOW WORKS, PLEASE SHOW ME *.* PROBLEM) (Requested by Anne 8-24-05) - The ShowDataOnImage ImageTool is very buggy lately. In particular, it can't seem to look up the image filenames, and when it lets you choose an image file, on the mac it has the annoying {*.*} problem so that you can't choose an image file until you change the dropdown menu for file format in the uigetfile window.

-(Mike 10/07) (Requested by Anne) - Add a happy dialog box that shows while CellProfiler is loading.  Include the CellProfiler logo, 'CellProfiler is starting up...' text, the authors & contributors, etc.

-(Mike 10/07) Add 'New Pipeline' button

-(Mike 10/06) (Requested by Anne) - Make ImageTiler produce a button in the final figure that allows retrieval of a high resolution image. (Click the button, then click the part of the image you want to see in more detail). There should also be a button that allows you to select the folder where the images are stored so that the high-res button knows where to go to look for the images, in case they are not in the same place they were when the figure was originally made.  Adjust the help if ImageTiler to reflect this change when it's made.

-(Mike 10/06) (Requested by Anne 9-21-05) - THere is a cool tool for interactively selecting a threshold. Perhaps we can add a 'test mode' button for the Identify modules that allows you to choose a threshold the first image cycle. It would use this code:
http://www.mathworks.com/matlabcentral/fileexchange/loadFile.do?objectId=6770

-(Mike 10/05) (Requested by Anne) - The CreateWebPage module needs help documentation and to be put in the category 'Other', and the license info, etc.  If there is nothing of interest to display in the figure for this module, it ought to close during the first cycle. The popup window is the wrong color at the end after the html file is saved.  The 'Download zipped file' html code should be at the top of the page rather than the bottom.

-(Mike 10/05) (Requested by Anne) - There is a bit of functionality in IdentifyPrimThreshold which is lost in IdentifyPrimAutomatic: the ability to calculate a threshold based on all images of a given type and then apply that global threshold to each image.  This ought to be added to IdentifyPrimAutomatic.

-(Mike 10/05) (Requested by Anne 9-21-05) - If a matlab file is corrupt, there is a command line error that is not caught by CellProfiler:
??? Error using ==> load
Unable to read MAT-file /Users/anne_carpenter/Desktop/illum10PIPE.mat
File may be corrupt.
Error in ==> CellProfiler>LoadPipeline_Callback at 427
LoadedSettings = load(fullfile(SettingsPathname,SettingsFileName));
Error in ==> CellProfiler>gui_mainfcn at 4849
        feval(varargin{:});
Error in ==> CellProfiler at 42
    gui_mainfcn(gui_State, varargin{:});
??? Error while evaluating uimenu Callback.

-(Mike 10/05) (Requested by Anne) - Whenever anything is saved to the hard drive, add an error check to see whether the user has permission to write to that location (esp. CellProfiler.m and AlgSaveImages.m). From within the target directory, run: [ignore,Attributes] = fileattrib, if Attributes.UserWrite == 0, then error(INSERT PROPER ERROR STUFF HERE), end 

-(Mike 10/04) (Requested by Anne 9-08-05) - Make measure windows expand to fit the number of lines of data (and the number of columsn) that are produced. Maybe try using CPtextdisplaybox.m, which displays text using a slider so it's infinitely expandable.

-(Mike 10/04) (Requested by Anne) - Put in some way to save a figure (either a module or ImageTool). (Anne thinks the best approach is to adapt SaveImages module and SaveImageAs image tool to be able to save .fig format).

-(Mike 10/04) (Requested by Anne) - SaveImages module - have a way that you can type in special formatting. E.g. if you are going to save in gif mode, you should be able to type in the optional parameters like 'BackgroundColor',0 into a text box and have that text appended within the imwrite command.

-(Mike 10/04) (Requested by Susan) - on WriteSQL module: if I only include WriteSQL module in pipeline I don't get an error message. The same thing with the situation if I only include WriteSQL and CreateBatchScripts modules in the pipeline. It will be nice to let user know that these are no useful pinelines.

-(Mike 10/04) (Requested by Anne 9-07-05) - In the modules where we use pathnameVAR to create a long box with a browse button, the variable descriptions all need to be changed to state that you can type a period (.) to use the default image directory (or output directory, depending on the context).

-(Mike 10/03) (Requested by Anne) - The help box that opens when you click for information about a specific module has a scrollbar when the text is very long. The window is re-sizable, but resizing doesn't allow the text to wrap around nor does it allow any more text to be viewed. We should either allow things to wrap in a more sophisticated way, or we should make the window non-resizable.

-(Mike 10/03) (Requested by Anne) - In File > Open Image, underscores in the file name are not displayed as underscores - instead they make the character after the underscore appear as a subscript. We have fixed this elsewhere (I think in the histogram tool).

-(Mike 10/03) (Requested by Anne 8-30-05) - If the user enters an odd number for CPsmooth (a subfunction used by the Smooth module, among others), right now it yields the error 'The text you entered for the smoothing..." and it cancels all processing. Instead, let's have it continue processing by rounding the user's entry down to the nearest integer but meanwhile pop up a warning dialog box telling the user that their entry has been rounded down.  Make sure the warning dialog box does not pop up new every time around the cycle (maybe only if setbeinganalyzed = 1).

-(Mike 10/03) (Requested by Anne 9-01-05) - The waitbar window produced by the CorrectIllumination_CalculateUsingIntensities module stays  open after closing CellProfiler (it must not have the UserData indicating that it's a CellProfiler-related window). And, it's the wrong color.

-(Mike 10/03) (Requested by Anne 08-30-05) - If the current default image directory no longer exists and then you go do anything like File > Open Image, there is a command line error that the directory cannot be found.  Do we need to change all instances of cd to CPcd that is able to handle this kind of error and warn the user?
??? Error using ==> cd
Cannot CD to /Users/anne_carpenter/Desktop/2005_09_20NovartisYeast (Name is nonexistent or not a directory).
Error in ==> OpenNewImageFile at 45
cd(handles.Current.DefaultImageDirectory);
Error in ==> CellProfiler>OpenImage_Callback at 3586
OpenNewImageFile(handles);
Error in ==> CellProfiler>gui_mainfcn at 4788
        feval(varargin{:});
Error in ==> CellProfiler at 42
    gui_mainfcn(gui_State, varargin{:});
??? Error while evaluating uimenu Callback.

-(Mike 10/03) (Requested by Anne) - In SaveImages, have the file format in which to save images be a popupmenu based on what is compatible with the imwrite command of matlab, plus .mat files. If possible, this list should be automatically obtained (in the same way that typing imread or CPimread lists the file formats), but i don't know if imwrite yields a list like that. Or maybe it's the same list as imread.

-(Mike 10/03) (Requested by Anne) - There is a file in the DeveloperDropBox called MeasureDescriptions. These descriptions should be spliced into the help for the measure modules.

-(Mike 10/03) (Requested by Anne 08-30-05) - There are two ways to generate a text file containing the current pipeline settings and they should be made consistent with each other (e.g. sharing a subfunction so they produce the exact same results). One way is to use DataTools > ExportData and generate the 'Process Info' file, and the other way is to File > SavePipeline, and then save also as a text file. At the moment, the File > SavePipeline, using the text option, is broken, so I don't know what sort of file it is trying to produce. Most likely, it is producing something similar to ExportData so I don't know whether the code from that would be helpful or not. The ExportData method is pretty close to what we want, with these changes:
> move the pixel size and number of image sets to the top of the file (after the processing date & time).
> Is the processing date & time the start time or end time? Label it appropriately.
> I think we store variable descriptions in the handles structure in output files - if so, I'd like to print out the variable descriptions next to each value. In other words, replace the text "Variable 1 Value" with the actual variable description.
> at the moment it produces a bit *too* much information.  we do *not* need to list all the info about each image set, because this information is already exported in the "Image" structure when you export data. 

-(Mike 9/30) (Requested by Anne 09-21-05) - MeasureImageSaturationBlur's figure color scheme is weird.

-(Mike 9/30) When you add a module that's expecting an imge but there are no modules yet that produce an image, the popup menu for imageroup is empty. but it stays empty even if you later add an module that produces an image.

-(Mike 9/30) This dialog pops up even if I have saved my preferences to my own filename:  helpdlg('Your CellProfiler preferences were successfully set.  They are contained in a file called CellProfilerPreferences.mat in the Matlab root directory.')

-(Mike 9/30) (Requested by Anne) - Adapt MeasureAreaOccupied to use the same threshold options as are in IdentifyPrimAutomatic.  Also, its measurements are not saved in the proper structure format. It looks like this when I analyzed three image cycles:
handles.Measurements
ans = 
             ImageAreaOccupiedStainedRegion: {[156845]  [424211]  [336473]}
    ImageAreaOccupiedThresholdStainedRegion: {[0.0174]  [0.0406]  [0.0290]}
But these measurements should actually be in handles.Measurements.Image in two separate fields - one with the measurements and the other with the feature names, and with these two fields listed above being features.  This should make the module compatible with the MeasureRatios module, so we should then adjust the MeasureRatios module so you can choose these measures.

-(Mike 9/30) REQUESTED by anne - OpenNewImageFile does not work for .mat files (where the variable is 'Image', see LoadImages.

-(Mike 9/30) (Requested by Anne 8-24-05) - The SaveImageAs ImageTool gave this error when I tried to use it on a IdentifyPrimAutomatic figure window that was saved as a matlab fig file and then reopened later:
??? Invalid handle object.
Error in ==> SaveImageAs at 29
    MainWinPos = get(handles.figure1,'Position');
??? Error while evaluating uimenu Callback.

-(Mike 9/30) (Requested by Anne 9-22-05) - To be consistent with the other modules, I think we should change the MeasureImageSaturationBlur fieldnames a bit. Right now, it looks like this:
> handles.Measurements.Image
ans = 
           FocusScoreFeatures: {'FocusScore OrigGreen'}
                   FocusScore: {[0.1509]  [0.0999]  [0.1208]}
    PercentSaturationFeatures: {'PercentSaturation OrigGreen'}
            PercentSaturation: {[0]  [0]  [0]}

I think instead it should be SaturationBlur_OrigGreen and SaturationBlur_OrigGreenFeatures, and then the feature names would be BlurScore (not FocusScore) and PercentSaturated (not PercentSaturation). As it currently is, subsequent modules would overwrite the results here, because there is no image-specific thing added to the main field name.  Making these changes should also render this module compatible with the MeasureRatios module, too, so we should then adjust the MeasureRatios module so you can choose these measures.

-(Anne was right) (Requested by Anne) - It would be nice if the Crop module would allow you to freehand draw a rectangle (rather than an ellipse) on each image as it cycles through. ANNE SAYS - I think we can already do this, by clicking points at the corners of the rectangle.

-(Mike 9/29) (Requested by Anne 8-24-05) - The help for the crop module is out of date. The variable descriptions should tell the user that they can enter 'end' (or maybe it should be 'last') instead of a numerical value for the pixel position if they don't want to crop the bottom or right edges.  Also, for the 'Number of pixels from edge' option, the popup window isn't custom so you can't enter a number.

-(Mike 9/29) (Requested by Anne) - It would be nice to allow CellProfiler to be used by different people and each one could have their own user preferences.  Right now preferences can be saved (File > Save preferences), but we should allow the user to choose whether to save these preferences as the default preferences (in CellProfilerPreferences.mat), or alternately, to name the preferences file something unique (e.g. AnneCellProfilerPreferences.mat). Then the user could load their preferences by using: File > Load preferences.

-(Mike 9/29) (Requested by Anne) - When Saving a pipeline, after you confirm the filename change (adding PIPE to the name), it asks if you want to save the pipeline as a text file. If you click yes but then cancel at this stage, you don't get the dialog box confirming that the pipeline file itself was saved. I guess the best thing to do is after confirming the filename of the pipeline itself, the confirmation window should appear that it was saved and a separate confirmation window should appear if you save as a text file.  Also, in all of the dialog boxes relating to this function, we should refer to the 'settings' as 'pipeline' instead, to be consistent.  Also, we should check whether PIPE is already part of the name and if so, do not suggest adding PIPE again!

-(Mike 9/28) (Requested by Anne 8-24-05) - The FilterObjectsAreaShape window should have the bottom left and top right displays switched in their positions (the final filtered image should be in the top right and the outlines on input image should be at the lower right.)(DONE)  Why is there an input image for this module?  Is it only for showing the outlines on the original image? If that is the case, it should be made optional. FilterObjectsAreaShape needs full documentation and to be made to look like all the other modules, and it needs its method for saving outlines and colored images to be consistent with other modules (like IdentifyPrimAutomatic).  I think we also need a FilterObjectsIntensity and FilterObjectsTexture module (the last one is probably not going to be used much, but it's just to be complete).

-(Mike 9/28) (Requested by Anne 09-08-05) - Adapt the code for IdentifyPrimAutomatic according to Ola's advice, in order to tell the user the number of merged objects (once calculated as below, the number should be recorded in the handles.Measurements - probably in the Image substructure, since there will be only one measurement per image - and also shown in the figure display window):
OLD>
%%% Merge small objects
if strcmp(MergeChoice,'Yes')
  Objects = MergeObjects(Objects,OrigImage,[MinDiameter MaxDiameter]);
end

SUGGESTED NEW>
%%% Merge small objects
NumberOfObjectsBeforeMerge = max(Objects(:));
if strcmp(MergeChoice,'Yes')
  Objects = MergeObjects(Objects,OrigImage,[MinDiameter MaxDiameter]);
end
NumberOfObjectsAfterMerge = max(Objects(:));
NumberOfMergedObjects = NumberOfObjectsBeforeMerge-NumberOfObjectsAfterMerge;

-(Mike 9/26) (Requested by Anne 9-26-05) - The Load Text figure display currently doesn't show anything. It would be nice to have it show the text that has been loaded  with a scroll bar. I think we have a CP subfunction for showing a text display figure - CPshowtext or somethign like that?

-(Mike 9/26) (Requested by Anne) - Add background masking to the identify sec distance module
       (make it optional in case a cell stain image is not
       available). 

-(Mike 9/26) Add ray's new adjustment to SecProp function for secondary distance

-(Mike 9/26) (Requested by Anne 9-23-05) - Make the File > save current cellprfoiler code ignore .svn directories.  There was one in the Modules directory.

-(Mike 9/26) (Requested by Anne 9-21-05) - Combine ExpandOrShrinkPrim and ExpandOrShrinkSec.

-(Mike 9/23) (Requested by Anne 09-21-05) - There is a bug in the MeasureCorrelation module when the settings are: OrigBlue, OrigGreen, within Nuclei. (i.e. not within Image). It produces an output file with the correct fields in the handles.Measurements.Nuclei structure, but an extra, incorrect field (CorrelationFeatures) in the handles.Measurements.Image structure for some reason:
>> handles.Measurements.Nuclei
ans = 
       LocationFeatures: {'CenterX'  'CenterY'}
               Location: {[282x2 double]  [860x2 double]}
    CorrelationFeatures: {'Correlation OrigBlue and OrigGreen'}
            Correlation: {[282x1 double]  [860x1 double]}

>> handles.Measurements.Image
ans = 
          FileNamesText: {'Filename OrigBlue'  'Filename OrigGreen'}
              FileNames: {{1x2 cell}  {1x2 cell}}
          PathNamesText: {'Path OrigBlue'  'Path OrigGreen'}
              PathNames: {{1x2 cell}  {1x2 cell}}
      ThresholdFeatures: {'Threshold Nuclei'  'Threshold Cells'}
              Threshold: {[0.0392 0.0409]  [0.0524 0.0568]}
    ObjectCountFeatures: {'ObjectCount Nuclei'  'ObjectCount Cells'}
            ObjectCount: {[282 282]  [860 860]}
    CorrelationFeatures: {'Correlation OrigBlue and OrigGreen'}
            TimeElapsed: {[75.9895]  [214.3913]}

-(Mike 9/23) (Requested by Anne) - RenameOrRenumberFile behaves weirdly when trying to rename and renumber.  For example, for the file IMG_0760.JPG I tried these settings: # characters beginning = 4, # characters at end = 4, any text to add = /, characters for renumbering = 5.  I expected this to yield IMG_00760.JPG, but instead it yields: IMG_00000.JPG  Likewise, # characters for renumbering = 3 should yield IMG_760.JPG but instead it yields IMG_000.JPG.

-(Mike 9/23) (Requested by Anne 8-25-05) - Is the module "PlaceAdjacent" something that we can combine with "Tile"?  I guess maybe not, because PlaceAdjacent is designed to take in two different images (e.g. OrigBlue and OrigGreen) (although perhaps we can expand it to allow up to 6 images being side by side) whereas Tile is designed to take all the images of a particular type (e.g. all the OrigBlue images) and tile them.  Not sure if it is reasonable to combine these two - I guess it depends on what the variables are and how confusing they become.

-(Mike 9/22) (Requested by Anne 09-21-05) - The MeasureImageIntensity module does not store the image name with the measurement, so if you put multiple modules in a row measuring the intensity of different images, the early ones are overwritten.  Here's how the measurements look from the MeasureImageIntensity module....
handles.Measurements.Image:
    IntensityFeatures: {'Total intensity'  'Mean intensity'  'Total area'}
            Intensity: {[4.0181e+04 0.0399 1006000]}

I think we should change the module to be more like the MeasureObjectIntensity module, where we include the image type (e.g. 'OrigBlue' in the feature name), like this...
handles.Measurements.Nuclei:
   Intensity_OrigBlueFeatures: {1x11 cell}
            Intensity_OrigBlue: {[282x11 double]}

This will also make the module compatible with the MeasureRatios module.

-(Mike 9/20) ImageIntensity not working at the moment

-(Mike 9/20) Measure modules (AreaShape) should be able to handle 7 objects

-(Mike 9/20) Fix bugs with removing module from pipeline

-(Mike 9/19) (Requested by Anne 9-08-05) - ClassifyObjects is able to classify cells based on a ratio calculated with the MeasureRatios module. Anne has an example pipeline (temp17PIPE.mat for BioImage images) that shows how it's done, but it's a little hacked together and the module is not documented well to explain how this would be done.  

-(Mike 9/19) (Requested by Anne 8-23-05) - LoadMoviesText doesn't work when loading two .stk movie files - it fails at line 456, looking for 'FileNames'. Doublecheck that LoadMovies Order works too.  ---> UPDATE: Anne fixed the bug very quickly in LoadMoviesText new revision: 1.17; previous revision: 1.16. You can see the changes that were made by diffing those two revisions. Make sure that LoadMoviesOrder works and if not, hopefully those bug fixes in LoadMoviesText will show you what to do to repair LoadMoviesOrder. 

-(Mike 9/19) (Requested by Anne 09-08-05) - I helped someone setup CP on a PC (Windows XP, with Matlab 7.04.365 SP2 R14) and ran into a couple of bugs. Not sure if they will reproduce but can you check on them:
DONE * I'm not sure the timer units were accurate - it said it was taking 1 second per image set but it seemed more like 5-10 seconds. Is there some weird conversion?  Also, for the popup window at the end which tells us the breakdown for the entire set that was processed, each module's avg time is listed in seconds but no units were listed for the first image set or whatever else is listed at the top. Perhaps these issues were because we 'canceled after cycle' partway through, so the calculations were based on the total number of image sets rather than the number we actually processed?
DONE * The slider in the main GUI, when there are lots of variables, was backwards!  I thought this was fixed - I remember it seemed to be backwards depending on whether you're using PC vs Mac, but I thought it was working fine on your PC recently. i wonder if it's an XP issue?
* Not a bug, but on his computer it takes forever every time the code has to look up the list of images in the selected directory.  Can you make sure we aren't doing this redundantly?  I know we check through all the files when you choose the directory in the main GUI (so it's displayed in the list box), and then we check through the files when you click analyze images to make sure the file list hasn't changed (in case you moved files in the meantime), but i wonder if also the load images module is checking through things unnecessarily.  You might want to doublecheck any changes with me since this is a critical thing!
DONE * We had trouble with ExportData data tool when trying to export his data that had Image and Cells data (e.g. it had Load, IdentifyPrimAuto, and MeasureObjectsAreaShape) - the Cells excel file seemed fine, but the Image one failed because one of the first columns is 'pathname' which on the PCC has backslashes, but these are read funny in excel as column breaks.  We also got the command line error in matlab:
Export Data > Write Measurements in line 378
Export Data at line 75
See help for sprintf for valid escape sequences.

-(Mike 9/19 NEEDS TO BE TESTED) (Requested by Anne) - Combine Load Images and Movies (including Order & Text versions) into a single module.(I think this would be great, but maybe there are compelling reasons not to do it).  At the moment, the code which determines which files in the image directory are shown in the list box in the main CP GUI is weeding out movie file types, I think.  Also, the LoadImagesText module lists only 6 file formats that can be read. This list of file formats that appears in its popupmenu should be retrieved from CPimread - but maybe it's not possible because that requires running code rather than just extracting text. If that's the case, I guess we just have to type them into this module manually and update them whenever Matlab updates its imread function (which probably isn't that often anyway). Also, right now we ask the user for the file format of their images but this information is not actually used anywhere. We need to adjust the CPimread function to take in and use a file format (it should be optional; only used when images do not have file extensions).  Also, sometimes we might want to sort images by order but also by text, or sort by two different bits of text - like only wanting to retrieve images with the proper extension. So perhaps we should use the File format input in another way (besides using it for imread when there is no extension): do you only want to consider files with that extension?  That would be nice because it prevents you from having to exclude .mat files or other types of files in the folder.

-(Mike 9/19 CHANGED TO DOC FILE SINCE OPENING ON MAC ADDS FORMATTING WHICH CAN'T BE READ FROM .TXT FILE ON PC) (Requested by Anne 9-16-05) - why are there two SVNcommands.txt files now? can someone check the log and see who committed the new misspelled one?

-(Mike 9/19) (Requested by Anne) - Can IdentifyLaplacianOfGaussian (RgSmartDilate??) be merged into IdentifyPrimAutomatic?

-(Colin 9/15) - (Requested by Anne) - Make the DefineGrid module use the usual colormap for labeling its objects in the display.  By the way, should we have a CPcolormap function, if we decide to use that fix that Ola wrote (and that you edited?). Then someone could set it as their preferences and it would affect all the modules' colormaps.

-(Colin 9/15) - (Requested by Anne) - Put in the help menus for ImageTools and DataTools.

-(Mike 9/15 MOVED TO OUTDATED, DILATEBINARYOBJECTS HAS SAME FUNCTION AS EXPANDORSHRINK) (Requested by Anne 8-25-05) - Can DilateBinaryObjects be combined with ExpandOrShrinkPrim or ExpandOrShrinkSec?

-(Mike 9/15) (Requested by Anne 09-06-05) - MeasureRatios needs to be much more sophisticated. Right now it has CorrGreen and CorrBlue and CorrRed hard-coded in. It isn't flexible for different types of measures, is it? (AreaShape, Intensity, texture)

-(Mike 9/15) Also, Make sure there's an error check in MeasureRatios that catches if the incoming objects (or 'image') do not have the same number of objects, e.g. they try to divide a whole image measurement by a nucleus measurement, or they try to divide nuclei/cytoplasm but there's a slightly different number of those objects in the image.

-(Mike 9/14) (Reported by Serge Pelet 09-02-05) - he was working with an old version, so i am not sure if it's still a problem, and the line numbers may not match up:  MakeProjection_averageImage.m
(1) line 162:  [ProjectionImage, ReadyFlag] = CPaverageimages(handles, 'DoNow', ImageName, 'ignore');
has to be changed to  [handles, ProjectionImage, ReadyFlag] = CPaverageimages(handles, 'DoNow', ImageName, 'ignore');
to work properly. the output argument do not match.
(2) Same problem at line 134 probably

-(Colin 9/14) (Requested by Anne 8-23-05) - Make IdentifyEasy use the user's preference for font size - right now it's hard coded to be 8.  Check through all other modules and tools - I think DataLayout tool is also using a hard coded font size.

-(Mike 9/13) (Requested by Anne 09-08-05) - Can IllumCorrect Calculate using Intensities be combined with Background intensities?

-(Mike 9/13) (Requested by Anne 9-08-05) - MeasureRatios creates very long fieldnames in the handles.Measurements structure. Is there any way we can reduce the length?

**-(CAN BE DONE BUT TAKES A LONG TIME) (Requested by Anne) - Adapt the Crop module to take in an object (ie. the plate) identified by one of the identify modules and crop based on that object (anything outside the object is cropped away). This will be used to Crop away yeast agar plates.

-(Mike 9/12) (Requested by Anne 9-08-05) - The MeasureObjectIntensity module should show which image it is measuring (e.g. OrigBlue) in the window title somewhere.  Make sure MeasureObjectTexture does this too.

-(Mike 9/12) (Requested by Anne 9-08-05) - We want the MeasureCorrelation module to be able to measure the overall correlation between the two images, for the entire image itself (not just correlation within objects). I am pretty sure the code is able to do this, but it's not clear how to make it happen - do you have to leave one of the variables set to 'Do not use', or type in 'image' instead of choosing an object from the list?  We need to update the variable description to explain this, and possibly we need to adjust the variable popup menus to allow it.

-(Colin 9/12) - (Requested by Anne 09-01-05) - When we ran a pipeline that contained IdentifyPrimAUtomatic and SecPropagate and Tertiary Subregions, we ended up with an unanticipated field in the handles structure: handles.PipelineObjectOutlines
It seems like this ought to have been something like: handles.Pipeline.NucleiOutlines or something??

-(Mike 9/12 THIS WAS RAY'S FIX FOR DISTANCE) (Requested by Anne 9-08-05) - It looks like someone committed changes to the IdentifySec subfunctions... was this unintentional? I wonder if these needed to be SVN added in binary format rather than regular ASCII. Also, if it's feasible, we could rename the Sec subfunction to match the module's name 'IdentifySecondary'.

-(Mike 9/12) (Requested by Anne 9-08-05) - SVN remove CVScommands (I already added it to the Outdated folder).

-(Mike 9/12) (Requested by Anne 9-08-05) - The standard error message says error in module N, but it doesn't tell us the name of the module. Can we have the name of the module included in the error message? When there's > 10 modules it gets tough to count and find which one generated the error.  Also, it would be really really great if these error catchings could tell us what line number the error occurred on.  I think this is something we've tried before and couldn't figure out, though.

-(Mike 9/12) (Requested by Anne 9-08-05) - Can we have the image set number displayed for every figure window?  Rather than adding it as a title for each individual figure, perhaps we could have it be part of the window bar (where it says Figure 9: ClassifyObjects can we change it to Figure 9: ClassifyObjects, image set #3?)

-(Mike 9/12) (Requested by Anne 9-08-05) - LoadSingleImage produced a long box and browse button for the first image specified but not the subsequent image types.

-(Mike 9/12) (Requested by Anne 9-08-05) - There's a typo in ClassifyObjects - according is accoring.

-(Mike 9/12) (Requested by Anne 9-08-05) - Can you check the Tif image files now that we have SVN set up and see if they look OK on the PC (and haven't been mangled by conversion to binary or whatever)?  Also, the .mat files.  Susan will be updating the ExampleXXXSettings.mat files to the newest version of code, but you should at least see that matlab can read the files.

- (Susan 9/9)(Requested by Anne 9-08-05) - Change the name from SVNcommands to SVNcommands.txt 

- (Susan 9/9)(Requested by Anne 09-08-05) - Please adapt the four pipelines which are in trunk/CellProfiler/ExampleImages (each folder has an example pipeline) to the current code and once they are repaired and load smoothly, commit them to SVN and generate new Output files and commit them to SVN too.  This might involve changing some module names and moving variable names around, as you have done previously. 

-(Mike 9/9) (Requested by Anne 9-08-05) - there still seems to be a lingering bug in object groups... I think it happens when I set up a pipeline (e.g. with  Nuclei being identified and then measured) and then at the last minute change the name Nuclei to Nuclei2. In subsequent modules that make use of that object, the name automatically updates to Nuclei2 but when I run the pipeline the subsequent module goes looking for Nuclei, not Nuclei2.

-(Mike 9/9) (Requested by Anne 9-08-05) - In ClassifyObjects, I get strange results in the histogram - I think the data is probably right, it's just displayed strangely. Test it with the lower bin set below the lowest actual measurement, but with the upper bin edge set to be somewhere where about half the measurements will be excluded because they are too high. Now set p:NN  where NN is a value where about half the objects are higher and half lower. I tested it where the actual values ranged from 0 to 2000 and I set the cutoff to p:300. The histogram showed two bars, stretching from 0 to 300 and from 300 to 600. I would have expected it to be 0 to 300 and 300 to 2000, but maybe that's just how the display looks.

-(Mike 9/9) (Requested by Anne 9-08-05) - I hacked together a quick fix for the MeasureCorrelation module to allow it to measure the correlation of the images overall, but apparently there's something wrong in the code - the module doesn't fail or error out, but the measurements it produces are not the right 'shape': for each combination of incoming images (e.g. green+blue) it should produce one number per image, and the measurement should go in handles.Measurements.Image, like:
handles.Measurements.Image.CorrelationFeatures = {'Red_Blue','Red_Green',Green_Blue'}
handles.Measurements.Image.Correlation = {[.2 .4 .6], [.4 .5 .1]}
(for three color combinations and two image sets)
Or something like that - check other measurements that end up in the Image substructure and make sure that this module matches those.  The way the code is currently, there are a few hundred numbers for each image!

-(Colin 9/9) - (Requested by Anne 09-02-05) - it looks like you invented a new 'filenameVAR' to enter filenames - have we incorporated this into any modules yet? We could put it in LoadSingleImage if you want. 

-(Colin 9/9) (Requested by Anne 09-08-05) - I think we still want to increase the size of the text boxes that say default image folder and default output folder. All the other text looks great on my computer, except that those are missing the word 'folder' because the box isn't quite wide enough.

- (Colin 9/9) (Requested by Anne 09-08-05) - Can you check that the zipping function works now on the mac? Mike just fixed it and i want to doublecheck that if you do File > Save current CP code that the zipped archive contains everything we need to run CP.

===-(Mike 9/8) (Requested by Anne 8-23-05) - Make the ApplyThresholdAndShift an option within ApplyThreshold. Give the new combined module sophisticated options for automatic thresholding (see IdentifyPrimAutomatic for thresholding code).  I think this will also replace the functionality of SubtractBackground.

===-(Mike 9/8) (Requested by Anne) - Combine RGBsplit and RGBtoGray into a single module - that is, with the two methods (split or combine) being options within a single module. Call the resulting module RGBtoGray and move RGBSplit to Outdated.

-(Mike 9/8) (Requested by Anne 09-07-05) - For the IdentifySecondary module, I think that if you choose Distance, no images are needed as an input, so the variable description should change to reflect that an image selected there only affects the display and not the object identification itself. 

-(Mike 9/8) (Requested by Anne 09-07-05) - Don't forget to move the outdated IdentifySec modules to the Outdated folder. 

-(Mike 9/8) (Requested by Anne) - Combine all IdentifySec options into one module.

-(Mike 9/8) (Requested by Anne 09-07-05) - Can you rename all text files (the TODO's and some DeveloperScript files) by adding .txt to the names?  I think SVN allows us to do this in a smart way (whereas CVS required adding and deleting).

===-(Mike 9/7) (Requested by Anne 09-01-05) - If loading an old pipeline fails dramatically (e.g. because a module no longer exists), right now things just kind of stall, and then there are loose variables left in the handles.Settings and the pipeline list box shows 'loading...'. If possible,  if something goes wrong during pipeline loading can we make sure handles.Settings is cleared out and the 'loading...' is cleared away?

-(Mike 9/7) (Reported by Serge Pelet 09-02-05) - he was working with an old version, so i am not sure if it's still a problem, and the line numbers may not match up:   CPretrieveMediaFileNames.m
line 27 change  MediaExtensions = [MediaExtensions, 'avi', 'stk']; 
to
MediaExtensions = [MediaExtensions {'avi'}, {'stk'}]; to preserve the cell class
This gave a bug on my Mac when I started CP but didn't cause any problem on a widows machine, strange!

-(Mike 9/6) (Requested by Anne) - Move the help contents of IdentifySecPropagateSubfunction to the help for 
 IdentifySecPropagate and then remove IdentifySecPropagateSubfunction.m from cvs (i.e. delete it), because it contains no code but appears as a module to load in the pipeline when you click the AddModule button.

-(Mike 9/6) (Requested by Anne 09-01-05) - When loading from a saved pipeline and a module doesn't exist anymore, a warndlg pops up but is then covered up by the variable revision assisting window. The text from the warndlg box should be displayed in the variable assist window (which normally says something about revision numbers not matching), and just say "Module XXX can't be loaded, but you can at least see the saved settings below. The pipeline will not load properly and probably all of CellProfiler's settings are corrupt so you should shut it down before attempting to load or build a new pipeline".

-(Mike 9/6) (Requested by Anne 09-01-05) - When we load from an old saved pipeline (e.g. the SecPropagate module) and the Variable Revision number is now newer, we go through the helper window that assists us in choosing saved or default variables. It's kind of strange though because there are blank spaces for default variables that make use of popup menus. These should display *something*, like "Image must be chosen from pipeline" if it's an imagegroup popup menu, for example.

-(Mike 9/2) (Requested by Anne) - make sure all modules have a Variable revision number, because otherwise we have to confirm it upon loading pipelines every time we use that module.
NOTE: THIS SHOULD BE CHECKED FOR ALL NEW MODULES BEING CREATED

-(Mike 9/2) When loading a module whose variable revision number has changed, many of the variables come up as blank in the window where you choose between Saved and Default.

-(Mike 9/2) (Requested by Anne) - SaveImages is not actually checking to prevent overwriting existing images, even when you have the variable set to doublecheck.

(Joy 9/1) - (Requested by Anne) - When Saving a pipeline, after you confirm the filename change (adding PIPE to the name), it asks if you want to save the pipeline as a text file. If you click yes but then cancel at this stage, you don't get the dialog box confirming that the pipeline file itself was saved. I guess the best thing to do is after confirming the filename of the pipeline itself, the confirmation window should appear that it was saved and a separate confirmation window should appear if you save as a text file.  Also, in all of the dialog boxes relating to this function, we should refer to the 'settings' as 'pipeline' instead, to be consistent.  Also, we should check whether PIPE is already part of the name and if so, do not suggest adding PIPE again!

-(Joy 9/1) - (Requested by Anne 8-23-05) - The Histogram DataTool spits out the value "Suffix" at the command line in the first few steps of using the tool.

-(Colin 9/1) - (Requested by Anne 9-01-05) - There is a bit of a bug with the new 'long box' fix that has the edit box plus the browse button. I end up with browse buttons floating in the wrong place. The pipeline in the drop box called temp3PIPE.mat should reproduce the problem - look in the SaveImages module and there should be a browse button displayed on top of the 4th variable.

-(Colin 9/1) - (Requested by Anne) - In several places there is text information entered as a variable description that does not need a corresponding variable box (see SaveImages for an example). A box with the text 'n/a' appears next to these variable descriptions that is unnecessary.  This seems odd - can we make it so the variable box doesn't appear if it is n/a?  I think maybe the reason it is done this way is to be sure that if you scroll down using the slider this extra text information is displayed properly.


-(Mike 8/31) (Requested by Anne) - There is a general popupmenu bug: for example, in ImageTiler, if I load this module after loading other modules (like SaveImages) and leave the default "TiledImage" as it is, this 'TiledImage' option does not automatically show up in the SaveImages module as an image I can choose. The workaround is simply to click on the TiledImage text in the  ImageTiler module. This refreshes the popup menu in the saveimages module so that the TiledImage can now be selected. Another popupmenu bug: To reproduce, first add for example IdentifyPrimIntensIntens to the pipeline, close the add module window, and then add for example the LoadImagesText module. Move the LoadImagesText module to the top. Now it is still not possible to choose an input image in the IdentifyPrimIntensIntens module. This problem might have the same root case.


-(Colin 8/31) - (Requested by Anne 8-30-05) - Hey Colin - can we add ImageTools to the main GUI interface (next to DataTools), please? I find it useful for ShowDataOnImage, which doesn't depend on being run from a particular figure window.  Or, we could just make ShowDataOnImage be a DataTool.

-(Mike 8/30) (Requested by Anne) - variable bug: for IdentifyPrimIntenIntens (and possibly other modules), there is a problem with the variable - what do you want to call the labeled matrix image?  Typing in a custom entry using the 'Other...' option yields an error. See that module for more details on the error produced.  Perhaps we decided that this bug is not worth fixing, in which case remove the comments there and convert any other similar situations in other modules so that this error does not occur.  Note: We have replaced IdentifyPrimIntenIntens with IdentifyEasy recently. We still want to fix the problem because a similar thing occurs in IdentifyEasy but you will still want to take a look at the code in IdentifyPrimIntenIntens because the bug is described in detail in there (see Outdated folder).

-(Colin 8/30) - (Requested by Anne) - It used to work that if we added "LongBox" to the end of a variable description, a long edit box would be shown. Also, if the text contained within an edit box outgrew a small edit box (e.g. more than 20 characters I think), then a long edit box would be shown so all the text is visible.  With the changes associated with the new popupmenus, etc., we lost this functionality. Most, or maybe all, of the instances where we used LongBox  was to input a path name. In these cases, it would be very nice to instead have a browse button and a long edit box to help the user choose or type in a path.  This would involve creating a new variableinfotype.  This does not, however, take care of the other usage of long edit boxes: so we also need to adjust the popupmenus and small edit boxes so that if their contents become too long, the popupmenus or small edit boxes drop down to the next line and become long.

-(Colin 8/30) - (Requested by Anne) - For the interactive zoom part of CPfigure, it seems there's no way to turn it off. (the tool itself works fine). It'd be nice to click the 'Interactive Zoom' text on the menu and have it turn off and the little X Y indicator go away. Also, clicking the 'X' to close the XY indicator yields an error.

-(Colin 8/29) - (Requested by Anne) - In several places there is text information entered as a variable description that does not need a corresponding variable box (see SaveImages for an example). A box with the text 'n/a' appears next to these variable descriptions that is unnecessary.  This seems odd - can we make it so the variable box doesn't appear if it is n/a?  I think maybe the reason it is done this way is to be sure that if you scroll down using the slider this extra text information is displayed properly.

-(Mike 8/29) (Requested by Anne) - Variable bug: To reproduce, make a pipeline of LoadImagesText, then IdentifyPrimIntensIntens, then MeasureAreaShape. In MeasureAreaShape, choose Cells in the first slot. Then go to Identify module and change the objects to be identified from Cells to Nuclei. When returning to MeasureAreaShape, you will see that what was previously set to Cells has automatically changed to Nuclei. In my view, this is unanticipated behavior and should not happen. It ought to stay set to Cells until you change it (even though Cells will not exist and the pipeline will fail, at least it is the user's fault and they can figure out the problem).  The worse problem (other than it being unanticipated) is that when you actually run the pipeline, the MeasureAreaShape module still goes looking for Cells rather than Nuclei, so it fails. This part of the error can be prevented by going to MeasureAreaShape and re-selected Nuclei, even though that is the option that's already chosen. So, re-selecting it seems to embed the proper choice into the handles.

-(Colin 8/29) - (Requested by Anne 8-26-05) - it looks like we have a slight peek-through problem - I noticed it on the Crop module that it's showing up behind the default image directory edit box.  Also, change 'Directory' to 'folder' in the main GUI.

-(Mike 8/26) (Requested by Anne) - On the windows machines that Stephanie & Monica & Winston use over at CSAIL, the windows appear off the top of the screen for some reason. It was only a problem for the Identify modules and RGB Split module but not Crop and Measure modules.  I've no idea whether it's related to the CPFixAspectRatio function (based on the 4 modules I checked there is a correlation, but it's not definitive). We should figure out what the point of CPFixAspectRatio is and document its code with some help to describe it.  We may also need to incorporate it throughout the code - some modules use it and others don't, so we ought to make things consistent.  Also (a separate issue, i think), error/help box text didn't fit in their windows and so was not visible. 

- (Requested by Anne) - cvs remove Profiler for Anne folder from the DeveloperDropBox. removing a directory requires a special procedure - i don't know how.

-(Mike 8/26)  (Requested by Anne) - Remove all Programming notes from each module and instead we will just have the one Help file of programming notes.

-(Mike 8/25)  (Requested by Anne) - Go through the code looking for uses of the command 'label2rgb' and change it to look like this (pre-calculates a colormap instead of just using the jet colormap):\
    %%% This method of calculating a colormap to use prevented some\
    %%% errors relating to colormaps. For one thing, the label2rgb\
    %%% function fails if there are no objects in the label matrix\
    %%% image. Also, there is a bug for some of the colormaps that\
    %%% fails when there are only 1 or 2 objects in the image, I\
    %%% think.\
    cmap = jet(max(64,max(Objects(:))));\
    im = label2rgb(Objects, cmap, 'k', 'shuffle');\

-(Colin + Mike 8/24) (Requested by Anne 8-22-05) - For IdentifyEasy, add a variable "Do you want to run in test mode to see the results of all the intensity/distance options?" which will run all combinations of options and show the results in a single large window to help the user choose among the options.  I particularly want to see these results and show them to Ola before he leaves for Germany to make sure they are giving the results he expects.}

-(Colin 8/24) - (Requested by Anne) - SpotIdentifier needs to be polished up - see the help of that file for a few things we wanted to do or check. Some of these items may be done already.

-(Colin 8/24) - (Requested by Anne) - IdentifyWellSpots needs to be polished up - it needs more help text, the boilerplate etc, and it needs to be made just like the other Identify modules in terms of the various things that end up stored in the handles structure.  Also, we need a way to have the module figure out if there is no good way to line up the identified spots; if the settings are weird (e.g. I type in an 8 x 11 grid when the image actually has an 8 x 12 grid), I get errors but they aren't explained very well. (e.g. Non-finite endpoints or increment for colon operator in index).

-(Colin 8/24) _ (Requested by Anne) - It's a bit complicated but I'd like to combine IdentifyWellSpots (automatic version) and SpotIdentifier (manual version) into a single module (to be called IdentifyPrimGrid?). 

-(Colin 8/24) -- (Requested by Anne) - Once all these changes are done (removing the text data and the image rotation from SpotID'er), then we want to combine IdentifyWellSpots and SpotIdentifier into a single module: IdentifyGridOfObjects.  Here's what the variables ought to be (you'll need to change the syntax for a lot of them because I cut & pasted them):

-(Mike 8/24) (Requested by Anne) - The crop module seems to fail for RGB images at the moment.

-(Mike 8/24) (Requested by Anne) - For the File > snapshot of CP files, don't have it archive the CVS folders or any files preceded by a dot (hidden files).

-(Mike 8/24) (Requested by Anne) - Make this information available via a "?" button in the Add Module selection window next to the "Object Identification" header:\
% Identify Primary modules identify objects without relying on any\
% information other than a single grayscale input image (e.g. nuclei\
% are typically primary objects). Identify Secondary modules require a\
% grayscale image plus an image where primary objects have already\
% been identified, because the secondary objects' locations are\
% determined in part based on the primary objects (e.g. cells can be\
% secondary objects). Identify Tertiary modules require images where\
% two sets of objects have already been identified (e.g. nuclei and\
% cell regions are used to define the cytoplasm objects, which are\
% tertiary objects).\

-(Mike 8/23) (Requested by Anne) - Improve the window that appears at the end of an analysis run: Right now it prints the time elapsed for every cycle, which is almost always way too much info to fit in the window. So four columns: [Module name  |  Time for first cycle  | Time for last cycle | Average time for all other cycles], and then one row for each module in the pipeline.  Change the Timer to also display this information, using the term 'Cycle' rather than 'Image set'.  Also, have it convert to minutes or hours if it's reasonable instead of displaying in seconds all the time.

-(Mike 8/23) (Requested by Anne) - In the Add Module window, there is no directory listed next to the text "You are currently looking in". It's because the text wraps to two lines so we need to make that text box big enough to display two lines.

- (Colin 8/18) - Remove the code for rotating an image from the SpotIdentifier module and make it into a separate image processing module "RotateImage". There should be several methods to choose from in a popup menu:
1. Type in a set of pixel coordinates for two points that should be aligned horizontally.
2. Type in a set of pixel coordinates for two points that should be aligned vertically.
3. Click spots that should be aligned horizontally with mouse 
4. Click spots that should be aligned vertically with mouse 
5. Type in the rotation in units of degrees.
6. Automatic, based on identified objects - this would be a new, sophisticated option where identified objects that look like they're in a grid or some sort of lines would be rotated to be squared up to the image. Not sure if this is feasible, but it would be cool. We can make this a more long-term part of the project.
All of these options would be converted to a single number - degree of rotation - so the same code can then be used to actually rotate the image no matter which option was chosen.  This degree of rotation (or however you want to store it) should be saved in handles.Measurements.Image because it may be of interest to the user and also so that it can be retrieved in case you want to apply the rotation from the first image set to subsequent sets (see next option).

Another option - do you want the rotation for the first image to be applied to all image sets or do you want to determine the rotation for each image individually as you cycle through? 

Another option - do you want to crop away the rotated edges?  (Otherwise, the rotated edges with missing pixel information are just black pixels).

- (Colin 8/22) - (Requested by Anne) - We've lost the regular Matlab toolbar that shows up in figures - the one that has save, print, zoom, add text, etc. Can we add it back?

DONE BETWEEN  IAP 2005 and FALL 2005  (the oldest is towards the top in this list)  >>>>
-------------------
Done, I think - The error checking for "there are no images in this folder"
       should be moved out of CellProfiler.m and into the two Load
       Images modules, since some pipelines may not require images in
       order to run properly.
Done - - The confirmation window upon "cancel after image set" button clicking ought to say "confirm cancel", not "confirm close". 

Done (Anne) - Fix CreateBatchScripts, for the option of selecting the default module directory by entering "."  Things were changed recently to add CellProfiler and CellProfiler/Modules to the path, and I am not sure whether this option will still function.

Done (Anne) - In CellProfiler.m, look for lines marked: %%% TODO: Fix filename construction (I think also see lines pertaining to OutputFileOverwrite), and use a less platform-dependent way to construct the path/filenames (e.g. with Matlab's fullfile function), rather than using slashes.

Done (James and Anne) - Remove all 'cd' commands from modules and use full pathnames instead.  In particular, modules that need to look at all the images in a set (Load images, identifythreshold, correctillum, subtract background) typically change to the directory then read the images, whereas we could construct the image filename using fullfile(pathname,filename). (The reason for doing this is to prevent CellProfiler from unexpectedly changing the current directory in matlab.  However, if this method takes more processing time, perhaps we should not make this change).

Done (Anne, with Kyle writing the Help) - Load movies module, with ability to load each frame of a .avi file.  (Look at AvitoImageSlices.m)

- DONE, Delimiter was not functioning on anne's computer, but it seems to work now.- Allow the user to 'export' the current settings into some nice, person-readable text file so they have a permanent record. 

DONE (Anne - SpeedUpCellProfiler module): - Change saving of the output file to be faster for large jobs -> tell the user they can change CP.m code to save only if handles.Current.SetBeingAnalyzed is a multiple of 5 or 10 or whatever, rather than saving after every image set.

Steve Lowe fixed the following:
2/25/05
- Help function does not work for ImageTools and DataTools; The menu often doesn't return to the default first position ('DataTools' or 'ImageTools') after running a tool.
First problem was a partially deleted string defining okcallback. Second problem may have been fixed by someone else, seems to work ok.

3/08/05
Fixed title bar label for Data Tools Help (previously said Image Tools Help).

Changed Image and Data Tools Help windows so that double clicking in list box will display help for the tool, same as clicking OK button.

In PlotOrExportHistograms, fixed problem that filenames containing underscores were not displayed properly as histogram titles (displayed succeeding character as subscript).

3/15/05

- Improve the Data tool "PlotOrExportHistograms":
*Make the dialog box that asks for input from the user (~13 questions) wider.
*When filenames have underscores and these filenames are used to label each histogram in the display, the underscores cause the following text to be subscripted. We fixed this somewhere else in the code at one point by doing a string replacement of underscores with some symbol that prevents the underscore from being read as a string modifier. 
*Flip rows vs columns for exporting the raw histogram data, so that columns are histogram bins and rows are images. Now have option to display in either orientation.
* Update help for this tool.

4/12/05 and 4/15/05
- Created new module IdentifyPrimLaplacianOfGaussian. Functions, but need to verify that it is doing as well as Perlman and Mitcheson's work.
- Added ability to restart a partially completed run, using module Restart.m. TODO: small mods to 45 modules that check SetBeingAnalyzed == 1 and take some global action, some of these may need to be changed to SetBeingAnalyzed == StartingImageSet.
-Made "Close Windows" button work better by tagging figures that CellProfiler creates. Now every figure CP creates has UserData.Application = 'CellProfiler'. "Close Windows" button will delete figures from current and previous invocations of CP.
-ToolsHelpSubfunction: Now closes any existing ToolsHelpWindow because 'ok',
'cancel' callbacks could get confused and throw error if more than one.
-ToolsHelpSubfunction: Set toolsChoice=0 before uiwait to make behavior
correct if exit message box using clicking x instead of cancel.

4/22/05
Went through Modules and adjusted so they will work with Restart.m.

5/24/05 (Colin)
- Allow canceling from the first dialog box when using the Save Image As button.

5/24/05 (Colin)
- The help button does not work for OpenNewImageFile, ShowDataOnImage, AddData, and ClearData

5/24/05 (Joo Han) - Not committed yet, have pending questions.
- I just adapted ClassifyObjects into ClassifyObjectsIntensity, but probably we should combine the two. I wasn't sure how to look up which column of measurements is desired, so that's one definite improvement that ought to be made.  Also, the new version doesn't allow for marking/coloring which object is in which bin since it extracts the data from the handles structure rather than calculating it from a label matrix. Neither version allows anything other than three bins, so it would be nice to allow the user to enter a variable number of bins separated by commas.

5/24/05 (Joo Han)
- Updated help for OpenNewImageFile.m

5/26/05 (Colin)
- After renaming is complete, the list of image names does not update itself automatically

5/26/05 (Colin)
- CPtextdisplaybox scrolls faster


- Done (Joo Han) Figure out a way to let the user to launch CellProfiler without separately launching Matlab (Have Matlab be automatically launched).
                -for Windows: In the installation package, include the shortcut with the path set as: matlab.exe /r CellProfiler
                -for UNIX: In the installation package, include the shortcut with the path set as matlab.exe -r CellProfiler

*The changes below have been canceled and replaced by a new version. The help file for the new syntax will follow soon.

- Done (Joo Han) - Expanded the syntax for declaration of variable boxes and such using comments in modules.

- Done (Joo Han) Combined all the identifyprim modules (need to delete most comments?)

- Done (Joo Han) Wrote the help file for the expanded syntax. (Perhaps too long?)

- Done (Joo Han)	Combined all the load images modules into LoadImages.m, using the expanded syntax.
				Combined all the load movies modules into LoadMovies.m, using the expanded syntax.
				(It would be very simple to change the program so that either LoadImages or LoadMovies module is added to the pipeline by default when the program starts; however, this will result in some loss of flexibility. Perhaps we can have a feature in the GUI called "Frequently Used Modules" where the user can add certain modules with just one click?)
                *Shouldn't we also have a LoadSingleMovie feature? It will probably end up being the most used load movie method..

- Done (Joo Han) Replace OrigImageToBeAnalyzed or OriginalImage or whatever, with 'OrigImage' in all modules in order to make everything consistent.

- Done (Joo Han) Check through all modules and make sure none of them have any variable options that let you load or save images to/from the hard drive - this was archaic and is replaced by LoadImages and SaveImages modules. (Used ReplaceTextInModules and checked modules with more than 3 instances of 'hard drive' found.)

- Done (Joo Han) We have modified several built in matlab functions and produced new functions with the CP prefix (they are all in the main CellProfiler folder). It's unclear which lines we have modified, so use the Matlab tool 'FileComparison Report' to show how the modified functions differ from the original and mark those lines in the code with comments so that we are aware of the differences. *All are well documented. File Comparison Report fails to give meaningful comparison results sometimes due to inconsistency of order, so I went through the modules myself. Most of the CP modules had been modified to indicate that figures or msgboxes created belong to CellProfiler.

- Done (Joo Han) Add error checking to data-related buttons to determine whether
       the .mat file the user selected is a valid CellProfiler output
       file. AddData, ClearData, ConvertBatchFiles.m. Load pipeline already has error check built-in, and for other modules it seems more complicated.

- Done (Joo Han) A modification on the improved version of the comment syntax, to make the combined modules more readable. Refer to IdentifyPrimAdaptThreshold.m for the format.

- Done (Joo Han) Bug fixed for OpenNewImageFile.m where capital lettered image file extensions were not recognized.
 
- Done (Joo Han) When some of the data tools (e.g. Histogram) generate a figure, these figures do not contain information in their UserData to indicate that they are CellProfiler figures, so that the Close windows button in CellProfiler.m does not function on these windows. We should check through all the data tools and image tools and modules and be sure that all figures which are created have the proper userdata.  Perhaps actually we should rewrite the figure function to be CPfigure, which is basically a subfunction calling the figure function plus some lines that add the userdata.

- Done (Colin) Make the DIB cancel button work in CPimread.m > right now it gives a less straightforward error message when you choose cancel during an analysis run. I don't know how it responds during an ImageTool like OpenNewImageFile.m

- Done (Joo Han), in a different way. Despite numerous attempts, we have had trouble adding a panel/frame to the GUI (CellProfiler.fig file) so that variable descriptions don't peek through under the boxes at the bottom of the GUI, when loading a module with lots of variables. The problem is peculiar, because it seems that if we make the change and save the .fig file on a PC it works fine everywhere but on the mac platform suddenly there is a 5 minute delay - the first few times we tried it, the delay occurred upon loading up CellProfiler. Later, it would happen only when you actually try to run a pipeline.  Usually the problem would be fixed by making the changes on a mac rather than a pc, but the past few times we tried, even that doesn't help. It's worth trying again on a mac.  the reason it seems so peculiar may have to do with how the .fig and CellProfiler.m files interact - they seem to update each other in a magical way that gets disturbed if you aren't careful. Seems like a buggy Matlab issue.  If all else fails, we could add a frame 'manually' by writing code in CellProfiler.m that runs upon start up rather than trying to add the panel to the .fig file using GUIDE.

- Done (Steve Lowe) - Restart module. 'Start job midway' module, run image set #XXXX (allow putting in a bunch of comma-delimited numbers to allow random), every 50th.

+++ Done (Steve Lowe) Download code relating to Perlman, Mitchison, et al. Science
       2004 and make modules accordingly (Laplacian of Gaussian to
       identify nuclei)

- Done (Ola) Make the ColorClassifyObjects way cooler: (1) able to use any measurement calculated by other modules - retrieve any measurement from the handles structure (2) allow the user to enter any number of bins. (3) Allow user to choose the colors to display for each bin.  Right now, the module can only do three bins, with fixed colors, and it classifies based on Area only, which is calculated within the module rather than retrieved from the handles.Measurements.

- Done (Ola) - PlotMeasurement DataTool: allow displaying two parameters vs. each
       other in a scatter plot.

- Done (Colin) - Make a button/tool that creates a zipped archive of all the CellProfiler files (e.g. a 'snapshot' of the code that is currently being used). 

- Done (Joo Han) - Implement Log Thresholding by changing CPgraythresh. In Han tested different thresholding methods, and log thresholding seems to be most stable at the moment. Might need to add an option to log threshold or not.

- Done (Joo Han) - Enable the use of popup menus by adding new possible syntax in comments within modules, and - We would like to overhaul all modules that pass images from one to the next to use drop-down menus rather than the user typing in the image name, which will limit typos. This would be a major infrastructure change.

- Done (Joo Han) - Go through all the modules to use popup menus whenever applicable (except IdentifyPrimAdaptThreshold)

- Done (Joo Han) - Allow up/down for combined modules (e.g. IdentifyPrimAdaptThreshold)

- Done (Joo Han) - Fix the scrolling method so that a variable description always becomes visible only after the corresponding variable box becomes visible, instead of just looking at the location.

- Done (Joo Han) - Make a "CreateWebPage" module that takes in original images, small thumbnail versions of the images (e.g. made with the ResizeImages module), and a filename that you want to call the html file.  The module should then write a text html file with code something like this:
<A HREF= origfilename.jpg><IMG SRC = thumbnailfilename.jpg>
</A> <BR>
Check to be sure that it works with subdirectories, so that one html file is produced per subdirectory.

- Done (Colin) - Make a button/tool that creates a zipped archive of all the CellProfiler files (e.g. a 'snapshot' of the code that is currently being used). 

- Done (Colin) - In the SetPreferences button, fix the code for when the user does not have write access to the matlab root directory. There is a nice routine almost functional there, but it doesn't quite seem to do the right thing: try to write in matlab root first, and if that fails, write in the handles.Current.StartupDirectory) > Also, maybe we should change it so that the current directory it tries to write to is the handles.Current.default output directory, since presumably the user can write there.  That is where CellProfiler should look when trying to load the preferences upon launching, too, if we add this feature.

- Done (Colin) - In the SetPreferences button in CellProfiler.m, do some error checking to see whether items entered in edit boxes are valid.  For directories, check whether the directory exists and warn the user if it does not (although, still let the nonexistent directory be saved, because perhaps they are not connected to the network or something). For the default output directory, check whether the user has write permission to that directory and warn if not.  For the pixel size and font size, check whether the entry is a number (though I think it needs to be stored as a string within a cell) and revert to the previously saved value if it is not a number.

- Done (Joo Han) - Change Save Images as to be compatible with CreateWebPage - in order to do this, it needs to update the filenames after it saves them. In case there are any trouble caused by this, also add a option where the user can choose not to update filenames within CellProfiler.

- Done (Joo Han) - WriteSQL.m should enforce itself being the last module in the
pipeline, like CreateBatchScripts does (or second to last, if
CreateBatchScripts is last).

- Done (Joo Han) - For the SaveImageAs Imagetool, allow saving the data in the image as a variable called 'Image',  in .mat format.

- Done (Joo Han) - When attempting to Export data using any of the various
       data tools, add an error check in case the mat file does not
       contain the field "Measurements".

- Done (Joo Han) - When clicking on a module in the list box whose .m file no longer exists in the Modules directory, an error pops up saying the module no longer exists but that the settings will be shown anyway.  The settings are *not* shown in the window, because an error appears in the command window - undefined variable "flagExist" at line 1066.
Error in ==> CellProfiler>ModulePipelineListBox_Callback at 1062
  if ( ( length(VariableValuesString) > 13) | (flagExist))

- Done (Joo Han) - CellProfiler.m keeps track of time elapsed, broken down for each module, and has a display pop open at the end of a pipeline showing how long the first image set took and how long subsequent sets are taking.  Right now, the time is shown for *every* image set, whereas we only want two columns: the first image set, and then subsequent sets all averaged together.

- Done (Joo Han) - ++ Prevent clicking pause/cancel buttons twice in the timer window.

- Done (Joo Han) - It would be nice if clicking '+' to add a module to the pipeline added the module after the point you have highlighted in the pipeline, rather than always adding the new module to the end.

- I think the only way to do this is take away the ability to select multiple things, which isn't worth it. (Colin) - When viewing algorithms in the main GUI on the Mac platform, the down arrow should
       move from one highlighted algorithm to the next (right now, the
       dotted line highlighting moves but nothing happens).

- Done (Joo Han) Make all pop-up windows use the proper background color and
       come to the center of the CP window (helpdlg, warndlg, msgbox): (changed as center of screen, will need handles to get CP center..)
       requires getting the handle then setting the color and
       position. (Also, for the variablerevisionnumber window, set colors appropriately.)

        ***Please use CPhelpdlg and CPwarndlg from now on***


- Done (Colin) For the ExportData data tool, we would like to have the option of swapping rows and columns. Right now, measurements are across the columns and objects/images are the rows. We would like to add a checkbox that allows us to swap these.

- Done (Joo Han) 'Report bug' button in CellProfiler's main GUI. (in the Help menu) The function itself is also implemented. mail server needs to be automatically detected, though..

- Done (Joo Han) 'GetHistogram' module, which has various options to create a histogram and allows each histogram to be saved so that a movie can be created later.

- Done (Joo Han) Added a zip create and download feature to CreateWebPage module so that the user does not have to download image by image.

- Done (Joo Han) I think this was already done before but not removed from the list: Add Image set # to the display for AlgAlign.m (see other displays for the precise format).

- Done (Joo Han) Have image windows pay attention to aspect ratio of images. (Created a new function called CPFixAspectRatio.m which fixes the ratio for quadrant subplots, and made every module that uses quadrant subplots call this function. Not perfect, but much better than before. May also accommodate double subplots later)

- Done (Joo Han) 'Fetch new modules from website' button in CellProfiler's main GUI. (in the Help menu) 
The function itself is also implemented, although it may have to be revised. Right now it tries to connect to cellprofiler.org and tries to download ModuleList.txt, and download all the modules listed in that file if the module doesn't already exist.

- Done (Colin)- Be sure that all exporting tools will function properly if some
       measurement fields are left blank, which is the case when there
       are no objects in a particular image, for example.  This is particularly a concern when the last image had no objects, so make a fake image set with no objects in the last set and see if everything works.

- Done (Colin) - ExportData Data Tool: I would like Export Process Data to include all of the variable descriptions and variable values and variable revision numbers, as is currently created when using the Save Pipeline button (save as a text file option).

- Done (Colin) - - Use the User's preference for font size for all figure displays and dialog boxes.  Do this by adding this line:
	FontSize = get(0,'UserData');
After the line in the DISPLAY RESULTS section:
if any(findobj == ThisModuleFigureNumber) == 1
And then, for each subplot or text window, add this line:
    set(gca,'FontSize',FontSize)
For each title, add properties at the end:
    title('Original Image', 'FontSize', FontSize)
Also, ask Ola whether we should take out the old method of finding the preferred font size, which was FontSize = handles.Current.FontSize;  I would guess we probably should remove that to make it more consistent throughout the code. {NOT SURE IF THIS IS UP TO DATE... ASKED OLA AND HERE IS HIS RESPONSE:"it seems that the FontSize is still stored in UserData, and not in a UserData.FontSize. However, the fontsize is stored in the UserData for the 0-window, i.e. the main matlab window.
I've seen that there is a UserData.Application = 'CellProfiler' and so on now, but this is stored  in the UserData for other figure windows (i.e. with handles > 1). So right now there is
no conflict, but we should perhaps everything consistent."

- Done (Colin) - 
GUI 2 +++ Make image tools more accessible/intuitive:
Create an image toolbar to replace the drop down menu in the main CP GUI 
- The toolbar should have a horizontal orientation due to the drop down menu
- One row of tiny icon-buttons for standard image tools
- Below that, a drop down menu for infrequently used/custom tools
- Below that, a 'status line' of text that indicates which image will be acted on, and any further instruction if necessary during the running of the tool.
- We want to be able to close/open this toolbar, so there should be a button in the main CP GUI to "Show Image toolbar".  The Image toolbar should be close-able, but probably the normal window-closing functions are adequate - it doesn't need a hide/cancel button I don't think.
- When clicking on any image, have the toolbar become active/come to the top of all other windows.
For standard image tools:
[including: SaveImageAs, OpenNewImageFile, ShowPixelData, ShowHistogram, SaveToMatlabWorkspace, ShowImageInNewWindow]
- Have tooltips appear upon mouse-over of each button that show the name of the tool 
- Convert the tools that Ola wrote in ImageTool_Callbacks.m into separate m-files and add them to the ImageTools folder.
For infrequently used/custom tools:
[ShowDataOnImage, any other .m file in the ImageTools folder]
- Have any .m file in the ImageTools folder that does not have its own button appear in a drop down menu below the icon buttons.
- Make the help within each tool accessible somehow: maybe a '?' button that then asks you to select the tool you want help on (by clicking its icon or choosing it in the drop down menu).
Other implementation notes:
- replace imagesc throughout all CellProfiler, Modules, and Tools code with a new function to go in the main CellProfiler directory: CPimagesc.m, which should include this code:
ImageHandle  = imagesc(Image);
set(ImageHandle,'ButtonDownFcn','ImageTool(gco)')
This will be a simple string replacement of imagesc > CPimagesc to convert all the modules & tools, and it will be more fool-proof for when people write new code.  It might also give us the flexibility later on to do things like set other settings (like aspect ratio or font size) for every new axis produced.
- Possibly add DataTools to the same toolbar, just have it divided in half?
- To aid in interactive selection of settings, allow user to
       create a figure window where images can be dragged and overlaid
       and toggled back and forth. See Inca and dragndrop in Matlab
       Central.  Or, in the image toolbar for each figure window, have an 'Export to common window' button which puts the figure into a single, common window where you can pile up a bunch of images and toggle back and forth.

- Done (Colin) 
- Fix interactive zoom button (within Show Image button):
         (1) It seems to always work OK the first time you click on
     Interactive Zoom.  The subsequent times you click on it though:
     sometimes it works just fine and other times there is no change
     to the image itself - it stays at fully zoomed out and doesn't
     respond to mouse clicks.  Perhaps related, sometimes lots of
     errors are spit out at the command line (I think only on
     subsequent tries to use the functionality).  Actually, maybe it
     has something to do with having other figure windows open at the
     same time? 
         (2) Once things are working, I would like to add this
     Interactive Zoom button to several other places: In
     CellProfiler.m: "Display data on image", "Show pixel data", and
     all of the figure display windows (for each algorithm - I am not
     sure whether buttons will stay intact, though, once each
     algorithm runs. so I am not sure whether it makes more sense to
     have the button added within each algorithm's code or within the
     main CellProfiler code when the window is first created). The
     most important thing is to add the button to "AlgImageTiler.m";
     that is why I acquired this code in the first place.

- Done (Colin) - Many modules that load images from the hard drive use a 
subfunction called RetrieveImageFileNames, but it's slightly different when used in different contexts. It would be nice to consolidate at least part of this function into a standalone subfunction.  This allows people to change something like which file extensions are ignored in the one subfunction rather than every individual module.

- Done (Colin) - GUI 4 +++ For the + button (add a module to the pipeline), it currently asks you to choose a file in the modules folder. It would be nice if it determined which modules are of which variety (Identify, Measure, Other, etc) and presented them in a nice categorized way that's more user-friendly. See the ManualCompiler.m code in DeveloperScripts for example code for categorizing modules. (note: this might be a bit time consuming to extract all this information each time you want to add a module to the pipeline).

- Done (Joo Han) - Fix speed problem when CP is run with figures open, which occurs due to the fact that uicontrols which are created for each image set are never deleted.

- Done (Joo Han) - Make a module to expand or shrink secondary objects. (e.g. to define a membrane compartment). Test to be sure that downstream modules work on the newly defined region: measure, subtract from the original compartment, save images.

- Done (Joo Han) - Make a FilterObjectsAreaShape module that selects objects according to statistics obtained using MeasureAreaShape module. This module can be used, for example, to eliminate objects with a solidity below 0.5.

- Done (Joo Han) - Improve the response time of the main GUI - previously, toggling between modules was very slow, especially on macs. Through a significant infrastructure change that should be taken into account in future changes, an instantaneous module toggling was achieved. Common 99 VariableDescriptions and Boxes were used before - now, they are classified the module number. (handles.VariableDescription{ModuleNumber}(VariableNumber) and handles.VariableBox{ModuleNumber}(VariableNumber).

- Done (Joo Han) - Make the order of variable declarations consistent by always having %textVAR declared first. Before, either %infotypeVAR or %textVAR came first depending on the use of infotype. Relevant redundant calculations were removed and now CellProfiler.m will fail to read modules properly if %textVAR does not come first.

- Done (Joo Han) Have the save settings function automatically add SET to the  
       name > can't currently do it with uisave. (The user is prompted whether he really wants to do this, with Yes as default. This actually seemed like a better and easier solution since it allows more flexibility.)

- Done (Joo Han) - Created CPwaitbar which uses a waitbar with adjusted colors and applied the function accordingly for load pipeline.

- Done (Colin) - SpotIdentifier: We haven't checked this module in a while. Figure out Excel mac vs Pc problems (Anne has
       an email from Mathworks describing the issue, thread QW38).
       Allow asking if numbers are in rows or columns.  Check offsets,
       flipping. Display value only when clicking (see email that Anne
       has: Mathworks tricks for interactive figures). Make manual
       page. Toggle several images. In general, it just needs to be looked over and polished up.

- Done (Colin) - Decide about cutting down the name of modules.

- Done (Joo Han) - We should change the Identify modules and the SaveImages module so that if the user has chosen to save a label matrix image, the user has a choice between saving the grayscale label matrix (in which case they should be warned if they have more than 256 objects and if saving in 8 bit format), or a colored version, created using label2rgb on the spot in the SaveImages module rather than having the colored version saved to the handles structure by the Identify modules, which requires Variables in the Identify modules asking the user if they might want to save the images later in order to save processing time. >> It's possible that Anne already did some of this??

- Done (Joo Han) - Created and polished up IdentifyWellSpots.m, according to collaborators' request. I originally made this to be a stand-alone module, but this made it less flexible, so now it should be used with other modules, including FilterObjectsAreaShape.

- Done (Colin) - Scrollbar bug: To reproduce, add LoadImagesText and IdentifyPrimIntensIntens to the pipeline. Use the scrollbar in the IdentifyPrimIntensIntens module and then select LoadImagesText. The variable boxes will then be shifted for LoadImagesText too.

- Done (Colin) - Sometimes we save images (using the SaveImages module, for example) in matlab .mat format. We can then load them into CP using LoadSingleImage, but none of the other LoadImages modules, nor the OpenNewImageFile Image tool, nor CPimread itself have been adapted to read images stored in .mat files.

- Done (Colin) - For OpenNewImageFile Image tool, make use of CPimread's ability to tell us which files it can read when deciding what file types to display in the uigetfile line.  Right now, the file types are hard-coded.  Also, when the user is selecting a file format for images in, for example, the SaveImages module, currently the user types in the file format into the edit box. Can we make this a popupmenu whose choices are determined by the output of CPimread (with no arguments, CPimread tells us which file formats it can read)?

- Done (Colin) - Put in toggle buttons for red, green, and blue if an image is color.  Maybe in CPfigure, or maybe just in specific places like spot identifier.

- Done (Colin) - Update ExampleFlySettings - it's currently in pretty bad shape and uses some pretty old revisions of modules. Trying to load the current ExampleFlySettings revealed a potentially serious problem - with the new way of showing settings (drop down menus, etc), I think it makes it frequently fail to load old pipelines properly.  So we should figure out if we can make CellProfiler more robust to loading old pipelines, otherwise everything we've worked on up to this point is going to be un-loadable.

Done - Anne - SpotIdentifier is storing a value with the handles field named "ImageTopLeftXCorrectedGray" which should instead be stored in a subfield of "Image".

- Done (Colin) - Loading pipelines bug: When loading a pipeline, the old settings do not seem completely cleared away. For example the old pipeline had module #2 with 15 variables and the new pipeline's module 2 has only 5. In handles.Settings.VariableValues, variables 6-15 for old module 2 are still present.  These variables are showing up in the main GUI when you click on the module, but this only happens sometimes - I can't pin it down.  Also, I loaded a pipeline into a 'fresh' CellProfiler, and canceled at the second module when it asked me whether to load saved or default variables (due to an old variable revision number). Then I looked at the handles.Settings and this is what was there (instead of it being empty):
                  PixelSize: '1'
                ModuleNames: {1x13 cell}
             SelectedOption: [0 0 0 0 0 0 0 0 0 0 0 0 0 0]
         NumbersOfVariables: [12 5 5]
             VariableValues: {2x12 cell}
    VariableRevisionNumbers: [3 2]

- Done (Colin) - Pixels is misspelled 'pixals' in SpotID - I fixed it there, but check other code to see if it's misspelled elsewhere too.

- Done (Colin) - When saving pipelines, it offers to add 'SET' to the name. We should change this to 'PIPELINE'. Is there a shorter bit of text we could add that would still make sense rather than PIPELINE?  Also, it should check whether the filename the user typed in already has 'SET' at the end - if so, skip the dialog box asking whether to add it.

- Done (Colin) - SpotIdentifier needs to load spot identifying information properly because xlsread just doesn't work reliably. We should use the code from AddData to read data from a text file (just a simple text list of information) and then reshape it to fit the proper grid.
[[[Colin & Anne decided to make a new module (undecided name, but something like LoadTextData) that allows text data to be imported, one bit of text for each image set. When this is done, remove the code from SpotIdentifier and instead ask "What did you call the imported text data you would like to use to label each spot (optional; use the LoadTextData module)?"]]]

- Done (Colin) - Adapt the crop module to allow an option to specify how many pixels to remove from each edge of the image (top,bottom,left,right). This is helpful if you don't know the size of the image but want to remove a certain number of pixels from the edge. We can already do this for the top and left edges by typing in the pixel at which to start and leaving the endpoint as "end" but we can't do it for the bottom and right if we don't know the incoming size of images. This will allow us to crop rectangular plate edges away.




DONE DURING IAP 2005 >>>>>>>

     -Done- Make the help button next to the image/data tools work.  It should pop open a listbox asking you to choose which tool's help you would like to see, and then it should extract the help from the tool's m-file.  The listbox should also give general help, i.e. "You can add your own tools by writing Matlab m-files, placing them in the ImageTools or DataTools folder, and restarting CellProfiler."

     -Done- When adding a module to the pipeline, check to see whether more than one function with that name exists on the Matlab search path. If so, warn the user, tell the user which pathname to the function will most likely be used, but warn them that this may change if the path is changed by adding modules from another directory.  Suggest that if the module has the same name as a Matlab function, they should consider renaming the module to prevent confusion.

     -Done- When adding a module to the pipeline, CellProfiler checks in a fairly rudimentary way whether it is a valid CellProfiler module and warns the user. However, the module is then half-loaded so nothing works properly and you have to restart CellProfiler. This checking should be more sophisticated, and should recover by not loading the module at all.

     -Done- In CellProfiler.m, check whether the guidata lines are necessary (marked with a TODO).  (They were unnecessary)

     DONE!! - Allow the Save Images module to deal with different bit depths, in case the user wants to save images in 16-bit (e.g. with PNG or JPG). Also allow the user to save an image as a binary (black/white rather than grayscale, so that any nonzero pixels = 1, most useful for viewing a label matrix).

     -Almost done- : Have the time for first set separate from the time for
       subsequent sets. 

     -Done- Make progress bar windows go away when using the close all figures and timers button (e.g. Correct illum modules).

     - done Have LoadSettings button determine whether a file is a valid Settings file.

    - Done "Make projection" module (= average, get code from DivideAllMean). 

     -Done-   adjusted the Show data on image button or the Show image button
       to load DIB images. Also need to adjust any other modules
       that use imread, including those which open all the images to
       calculate something, like CorrectIllum All modules and probably
       IdentifyPrimThreshold and ApplyThreshold (when the threshold is 
       automatically calculated).  Also, DIB's are currently being read
       upside down - need to flip them (flipud).

Done     - Throughout CellProfiler and its modules, remove unnecessary updating of the handles structure (guidata function).

