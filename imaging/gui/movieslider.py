"""movieslider.py - a GUI control that uses the metaphor of a movie player

Buttons included in this file Copyright Audacity 
(http://audacity.sourceforge.net) distributed under the GNU general
public license.

CellProfiler is distributed under the GNU General Public License.
See the accompanying file LICENSE for details.

Copyright (c) 2003-2009 Massachusetts Institute of Technology
Copyright (c) 2009-2015 Broad Institute
All rights reserved.

Please see the AUTHORS file for credits.

Website: http://www.cellprofiler.org
"""

import math
import StringIO
import wx

import cellprofiler.preferences as cpprefs

from cellprofiler.gui import draw_bevel, BV_DOWN
MOVIE_SLIDER_NAME_STR = u"movie_slider"
SLIDER_CTL_STR = u"slider_ctl"
BUTTON_SKIPSTART = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x000\x00\x00\x000\x08\x02\x00\x00\x00\xd8`n\xd0\x00\x00\x00\tpHYs\x00\x00\x0b\x12\x00\x00\x0b\x12\x01\xd2\xdd~\xfc\x00\x00\x00\x07tIME\x07\xd3\x07\r\x08\x100z<\xb3\xa9\x00\x00\x05\xecIDATx\x9c\xad\x99\xbfk]7\x14\xc7\xbfyh8\x02\x1b\xee\x83\x14l\xe8\x10\x8f\xceT\x87fh\xb6\x182\xb4\xd0\xa5\xd0\xa1\xffh\xd7\x0c\x81x\x08\xe4mv&\xbbC\xe0>\xa8\xe1\nzAg\xd0\xd0\xe1\x1c\xfd\xbcz?\xdcF1\xf1}z\xba\xd2G\xdfs\x8et$?\xbb\xbf\xbf\xc7\xae\xc2\x00\x00\xca\x15\x04\x82\x89\x1f\xcc\xa2=\x80\x00\x04\xc0\x00\x01\xac\xef#\xfdnz\xeb\x96n\xaf\xed\xfb$\xbf\x8c6\'\x13?\x96\x1c:4\xa7z\x02I=SI\xf4\x7f\x80(\xa2P\xe40\x05\\\x89bT\x0f\xf9\x96\x03\x97\x1dS eMe\xa1\xfd^ .\x841\x80\x01\x19\x12\x9a.J\x92g\x7f!\x902%\xb0\x1eV\r\x14[$aT\x15C-yP\x0e\x06\x97@\x1c\x8e\xb0\x0e\x15c!\xcf\x7f\x01T\xd2\x94\xc24\xc2\x86\xe8\xb0\xa1\x18\xfe\x08\x91:&\xeb\x95z\xe2%\rQG\x18\x06\x07V\x8eR\xa4Ei\xe6\xd1\x1ak\x01\x9b\x9a\x97\xbe\x97!;4\x01\x1c\x98\x99\xb3B\x0c\x00>\xf8\xb2gk\xac\x0e\xb1\x8c\xac\xba}j\xd9\x94J\x01\xf5\x98Hc\x8d\xd5\xf7\x930\xf1\x9f\xd6\x87V\xe2\xcc7\xc7!\x97\xa1\x14\x00\xc0\xc3w\xb1L\xe3:e@I\xef\xcc*\x8c\x00\xf9\xe0+\x8f\tm\x7fmI\xa1D\xb5\xc9"V\xc3dv\xd1hoB\xc3`\xe6\xac\xca\xae\xb2P+\x0fV\x1b0E\x03\x81T*\xb6\xa2\xe5\xaa\xea\xceT\n\xb74\xe1\xd8%gO\xb1\xc6*\xb7\xf8"s\xd3\xe7J\xe5\xa1(O\xc6A\xa6a\x7f\x18ea\xac]n\x8b\xb8\xf9\x88_\n\x93\x0f^T\\\xa5\xbe*cE\x8f\xc9\x96\xfavEE\x8a:i\xb8\xc8\x849\x9a\xacu\x1da\x07\xb7.\xbc\xa7\xd4\xcd:\xf2\xd4\xe1\x96\xad\x11\xc0\xcc\x1ct\xe6\xab\xb4\x12\x168j,\xf0S\x9c\xe6P\xde\xa0\xab\x1fe\xdcd8\xf5\xce \xdd\xa48+4\x14\xeaoi,\xaa\x9f\x19\xa5\n%\xd3\n\xa5z\x05\x90<\xef*7\xef7mU\x80\x9b\x9d<\x8a\x00\xd3<\x1d\x80\x14?\t(\x15ZUIEL\xf3\xd4{v\x973\\55\x9bO\x9b\xcd\x87\xbb\xf4\xf1\xe3\x87\xcf\nM\xbd\xc5\x9a*\'\xf3\xc1\x8b\x1b\xa9B\xe5\xc2\xa0?\x87\x92\x08\xe6\xaa\xc5\xe6\xd3\xe6\xd2\\\x8b$\xd6\xd8\xcf7\x9f/\xcd\x1b\xcf\x87z)\x82:E\xcf*U\xe9H\xa1]\xa9\x0e\x96\xcd\xa7\xcd\xd5w\xbf\xdd}\x1d\x11\xd8\x1a{\xfb\xe5\xf6\xf2\xf4\x97\xbb\xaf#\x07\xbf/\x83.\xb2\xd044\x07^\x95m\x8e\xb4W\xee/\xd2lG\xc7\xec`\xe8\xf6\xcb\xed\xcbp\xed&\xe7\xe6\xf1\x80\xce\xcd\x979\xca\x16U\xc7\x14\xa2\x8af\x9a\'\xa2\x81p\xbe\x9e^\x8d\xc1\x8dnj\xbaZ\xa4y`b\xcc\xfa\xec\x82\x03`a\x11\x04(\x80\xcd\x13\x0e\x06\x00\xce\x9f\x9f\xdf\xdc\xfc\xf9S\xa4\x01@D\x97\xe6\r\xcf\xec\xeb\x9e4\xed\x07/\x99\x80NJ~p9\xab\xdfI\xcf\x01g|\xf50n\x99sb\xc4\xc1s\xb5^P\x82\xe8\xd3\xa0\xe8\xd9\xc3\x93\x1f0\xd4>\xb4\xcb\xa3\x9b\xf3\x86\xc1\xc3\xe3\xf8\x17\xdeo\x1f\xc72\x1a\xdc\xec\x8eJ\xf2\x97\xa5\xf0\xd8U^\t\x0b\x14]$L\x05Q=\x04~\xfb\xee-\x9e\xdf9\xb7Uyf7\xce\x1f\xc7\xc7\xbbe\x1a\xb9\xa7\xa4-\xac\x00\xfa\xaf\xc5\x1a{\xfd\xeezx\xed\xdd\xbcE`f\x8f\x01o~\xbd\xd8\xce\x0fO\xdb\x8fCuxZ\xe9\xc9!\x9d%\x8eCI\xcf\xaf~|9\xbc\xf6[7\xca4/^\\\\\xbd[o\xe7\x07\xe0\x90Nr\x0ca\x96\x10K\xddv\x14\x92|\xad\x9b^Yc\xa5^\x9d\x97\x00\xe0\xd5\x0f/\xaf~^3o)1\xfd\xbc\x9e\xe2\xc7.\x99.x\xe2*2\x15\xab\x1e\xb2j\x8e\x9e\xcd\xf0\xe5\xff%\xe2\xf8\xf8P\xb6\xbcxqq\xfd\xfb\xa5\x1d\xd6\xfa\xf1\xfb\x8b\xeb?.\xed\xb0\xce^\xd8\x84E\xdc\xbf<\xfb\x9c_\x1b\x02\xf0\xec\xfe\xfe>\xa7D\xc9\xa8\xc5\xb1K\x0eC\xfb\x13\xaeNT/\xefF\x8a\xe5\x83\x99\xa7yr\xce\x8d\xe3\xc8\xcc08[\x9f\xad\x9f\xaf\x87\x932\xec\x1b\x9d\x8aL\xea`\xfa\xb7\x8f\x06u\xb4\xc6\xad\xa9\x94\x87\x0cY\xb2\xb2\xaf\x19M\xe4\x9e\xb4\xa16\xc9\xe8\x92\xae\\H\x97\x95\xac\xe7\x19\xc7N+-\x88t\x97]i\x83\xb8\xd7\x95\xcf\xdf\xa0,\xe6\xa9\xc2\xcc\xecg\xcf\x13\xcbM\xd2@\x83\xde\xb1\xec\\\x87x\xc7V\xdd\xcb\xb6\xfa\x13\xe8]&1\xd8\xb3w\xb3\x9b\xe6i;m90\x19\xa2S\xb2dE!kl\xd6\xb4\x7f%\xd8\xd0\xf4\xab{_\x84\xf6\x81\xc1~\xf6\xcc\xcc3\xbb\xc9I\x8aGD\xe7\'\xe7z\x9b\x90\xa7\xc0\xed`\xe5r\xde\x1e\x87\x0f:\xd0\x02+\xddO\xf0\xcc\xce\xb9\xf1\xef1\xd1\x0c\xa7\x03\x11%y\x905\xe5\xfee\x00\x8c\xc2\xed9\x86\xeeL-\xe2\xb7`\x88\xa5xf\xa1\x11c\x9d\xad\xcf\xec\x89\x15yR\xff\x07\xb6Af\x161\xf3\xedI-\xe7.\x9atC\xa5\t\xfc\xcc\xd3<\x89\xa5\xd4u\xd6dO\xecp2\xa4\xf8Z\x00\x15\xf2Xc=4\xeb\x96\x85\x0b\x01d\xc8\x07\x0fS\xdc\xfd\x00\xa0\x9eS\xc7EU\xc2\x9bg\xf6\xec\xb7\xd3V-e\x88\xd6t>\x9c\'\x9aR~\xd3^A\xee\xd0)\xc3\x9bH&5s\xef\x85x\xdd&A\xee&\'\x1fe\xe9\x13Kui\n\x85\xa8e\x12\x91\xf4.7I%|F\'Zv \x1c@q\xf0e\xef\x82\xe3\x7f\xf4u2$^\xbc\x93\x86\x80\xfa~\xbb\x95*1\xc1h\xca\x92\xaf;\xbb\xcbO<^\xb9\xe0\xe0\xeb\xfc\xd3\x80Nc\x84\xd7aU\x8d\xbe\xb8em\xa5R&\xa2t\x80\x94a\xf2\xba\x10\x80xl\x00\xa0\x1c\xa9\x18\x90\xa1\xe1t\x80\x81%;\x9c\x0cr\x87\x89#/=+X(Yi\xbbL\x16Pa\x95o\x8b)-\x00\x0c4X\xa3\xabpy\xb3\xdb\xd2\xf4/\xce\xbbd%\x93\xa9hr\x1a\x1e`a!\xb9\xcaI\x1c\xc9T\x7f\x058\x06\xe5\x08\xa0\xa2\xe4\xb4_<4hO\xa5W\r\x18\x9a^\xcb\x93\xf2\x919\xcc\xbfSS\xe7\xfe{\xbd.~\x00\x00\x00\x00IEND\xaeB`\x82'
BUTTON_SKIPEND = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x000\x00\x00\x000\x08\x02\x00\x00\x00\xd8`n\xd0\x00\x00\x00\tpHYs\x00\x00\x0b\x12\x00\x00\x0b\x12\x01\xd2\xdd~\xfc\x00\x00\x00\x07tIME\x07\xd3\x07\r\x08\x12\x17\xed\x00d@\x00\x00\x05\xf4IDATx\x9c\xad\x99\xbf\x8b[G\x10\xc7\xbf\x16[\xcc\x82\x0e\x9e\xc0\xc5\xa9\xcbA\x9a+\x13R\xc4W\xa6<H\x11\xbb\n!\x81\xc4}\x8a\xfcqn\x0c\xba\xc2p\xea\xac\xc2\x85\\\x98S\x8a\x80\x049\xd0B\x1e\xbc)\xb6H1\xb3?\xdf\xea\xc7%\x1e\x1fwzO\xfbv?\xef;\xb3\xbb\xb3\xe3g\x0f\x0f\x0f8d\x0c\x00\xa0t\x83@0\xe1\xc2\x8c\xda\x03\xf0\x80\x07\x0c\xe0\xc1\xfa<\xe2\xdf\xaa\xb7\xa65{\xad\x9f\'\xf9c\xb49\x99p\x99s\xe8\xd0\x1c\xef\x13H\xee3\xe5D\xff\x07\x88\x02\n\x05\x0e\x93\xc1\xe5(F\xf5\x90o\xd9s\xde1yR\xd6h#\xed\x8f\x02q&\x8c\x01\x0c\xc8\x90\xd04Q\xa2<\xc7\x8d@\xca\x14\xc1ZX%Ph\x11\x85QU\x0c\xd5\xe4^9\x18\x9c\x03\xb1?\xc3;\x94\x8d\x85\xf4\xfe#\xa0\x9c&\x17\xa6\x12\xd6\x87\x80\xf5\xd9\xf0g\x88\xd4pY\xcb\xca\x17\xcfi\x88\x1a\xc20\xd8\xb3r\xe4"\x8d\xacz\x8f\xdaY#\xd8\xd8<\x8f\xbd\x04\xd9\xa0\xf1`\xcf\xcc\x9c\x14b\x00\x18\xfc\x90\xf7l\x8d\xd5!\xc63\xabl\x1f[VV(\xa0\x11\x13h\xac\xb1\xfa|\x14&\xfc\xd3\xfb\xbe\x968\xf1\xf5a\xc8\xf1T\xf2\x000`hb\x99*t\xf2\t%\xbd3\xab0\x024\xf8\xa1\x88\x18_\xf7W[\x9cJT\xba,`UL\xe6\x10\x8d\xf6&4\x0cfN\xaa\x1c\xb2\x91Zi\xb0\xd2\x81q6\x10H\xa5b+ZN\x8a\xeeL\xa1pM\xe3\xcf]r\x8e\x985V\xb9%\x16\x99\xab>\'*\x0f\x05y\x12\x0e\x12\r\x0f\xa7QF\xce:\x14\xb6\x08\x9b\x8f\xc4\xa50\r~\x10\x15\'\xb1\xaf\xc2Y!b\x92\xa7>\x9f\xa9HA\'\x9d.\xf2\xc2\x1c\\V\x87\x8e\xb0\x83\xeb\x10>be\xb3\x86<\xe5tK\xde\xf0`f\xf6\xfa\xe6\x93\xb8\x12f8\xea,\xf0S\x82\xe6T\xde\xa0\xab\x1f%\xdc\xe88\x8dN/\xdd\xc4y\x96i(\xd4\x9f\xd3YT~f\xe4*\xe4L\x13\xe4\xeae@\xf2\xf9\x90\xb9\xde\xd5\x97Yc\x11`\xf1\xf6\xfe\x04\xa4\xc4\x89G\xae\xd0\xa4H*B\x9a\xa7\xd1s\xd8\xd6\xab\xed\xf2\xdd\xaa\xb8\\\xae\xaa6\x97\xfe\x06Hn*Y\x8a \x1b\xfc a\xa4\n\xe5\x0b\x83\xfe\x9c\x91D\\\xe1f\xf9n\x99]~ww\xb7D\xbe\x9d\xf1\xfeD\x17\xd9\xa4\x8e\xb3g\x12oi/\xbe^\xa9\xda\xe6AD\xd8]\xad?\xac\xe5\x06\x19t\xee\xab\xe5\xdd\xb2hv$\x83\xce\xb2\xd084{\x9e\xe4m\xce\xf4W\xb4nz\xe9>\xce\x12\x13\x11=^/\xde.N\xa0\x84\xc1\nK14\xba\xf5\x043\xe8\xa6\x97\xfc\xe7\x9c<\xb1\x17\xa6\x8e\x1e\xaf\x17wu8\x13\xa8\xfa\xc9\x89\x9dw\xce;a0\xf2\x87\xcd\x13\x0e\x065\x93\xe9\xac\x99\x0f\xccrI\xd4\x91\xbb^\xbc}\x8f~\x8e\x98\xf6\x83G\xa9\xa7>>\xda\xcb\xce\x18\xb2\xf1\xb9L}\xf7<p\xe6e\xc7L\x7f\xcd7\x8f\xeb\x08\xd1\xa6AF3h\xb6S\xc6\xd0\xa1\x88\xae\xce\x1bE&\xc9\xaew\xcc)\xb9v\xfd\xee\xfd\xc7\x05?_\x9f\x8c\xa2dY\xc4N\xd2J8Z\xd9\x8a-\xa5M\x83\xcdn\xf3\xfe\xcf\xc5\x16+2\x16\x1e;\xb7\xb9\xff\xf0\xe6\xea\xdb\xd9\xed\xf7\xb7\xf3\xe7\xd7\'I\xe2\x16\x96\x01\xfdWc\x8f\xcdn\xbd\xda,^\xfd|3\xeb:kh\xe76\xf7\x1f\xeen\x7fy\xf1\xd3\x0f/\x01\x10\x9d\xd2(\xec\x07\xf9\xe1i\xa2\'\x87x\x968\xc3D\xbf\xed\xe3v\xb5Y\xbc\xfe\xfd\xd5\xd5\x97Wd\xb0u\xdb\xfb\xf5\x9b\x97\xbf\xbd\xb8\xf9\xe6F\x9a\xd1\xf1\xedV\x8e!\xcc:\xbfB\xb7\x8d\x87\x08\xc4\xc4\x96\xedx5J\xeb\xbd\xe7\xd5\'\xa5\x01\xc0\x1e\xebO\x8b\xd7\x7f\xbc\xba\xfe\xe2\x1a\xa1W\x8e10\x9aJ\xba\xe0I\xa8\xc8 V#dR\x1d=\xc7\xc3\xc7\xdfE\x8ac\xf8\xf6\xc7\xaf\x85F._\xfez\xa34\xd0\xe1\xb7\x8f\x9b\x14\x85\xd5\xb4\x08\xfb\xd7\xc0C\xca\xaf\r\x01x\xf6\xf0\xf0\x90R\xa2\xe8\xd4\xec\xd8%\x87\xa1\xe3\tWcV\x8fk#\x99N\xcc\xbc\xef\xf7\xce\xb9\xedv\xcb\xcc0\xb8\x9c]\xce\x9e\xcf\xbai7\xa9\x1f+\xc7\xcbE:D\xd303\xba,\xd6-\xae\xe4!C\x96\xac\xeckF\x13\xb9\'m\x1aU2:\xa6\xcb\xa3g|\x93\xf5<\xe38dQ\x16D\xba\xcbN\xb4A\xd8\xeb\xf2\xcf\x9f\xc1F\xef\xa9\xc2\xf4<\xf4\x03\xefY*I\x1duZc9\xb8\x0e\xf1\x81\x94\xa8\x95m\xb5_\xa0ULb\xf0\xc0\x83\xeb\xdd\xbe\xdf\xef\xf6;\xf6L\x86\xe8\x82,YQ\xc8\x1a\x9b4m\x97\x04+\x9a\xf6\xed\xd6\x17\xbe\xfe\xc0\xe0\xa1\x1f\x98\x99{v{\xddm\x88h>\x9dk5!\xbd\x02\xd7\x83\xe5+P}\x1c>\x19@#\xacX\x9f\xe0\x9e\x9ds\xdb\xbf\xb7\x91\xa6\xbb\xe8\x88(\xca\x83\xa4)\xb7\x8b\x010\nw\xe4\x18z0\xb5\x08\xdf\x82!\x9e\xe2\x9e\x85F\x9cu9\xbb\xb4S+\xf2\xc4\xfeO\x9c\xa6\x98Y\xc4L\xd5\x93R\xceC4\xb1B\xa5\t|\xcf\xfb~/\x9e\xd2\xd0\x99\x91\x9d\xdan\xda\xc5\xf95\x02\xca\xe4\xb1\xc6\x0e\xd0\xac[\x16.x\x90\xa1\xc1\x0f0Y\xed\x07\x00\xb5\x82:,\xaa2\xbd\xb9\xe7\x81\x87\xdd~\xa7\x9e2D3\x9aw\xf3H\x93\xcbo\xea\x12\xe4\x01\x9d\x12\xbc\tdr\xa7o=\x10\xcam2\xc9\xdd\xde\xc9\xa5,}\xe2\xa9&M\xa6\x10\xd5L"\x92\xd6r\xa3T\xc2g\xf4E\xf3\x0e\x84\x03\xc8\x0e\xbe<8\xef\xf8\x1f}\x9c\x0cI\x14\x1f\xa4!\xa0\xaco\xd7RE&\x18MYR\xb9\xb3\xb9\xfc\x84\xe3\x95\xf3\x0eC\x99\x7f\x1a\xd0E\x98\xe1\xe5\xb4*F\x1fUYk\xa9\x94\x89(\x1e e\x98\xb4.x\x00\x889\x8drD3 C\xddE\x07\x03K\xb6\x9bvR\xc3\xc4\x99E\xcf\x02\x16J\x96\xfb.\x91y\x14X\xf9\xd3\xe2J\x0b\x00\x1du\xd6\xe8*\x9cWvk\x9av\xe1\xbcI\x963\x99\x82&\xa5\xe1\x1e\x16\x16\x92\xabL\xc3H\xa6\xf8_\x80sP\xce\x00\xca,\xa5\xfd\x12\xa1^{\xca\xa3\xaaCW\xf5\x9a\x9f\x94\xcf\xcca\xfe\x05\xe4\xe2\xd0d\xd32a\x90\x00\x00\x00\x00IEND\xaeB`\x82'
BUTTON_PLAY = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x000\x00\x00\x000\x08\x02\x00\x00\x00\xd8`n\xd0\x00\x00\x00\tpHYs\x00\x00\x0b\x12\x00\x00\x0b\x12\x01\xd2\xdd~\xfc\x00\x00\x00\x07tIME\x07\xd3\x07\r\x08\x11\x0cLH\xfeo\x00\x00\x05\xb6IDATx\x9c\xad\x99=\x8b\x1cG\x10\x86_\x0f\x1dT\xc3\x1e\x8c\x02\x83\x0e\xec@\x99\x0cN\xce\xe0@\x07\n,p\xa0\x0b\xa5P?\xc1\xbfG\x99\xb8\xf0\xb2sx\xa1\x14\x18\xe4p\r\n.\xb0\xd1\td\xb8\x05\x0b\xb6A\x03]A\x07\x0e\xaa\xfasznwm\x95\x04\xbb\xdb\xd3\x1fO\xbfU\xdd]\xd3\xf7\xd5\xfb\xf7\xef\xb1d\x0c\x00\xa0\\@ \x98\xf8\xc3\xcc\xea\x03\x08@\x00\x0c\x10\xc0\xda\x1e\xe9\xb3\xe9\xadk\xdd^\xdb\xf6$\x1fF\xab\x93\x89?K\x0e\x1d\x9aS9\x81\xa4\x9c\xa9$\xfa?@\x14Q(r\x98\x02\xaeD1\xaa\x87<\xe5\xc0e\xc7\x14HY\x93\xcd\xb4\xbf\x13\x88\x0ba\x0c`@\x86\x84\xa6\x8b\x92\xe4\xb9\xdb\x08\xa4L\t\xac\x87U\x03\xc5\x1aI\x18U\xc5PK\x1e\x94\x83\xc1%\x10\x87=\xbcC\xc5X\xc8\xf3\x9f\x01\x954\xa50\x8d\xb0!\x06l(\x86\xdfC\xa4\x8e\xcbzVO\xbc\xa4!\xea\x08\xc3\xe0\xc0\xcaQ\x8a4\xb3f\x1e\xad\xb3f\xb0\xa9z\x19{\x19\xb2C\x13\xc0\x81\x999+\xc4\x00\xe0\x83/{\xb6\xc6\xea\x10\xf3\x95U\xd7O5\x1b\xab\x14\xd0\x88\x894\xd6Xm\x9f\x84\x89\xff\xb4<\xb4\x12g\xbe)\x0e9_J\x01\x00<|\x17\xcb4\xa1S.(\xe9\x9dY\x85\x11 \x1f|\x151\xa1\xed\xaf\xb5\xb4\x94\xa8vY\xc4j\x98\xcc\x12\x8d\xf6&4\x0cf\xce\xaa,\xd9L\xad<X\xed\xc0\xb4\x1a\x08\xa4R\xb1\x15-\x87\xaa;S)\xdc\xd2\x84}\xb7\x9c;\xcc\x1a\xab\xdc\x12\x8b\xccM\x9f\x83\xcaCQ\x9e\x8c\x83L\xc3~7\xca\xccYKa\x8bx\xf8H\\\n\x93\x0f^T\x1cR_\x95\xb3b\xc4dO}9S\x91\xa2N\xba\\d\xc2\x1c]\xd6\x86\x8e\xb0\x83\xdb\x10\xbe\xc3\xeaj\x1dy\xea\xe5\x96\xbd\x11\xc0\xcc\x1ct\xe6C\xda\t\x0b\x1cu\x16\xf8\x90\xa0\xd9\x957\xe8\xeeG\x1979N\xa33\x00\xc0\x90\xd7Y\xa1\xa1P/9\xeb\xfa\xef\xeb\xbd\xce\xac\xd2\xa8P\x88\xe2\x04\xe2\x1c\xd4!\x81}\xf0\x03J\xf5\n \xf9\xde\xb5\x9b\xcf7\xbf\x9a\x8b7\xef\xdeT\xa5E\xe5;\xc2\xb9\x82\x948\t\xe8(\x94\xe5\x01\x03\xd0\xe8Y\xb2\x00\xbaO\xb7\x8fn^}z\xb5\xfek\xad\x85K.\xa3\xdefM\x15\xb4\x0f^\xc2\x08\xa1Xe\x15\xe9\x0e\x870\x07p\xc0\xf0\xcdp\xfd\xfd\xfa\xe2\xc3\xf9\xf5\x87\xeb\xf4lOy\xaa9\x84|\x00\x0c\xa9H\x87\n\xedN\xb5h\xb2\xb3\x05\xe0!\xd6\x0f\x7f\xbfxw\xb1q\x9b\x8a\xa6\xabM\xf9\xb4^\xdd\x12FCYg/\x7f\xcdL\xd4\xc2\t_\x8dW\x97\xebKm\xbb+\x99o\x9d\x90chV\xf4\xdf\x8c\x03`\xe0N6\xe7|~\xb5\xbej\x9e\x12\xa8\xf9_\x12\xbb\xe0\\p\xc20\xc8\x07\x83\xbby\xd6\x01f\x00\x99\xf6\x88\xdb\x1fo^~x\xf9\xf6\x8f\xb7\te\xb1\xf3YJ>\xf4\xeb\xcdF\xea|_\xaa\xc3\x9e\'\xefi\xfbz\xf5\xfa\xf2\xb7K)\x9b%\xc2\xd1\x12\x8d\xd7l\xa7\x1aa1\xa2M\x9d\x8b\x99\xd9S\xed\xdd#\xc0O\xcc\x8e\xe9#\x9d}{v\xfa\xf8ta\x06\xb5\x15\x11k\xc4_\xcd\x0c4W\xecj\xd3-\x0c@\xf0\x82\x82\x8f\xf4\xe4\xeb\xb3\'O\x9f\xecC\x92\x8e\xb0y\x97\x87[j\xca\xde3\xf3\xa7\xc3P\x80\xe8\xaf\x00\x0e\x9cN\x0b#\xbe8\xf0l\x8a\xd9\xa8\xa08\xc6-~\xc0\xe9\xb3\xa7\xcf\x0e\xe8C:`\xd6\xf5\x15w\xd4\x8eB\x04bb\xcbv\xbe\x1b\xe5}/\xb0w\x9e\x9d\xc3-\xbe\xc3\xc9\x8b\x9f^T\xf5v\xbd\xdd\xea\x86\'!+\x83X=n\r\x83)\xcc\xde\xbf\xe2\xf0\x92\x17W\xd91\x80\x80\xed\'\xef\xfet\'|\xf2\xfc\xe7\xe7\x9d\x96i\x05\x94\x91\x17*29\xbf<\xfb\x9c_\x1b\x8a-\x0e|K\xb7\x01\x0f\xd6\xc7g\x8f\x7f\xb1\xb4\xdf\xb15\xef\x9f5aw\x9f\x9d\x80\x8ef\x94\xb7\x0c\xd36KF\x00\xab\x8f\x9a\xf3\xf2\xec\xd1\xf3\x1d\'\xc3\xd2\xbe\x10a\x1ay\xc8\x90%+\xe7\x9a\xd1D\xee\xa0C\xa3IF\xe7t\xa9\xb7\xde\x1dR\x96\x87\x9d\x16Z\x10i\xd8\x0cZ!n\xed_\xe0\x0c\xe9\x92%\x18\x11fb?y\xde\xb2\xdc$\x8d\xa4\xfe\xc2\xe2\xd1\xc1\x0b)Q/\xa3\xe8O\xa0w\x99\xc4`\xcf\xdeMn;m7\xdb\x8dl?tD\x96\xac(d\x8d\xcd\x9a\xf6\xaf\x04\x1b\x9a~q\xefAh\xbf0\xd8O\x9e\x99yb\xb7u\xcc\x0c\x80\x88\x8eW\xc7z\x9b\x90\xa7\xc0\xed`\xe5\x0e\xd4\xbe\x0e\xef\x0c\xa0\x19V\xba\x9f\xe0\x89\x9ds\xb7\xff\xdc&\x9a\xf1h$\xa2$\x0f\xb2\xa6\xdc\xbf\x0c\x80Q\xb8;\x12\xd3\xf9Q\xd8<\x05C<\xc5\x13\x0b\x8d8\xeb\xfe\xbd\xfbveE\x9e\xd4\xff\x8e\xb3\x8cYO\x99|{R\xcb\xb9D\x93n\xa84\x81\x9fx;m\xc5S\x1a:\xf7\xc8\xae\xec\xb8\x1a\xd3\xfa\x9a\x01\x15\xf2Xc=4\xebff\xd9\xd3\xc8\x90\xa6\x00S!\x18\xf5\x82:\xdeM\xc9\xf2\xe6\x89=\xfb\xcdv\xa3\x9e2D\xf7\xe8x<N4\xa5\xfc\xa6\xbd\x82\\\xd0)\xc3\x9bH&%S\xafA\xbcn\x93E\xee\xb6N~\xca\xd6\'\x9e\xea\xd2\x14\nQ\xcb$"i\xf6\x99\xa4\x12>\xa3\x13-;\x10\x0e\xa0x\xf1e\xef\x82\xe3\xcf\xda\x9c\x0cI\x14/\xd2\x10P\xdfo\xb7R%\xa6\x94\x9f\xe4\xeb\xce\xee\xf6\x13_\xaf\\p\xf0u\xfei@Gq\x85\xd7\xcb\xaa\x1a\xbds\xcaS\x8f\x89(\xbd@\xca0y_\x08\x00\x90r\x1a\xe5Hf@\x86\xc6\xa3\x11\x06\x96\xec\xb8\x1a\xe5\x0e\x13{^zV\xb0P\xb2\xd2w\x99,\xa0\xc2*[\x8b+-\x00\x8c4Z\xa3\xbbpy\xb3\xdb\xd2\xf4/\xce\xbbd%\x93\xa9h\xf2{\\\x80\x85\x85\\*\xae\xe2H\xa6\xfa+\xc0>({\x00\x15\xa6\x1d\xc5\x9cF\xfe\x9e\x82:\xaaF\x8cM\xaf\xe5\x9b\xf2\xce+,\xb1\x7f\x01\xef\xd7\xc6\xc3H\'\xa4\xe2\x00\x00\x00\x00IEND\xaeB`\x82'
BUTTON_PAUSE = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x000\x00\x00\x000\x08\x02\x00\x00\x00\xd8`n\xd0\x00\x00\x00\tpHYs\x00\x00\x0b\x12\x00\x00\x0b\x12\x01\xd2\xdd~\xfc\x00\x00\x00\x07tIME\x07\xd3\x07\r\x08\x12\x02\x80\xdd\x80\xab\x00\x00\x05_IDATx\x9c\xad\x991\x8b\x1c9\x10\x85\x9f\x07\x05%\x98\x8568\xd8\x81K6p\xe8\xc0\xa1\xff\x7f\xe0\x1fp\x07\x9b\xed\x1e\\\xe0\x81;\xe8\x067\xe8\x05\n.\xa8\x92T\xadV\xcf\xceb\x97\x17\xb6W\xad\x96>\xbd*I%\xf9\xc3\xcb\xcb\x0b\x8e\x8c\x00\x00i\x05\x02A(\x7f\x84]}\x00\x19\xc8@\x002h\xdf\xa3\xfe\xeeZ\x1b\xda\xb0\xd5\xfe{\xd1_\xc1\xaaK(\x7fz\x0e\xeb\x9a\xb5\\ ZN\xf1D\xbf\x02$\x05E\nGpp\x1e%\x98\x1e\xfa\x96\x99\xbea\xc9b\xac\xd5v\xda\xdf\x04\xa2\x13&\x00\x01\x12Di\x86(U\x9e\xdb&\x10c\xaa`#\xac-P\xa9Q\x851U\x82\xf4\xe4\xd98\x08z \xe6;\xbc#\xae/\xb4\xf1\xef\x80<\x8d\x17\xa6\x136\x97\x80\xcd\xae\xfb;D\x1a\xb8ld\xdb\x81{\x1a\x91\x810\x043\x8d\xc3\x8b\xb4\xb3n\x1c\xbd\xb3v\xb0\xb5\xba\x8f\xbd\x069\xa0\xc9`&\xc9\xa6\x10\x01 \xe5\xe4[\x8e!Z\x17\xfb\x99\xb5\xad_kv\xb6Q\xc0"\xa6\xd0\xc4\x10\xed\xfb*L\xf9g\xe5\xb9\x97\xb8\xf1\xad\xa5\xcb\xfdT\xca\x00\x90\x90\x86X\xa1\x0b\x1d?\xa1\xb4u\xd2\x84Q\xa0\x94\xd3&br\xdf^ou*\xc9\xd6e\x05\xabc\nG4\xd6\x9a\xd2\x10$\x9b*G\xb6S\xabu\xb6u`\x9d\r\x021\xa9\x18U\xcb\xd3\xa6\xb9\xb0Q\xb8\xa7\xc9\xf7.97,\x86h\xdc\x1a\x8bd\xd7\xe6\xc9\xe4\x91"O\xc3A\xa3az\x1be\xe7\xac\xa3\xb0E\xd9|4.\x95)\xe5\xa4*\x9ej[\x1bg\x95\x88i\x9e\xfa}f"\x15\x9dl\xba\xe8\x80Y\\\xd6\x87\x8e\xb2\x83}\x08\xdf\xb0m\xb5\x81<\xdb\xe9\xd6\xbc\x91A\x92\xd9F~\xaa+\xa1\xc31g\x81\xef\t\x9a\xb7\xf2\x06[\xfd\xa4\xe1V\xc7Ytfm\xa6\xce3\xa7\xa1R\xffNg\xc9\xf6\x99\xf0*x\xa6\x13\xbcz\x0eH\x9f\x07\x16\xb6?\xdd+\x007\xc3y\x03\xa9q\x921P\xa8\xc9\x03\x02\xb0\xe89\xb0\xef\x7f\xc6\xd7+\x98!\x01\x97O\xe9\xdb\x17H\x00\x02\xbe\xff\x15_\xff\xb1\xf2\xa7\xc7\xf4\xedK\x8ca\xb4R\x03\x10D\xc6\xda\x85M\xb1\x00\xc9\x12<M\xfb9\xde\x8dI<\xff\x9d\x9e\xff{B&\x80yy\xfd\xfay\x92\xb3\x90x~M\xcf\xd7Z\xfe\xe3\xebg\xc4\xf3M\xa9\xdc\xa4NH\x9a\xc7\x9dj\x91\xf5\x97\xfb\x95\xea\x88+e\xa2n\xfb\xb5\x91VN\x1c\xc9\xa3\xe6\xb2\xd0\xda53O\xbe\xce=\xfez\x8f\xddL\xd6\xba\x97-\x86vE\xef\xb67\'\xfc.=\x82\xe6\'\xab=/y\x01\x10\x11\x91\xb5\xb1\x0c\x86w\x1c\x0c\xc6]\x86\x08\x0ct\xb5\xb4\x1f\xdc3\x01\x83\x94\xfc4\xa8\xb4\xfff\xf8\xec\xcc\xe6y_S*\xc4\x98\x06\x8e&Y\xb6\xb3\x8d\xa1\xa3\x88\xee\xce\x1b[\x93\x9bo\xef2\xa7\xec\xa9\xad\x84\x0e\xa5\x8dx\x7fN\x1dv\xdcNo\xef\xb3\xba\x859\xa0_\xb7\xdb\xca\xdd\xb0\xb2\x1f\xf8\xc3\xd3\xc9N\x0e\xf5,q/\x04\xdd\x92\xd7be[~\xd3\xf4\x18B\xea\x14Cq\xcb`\x14\x02\xa1\xd0/\xed\xd5\xf4\x9b\xa7\xc7\x19|\xd6\x0c\xf5\xf1\x0fS"\x06\\\x1e\xc9\xb5\x95\xa3\xeeh\xbb\xa9d\x0b\x9e\x86\x8av\x12-B>\xbc\xbc\xbct\xa9Yw\xca\xd1\xb3\x87\xdf/\x13\x13I\xedID\xa2DK$\xc8\x99\xa9\x88\x16\xa3\xf4\xdbv%#\x98\xd6\xb4,\xcb\xfc\xdf|\x9d\xaf\x00\xe4A\x9e>=\xc9Yl\x1d\x1a\x8e\xe3\xc8\xa2\xc4(q\x1f\xc3"r\x91\xc1\x81o\xd0>-a_~.\n:\x85IO\x19\xa7\xfe\xb3\xd6<P|\xf4f\xfa\xd7\xdb>-\xd9\x1c\xd9\x99r\xd2T]\x03WB\x919\xe8\xb9L\xde\xb9it\xc9\xe8\x9e\xae\xb66\xbaCj\xf2p\xb1\xc2\x08\x11\x0b\x9b\x93U({\x9d\x7f\xfe\r\xb6\x1b\xa7\t\xb32\xad\x893\xf5&i\x12\xf3\x17\x0e\xd7!\x1el\xd52p\xd6x\x00\xa3\xcb$\x82\x89iY\x97y\x9d\xaf\xf3\x95\x99\x12D\x1e$JT\x85b\x88M\xd3\xf1\x95`G3.\x1e\xbd\xc8\xfd\x83\xce,\x92\\\xb9\xcc\x8b\xceS\x11\xb9\x9c/v\x9b\xd0\x86\xc0\xbe3\xbf\x02\xf5\xc7\xe17\x03h\x87U\xef\'\xb8rY\x96\x1f\xff\xfe\xa84\xd3\xc3$"U\x1e4M9\xbe\x0c@0\xb8\x1by\xfbajQ\xde\x82POq\xa5\xd2\xa8\xb3\x1e?>\xc6sTyj\xfbo\xec7$U\xccv{\xb2\x95\xf3\x88\xa6\xdeP\xe9\x0c\xe7\xcay\x9d\xd5S\x16:\x1f%\x9e\xe3t\x9e\xea\xfc\xda\x019yb\x88\tvf%\xa9k\x9a\x04I9!\xb8\xbb\x1f\x002\n\xea\xb2\xca\xeb\xf4\xe6\xca\xc4t\x9d\xaf\xe6\xa9 \xf2Q.\xd3\xa5\xd2x\xf9C\x7f\x05y\xa0S\x83\x0f\x85LK\xd6\xd1\x07\xe5\xbaM\'\xf92/\xfa\xa7.}\xea\xa9!\x8dSHz&\x15\xc9\xeer\xabT\xca\x17l\xa0\xbe\x01\xe5\x00\xdc\xc1\x97i\xc9\x0b\x7f\xda\xe7\x12D\xa3\xf8\x90F\x80\xed\xfdv/UeB\xb0\x94\x85\xee\xdc3\xf0T\xb6\xfb\xb5%/H\xdb\xfc3@\x1e\xca\x0c\xdfN\xabM\xef\xbb[\xd6^*c\x12\xa9\x07H\xed\xa6\xad\x0b\x19(\xc7\x06\x00\xc6Q-@\x82L\x0f\x13\x02\xa2\xc4\xe9<i\x82\x80;/=7\xb002\xef\xbbF\x96\xb1\xc1\xf2_\xab+#\x00L2\xc5`\xab\xb0\xbf\xd9\xedi\xc6\x17\xe7C2\xcf\x1464-\r\xcf\x88\x88\xd0\xe4\xe9\xdc\x922\xff\xbf\x00\xf7\xa0\xdc\x01\xe4\xac\xa5\xfd\x1a\xa1\xd9Z\xf2Q5a\xeaZ\xf5\xa9\xdf\x9d9\xcc\xff1r\x85F\xc1\xa5i\xa5\x00\x00\x00\x00IEND\xaeB`\x82'
BUTTON_STOP = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x000\x00\x00\x000\x08\x02\x00\x00\x00\xd8`n\xd0\x00\x00\x00\tpHYs\x00\x00\x0b\x12\x00\x00\x0b\x12\x01\xd2\xdd~\xfc\x00\x00\x00\x07tIME\x07\xd3\x07\r\x08\x13\x1cc\xc9\x8c\x89\x00\x00\x05\x15IDATx\x9c\xb5\x99Mn$7\x0c\x85_\x1a\\P@\x1b(\xef\xc6@6^\xe4\x00\xb9B\x80\x9c$\xf7\xca\x11\xe6*s\x03{1\x8b1\x90\x01\xba\x80)@o\xa1E\x16\xa4~K\xd5\xddN<\xb2\x01WW\xab\xa4\xaf\x1eI\x89\xa2\x7fyyy\xc1Q#\x00@\xeb\r\x85B\xf2\x07\xd9\xf5\x07\x90\x80\x04\x08\x90@\x7f\x1e\xe5\xef0\xda\xb4MG\x1d\x9fW\xfb#\xde]%\x7fl9|j\x96\xfb\n\xb5\xfb\xd4\x96\xe8\xff\x00iF\xd1\xcc!\r\\\x8b"\xae\x87}\xcb\xc4v`M\xea\xac\xa5\xed\xb4\xbf\n\xc4F\x18\x01\x04*j4S\x94"\xcf\xf5\xa6Pg*`3\xac\x1e(\xf7(\xc2\xb8*\xa2#yr\x0e\x82-\x10\xd3\x1d\xd6\xd1f.\xd4\xf7\xdf\x01\xb54\xad0\x83\xb0);lj\xa6\xbfC\xa4\x89\xc9f\xad\x7f\xf1\x96Fu"\x0c\xc1D\xe7hE\xda\xb5\xe1=Fc\xed`K\xf7\xd6\xf7*\xe4\x84&\x81\x89$\xabB\x04\x80\x98b;r\x90\xe0S\xec#\xab\xef_z\x0e\xadS\xc0=&\xd3\x04\t\xfe|\x11&\xff\xf8\xfd4J\\\xf9\xb6<\xe5>\x94\x12\x00D\xc4)\x96\x0c\xae\xd3\x06\x94\x8dN\xba0\x06\x14S\xec<&\x8d\xe3\x8d\xad\x84\x92\xf6&\xcbX\x03\x93\x1c\xd1\xf8hFC\x90\xac\xaa\x1c\xb5\x9dZu\xb2\xde\x80%\x1a\x14\xeaR1\x98\x96\xa7n8\xe9\x14\x1ei\xd2\xbdK\xce\x95\x16$8\xb7\xf9"9\x8cyry4\xcbSqPi\x18o\xa3\xec\x8cu\xe4\xb6\xc8\x9b\x8f\xf9\xa51\xc5\x14M\xc5S\x19\xab3V\xf6\x98j\xa9\x8fk.R\xd6\xc9\xc3\xc5^\x98\xd9d\xa3\xeb\x18;8\xba\xf0\x95\xd6w\x9b\xc8\xd3\x87[\xb5F\x02I&\x7f\xf3SY\t\x1b\x1c7\x16\xf8\x1e\xa7\xb9\x957\xf8\xea\xa7\x15\xb7\x18\xce\xbd3\xd90%\xce\x1a\r\x8d\xfa#\x8d\xa5\xfd5\xd1\xaa\xd02\x9d\xd0\xaa\xd7\x00\xd9\xf5;Z\xd3\xf9\x8a;w\x90\xe6\'\t\x13\x85\xaa< \x00\xf7\x9e\xe3\xf6\xfc\xeb\xdf\xd8\xe2\xf1\x1eI~\xe7\xe7/\xcf\x7f\xfc\xf9\xd7<ET\x04\x862\x85\x87\x98@\x93JKS\x7fo&\x11[\xc4Jn\x07\xfd\x12^\xbf\xae\xdcn\r\xd2\x04uD\xb4<N\xca-\xbb\xac\xf6\xba\xde\x08n\xe4\x01\x0f\xc9u\x8b\x11W3h\x056\xa8(\xc5G\xb1\xd0\xeeb\xe3N{u\x8f\xdc\x93\x91\xcd\x9f\xec?V\x1f\xda\xdd\xfa\x19m\x97\xe6\x81Jd\x9b\xaei\x05\x10\x10\x90\x0c(\xa1\xe8\xf6\x93P\x08\xee\x99\x80IJ~\x9at\xda?3\xbd>$\xf0\x99\x83Ta\xe64hh\xa2g;\x1d\xd0\xa1G\x0f\xe7\x8dc\xac[\xc7\xc0\x83\xd6x\xec\xa9\xae\x84\xfb\x95Mf\x10\x1fJS\xb6\xb0\x06\xe8\x83\xda\x7f\xd1&\xef\x07m\xa8\x8a\xad@\xef\x8a\xde \x01\xf0\xfdnJ\xc3{\x02\xd6\x8e!\xa4\x85X\x1evf\x00\x85R\xd9.\xed=\n\x00\xf0;_\xbf\xae\xebv\xb0\\%\xbc~\'\xce\xf9\xe3.\x94|\xc13W\xb11\x82{\x88\x10\xd4\xb4;\x7f\xe5\xe9-/\xee\xb2c\x00\xc0\xe7/\xcf\xdc\xaa/\x86\xdd\xe3\xf1\x8c\xe7\xdf~\xef</ud1E\xcbEk~-e\xebx\xe7)\x1d\xc0\xb0kN\xa2z_\x1bi\xc7\xa7\'\xec\xeb\x8f\xd5@\x17Y\xec\x94q\x1a\x1fk&A\xb6\xd1\xcd\xf4\xef\x1a\r\xfah\xcd[S+\x8f\x8a\x06\r\x96\x8d\x88\'r\xef\xda4\x86dtOWF\x9b\xd5\x90\xaa<\\\xfdf\x80\xaa\xbb\xcd\xc9;\xe4\xbd\xae\xbd\xfe\x80\xb6{O\x17fc\xdc"/\xb4J\xd2\xa2n/\x1c\xaeC<H\x89tb\xac\xf9\x0b\xcc\x8aI\x04#\xe3\xba\xad\x97\xed\xf2vyc\xa2\x8a\xea\x83\x06\r\xa6P\x90&<\xe6%\xc1\x81f~{\xf6E\x1a/\x08\xc6-\x92\xe4\xc6\xf5\xb2\xda\x1a\xa6\xaaO\xe7\'\xaf&\xd4W\xe08Y\xbb\x02\x8d\xc7\xe1\x9b\x0e\xb4\xc3*\xf5\tn\\\xd7\xf5\xdb?\xdf\n\xcd\xf2\xb0\xa8j\x91\x07US\xce\x8b\x01\x10\x87\xbb\x92\xb7\x1f\xa6\x16\xf9[\x10f)n4\x1a3\xd6\xa7\xc7O\xe1\x1cL\x9e2\xfe\x8d|\x82\xa4\x89Y\xab\'\xbd\x9cG4\xa5Be\x11\xce\x8d\x97\xedb\x96r\xd7y\xd4p\x0e\xcby)\xf1\xb5\x03j\xe4\t\x12"\xfc\xccJ\xd2\xd64\x15\x8d)B\x9a\xda\x0f\x00\x9d9u\xaeMYxscd|\xbb\xbc\xb9\xa5D\xf5Q\x9f\x96\xa7B\xd3\xca/c\t\xf2@\xa7\n/\x99\xcc\xeeL\x8f\x16\xb9\xdcfA\xbe^V\xfbhK\x9fYjJ\xd3(\xa4#\x93\x89\xe4\xb5\xdc"\x95\xf1\x89\xbfh;\x80q\x00\xcd\xc1\x97qM+\x7f\xf8\xe3*j^|H\xa3@_\xdf\x1e\xa5*L%?\xa9\xe5\xce\xe9\xf2\x93\xbc\xbe\xb6\xa6\x15\xb1\xcf?\x05\xfa\x90#\xbc\x0f\xabn\xf6\xc9.\xaf3&\xd5r\x80\xb4i\xea\xba\x90\x80|l\x00\xe0\x1c\xa5\tTtyX \x08\x1a\x96\xf3b5L\xdcY\xf4\xec`\xe1d\xad\xed*YB\x87\xd5>m\xa6\x0c\x00\xb0\xe8\x12\xc4W\xe1\xb6\xb2;\xd2\xcc\x0b\xe7S\xb2\x96I:\x9a\x9a\x86\'\x04\x04XQ\xf1\x9cg\x92\xee\xbf\x00\xf7\xa0\xdc\x01\xd4\xb4\x9a\xf6\x9b\x87&\x1f\xa9\xf5\xaa\x05\xcb0j[\x07\xbb3\x87\xf9\x17*\xe1lh\xf7\xf22\xeb\x00\x00\x00\x00IEND\xaeB`\x82'

GREEN_DOT = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x18\x00\x00\x00\x18\x08\x06\x00\x00\x00\xe0w=\xf8\x00\x00\x04\x8aIDATx\x9c\x95\x96Kh\x94W\x14\xc7\x7f\xe7\xde\xfbM\xe6\x95\x99h|TZ\xb5\xa2(\xf5\x91\x96\xa0F\xa9\xab\x16\xea*H\xbap\xd3\xad\xe0\xc6\xba\x14\x91.\\t!t\'n\x04W\x96nD\x1a\xc4\x85XH\xbbIQQB\rZ\xd1Zl\x95\xfa\xcck&\xc9\xcc$\xdf}tq\xbf$jcm\x07\x0e\xf71\xe7\x9c\xff\xb9\xe7\xf9I\x08!\xf0\x96_\x08\x81\xd4\xa5Xg\x010\xda\x90\xe8\x04\x11y\x9b(\xe6\xdf\x94\xd6\xa6k\\\xff\xfd:W\xfe\xb8\xc2\xf0\xd3a\xa6\xc2\x14h\xa8\xe4*t\xad\xeab\xd7\xea]l_\xbb\x9dj\xa1\xfaF0Y\xec\x05\x8d\x99\x06\x17\xae^\xe0\xf4\xcf\xa7y\xe0\x1f\x10:\x02\xaa\xa2Py\x85$\x02\x01B\x1a\xd0\r\xcd:Y\xc7\x81\xae\x03\xf4n\xed\xa5\x90+\xbc\x1d`\xb46\xca\xb1o\x8fq\xe9\xafK\x84\x95\x01\xb3\xdc\xa0;4\xaa\xf4\x12\x80\x00\x0e\xfc\x8c\xc7\xd5\x1djT\xb1\xb7\xba\x97\xe3\x9f\x1e\xa7\xb3\xd4\xf9f\x80\xd1\xda(\xfb\xbf\xde\xcf\x1du\x07\xfd\x9e&Y\x99\xa0\x97jtE\xa3K\x1a\xc9\x0bb\x04\x14\xf3\xaf\xf0\r\x8f\xab9\xfc3\xcf\xc6\xfaF\xce\xee?\xfb\n\x88\x9awK\xab\xc1\xd1\xd3G\xb9=s\x1b\xb5Ba\x96\x19\xf4\x12\x8d\xe90\xe8\xaa\x8eT\xd1\x0b\xfb\x0e\x1d\xff\xef4\x98\x15\x06\xfd\xae\xe6^\xe5\x1e\xc7\x07\x8e\xd3\x9cm\xbe\n\x10B\xa0\xff\xc7~.\xde\xba\x88,\x95(\xdc\xae\xd1\xe5\xe8\x1a]\xd2\xa8\xa2\x9a\xdf\x9b\x92\xc1\x94\x0c\xba\x9c\xf1U5z\xa9F\xadT\\\xae]\xe6\xe2\xad\x8b\xcc9F\x01LLNp\xea\xfbS\xb8\x92\x8bJ\x8b\nUPH^\xa2\xdf\xdb\x04i\x13t\x9b&o\xf2\xb4\xebv\xca\xbaL.\xc9\xa1\n\n]\x8c\xc6\xe8\xaa\xc6wz\xce\x0c\x9f\xa1\xd6\xac-\x00\\\xbby\x8d\xfb/\xee\xa3\x8aQ\x99\xca\xc5`J"`@\x8c\xa0\x12E^\xe5Y%\xab\xd8\xc666\xb3\x99e\xb2,\xd6C\x9bDc\x8a\n]\xd1<\x08\x0f\xb8\xf1\xe7\x8d\x08\x10B`ph\x90T\xa5Q\xa9\xce\x82\xa8@\x94 *\x9eE\x84\x02\x05\xd6\xb2\x96\x1ez\xd8\xc9N\xd6\xb0\x86\xbc\xe4QZ!&\x1a\xa4\xda\x14\xae\xe8\xb8\xfa\xe8*!\x04LjS\x86\xee\x0cE\xa5\xaf\xd7J\x88\xf1!\xc4=\x80 h4\x00\x06\x83\xbc,$\x80\x06I\x84\xe1\'\xc3\xa4.\x8d\x00\xf5\xa9:\xf8\x98\xdb\xc1\x85H6\xaesw\xdey\x9a\xa6\xc9Cy\x98a\x07\x1e\xf3\x98\xd90K\xf0!\xca\xfb\xcc\x10\x81\xfal\x1d\xebl\xd6*\x02\x84\xd9\x10)}m\xcd\xc8\x1bOK\xb7xl\x1e3.\xe3\x004i2\xe3g\xf0\xa9\x8f\xfc6\x93K\xa3a\x00&1\t\x95R\x05\xff\xd4\xe3\x9b\x9e\xd0\x0c\x84V 4\x03\xbe\xe0c\x00\x8d\x10T\xc0bi\xe4\x1a\xb4t\x0b$\xba\xcf\xa7\x9e0\x13"\xb5\x02\xbe\xe5\xf1-OY\xca\x18mP\x89I\xe8\xde\xdcMh\x06\xdc\xa4\xc3ME\xf2\r\xbf(\xb9\x86\xc36,\xb6aq\xd3\x0b|n\xda\xc5\xf3\xb4\xc7\xd7=]\xeft\x91\xe8\x04%"\xec\xe9\xde\x83\t\x067\xeep5\x87\xabG\xf2u\x8f\x9f\xf4\x0b\xa0S\x1e?\xe5\xe7\xf7\xf3\xeb\xa4\x8b|u\x87\x9bp\xc8\x84\xb0\xfb\xfd\xdd\x88H\x8cA\xcfG=lZ\xb3\x89\xdb\x8fncGm,\xb2D\xc8\x92\x85\xe03\xdf\xce\x04$\x97\xa5\xb2\xbct\xdf\n\xd1\x88q\x87}aY\xaf\xd6\xb3c\xfd\x8e\x85B\xebh\xef\xe0\xf0\x17\x87IB\x82}n\xb1\xcf-n\xd4aG,v\xcc\xe2\xc6\x1cn\xcca\xc7\xe3yn\x9d\xbf\x1f\xb5\xd8\x11K\xfa,E\x9e\t\x07?>H\xb5T\xcdR\x99XD}\x9f\xf51pu\x80\xf3\x03\xe7I\x9f\xa4\xd1r\x17-\xf4-\x8f.g\xddt\xee\x05\xc4\xb4\xf4\xb3Y\x0c&\x1c\xfe\xb9\xa7wu/\xfbv\xed\x9b\x1f@\xaf\xb4\xeb\x91\xf1\x11\xfa\xbe\xec\xe3\xe6o7\t\xc5\x80Ya0\x9dY7-k\xa4 \x0b\xd5>g\xc0LtO\x18\x0bli\xdb\xc2\xb9\xaf\xce\xd1Y]h\xd7\xff\x188#\xe3#\x1c\xf9\xe6\x08\xfd?\xf5\x93J\x1a\x95/\x89]S\x15\x14\x92\xcbb\xf3\xd2<\xd0\xd3\x9a\xde\xad\xbd\x9c8x\xe2\x15\xe5\x8b\x02@\x9c\r\xfd?\xf4s\xf2\xbb\x93\xdc}x\x17+\x16)d\x9d5\x97\xf5*\x0f\x89O\xd8\xb0|\x03\x87>?D\xdf\'}\x14\xf3\xc5\xd7U-\x0e\x00\xb1\x88&&\'\xb8\xf6\xcb5\x06\x87\x06\x19\xfau\x88\xfat\x1d\x04*\xe5\n\xdd\x1ft\xb3\xa7{\x0f=\x1f\xf6\xd0\xd1\xde\xf1\xff\x86\xfeb`\xa9MIm\x0c~b\x12\x12\xf3\xdf>[\xfe\x06\xccj\xa6\xf1\x0c\x8f\x9f\xdb\x00\x00\x00\x00IEND\xaeB`\x82'
RED_DOT = '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x18\x00\x00\x00\x18\x08\x06\x00\x00\x00\xe0w=\xf8\x00\x00\x04zIDATx\x9c\x95\x96MhTW\x14\xc7\x7f\xf7\xeb\xcdL\xe6K\x93\x1a\xa9U\x13\x10E\xa2\xfd\x88\x1a\x03\r\x05\xa1\x0b\xcdBt\xe1\xaa\x16\x04wR\xf7\x82\x08B\x11\x17]\x0bB\x17\x82PwE\x0c.\x82`E()\x8d\xa2\xa9\xad\x1f`\x144\x81\xa6D\'\xc9L\xc6L\xe6\xbd{\xdf\xedb\xde\xc4I\x1ak\xfb\xe0\xcf;<\xde=\xffs\xcf9\xf7\x7f\xae\xf0\xde{\xde\xf3x\xefqQ\x84\xb3\x16\x00\xa55\xca\x18\x84\x10\xef[\x8a\xfe7\xa7o\xcae\xc6\xef\xdd\xe3\xc5\x9d;L=zD\\\xad\xa2\x84 \xc8\xe7\xd9\xb0s\']}}t\xed\xdaE[\xa1\xf0N2\xb1\xda\x0e\xea\xb5\x1a\xbf\\\xbf\xce\xcf\x97.\xe1&&(\x02y\xadI+\x85N\x1c\x85qLMJ\xd4\xa6M\xf4\x1e;\xc6\'\x83\x83\x04\x99\xcc\xfb\t\xca\xa5\x12\x97\xcf\x9ee\xe2\xe6M:\x85\xe0\x83 \xa0h\x0cY\xa5\x96\x08\x04\xe0\xbc\xa7\x1e\xc7\xcc[\xcb\x0c\xd0\xbeo\x1f\xfbO\x9f&\xdb\xde\xfen\x82\xb9R\x89o\x8f\x1e\x85g\xcf\xf8(\x08\xe8L\xa5Xk\x0cy\xad\xc9*EJJ\x8c\x94\x08\xc0\x03Q\x1cSs\x8e\xb2\xb5L[\xcbBw7_}\xff\xfd2\x12\xd94\x16\x17\x16\xb8x\xe6\x0c\xb5\xa7OY\xa75\x1dA\xc0\x1ac(\x1aCQk\nZS0\x86\x82\xd6\x14\x13\xac1\x86\xf6$\x90\r\xc6\xd0\xf6\xe2\x057\xce\x9f\'\xac\xd5\x96\x13x\xef\xf9ih\x88?\x86\x87Y\xab\x14Ec\xc8)EN)\xb2J\xd1\xd6\n\xad\xc9\x1aCVkrZ\x93O\xc8\xdb\x83\x80N\xad\x99\xb9}\x9b\xdf\x87\x87i&F\x02\xcc\x97\xcb\xfcx\xf1"\xd98&\x978\xca$)IIIJ)RI\r2\xe94m\xf9<m\xb9\x1cmA@&\xf9?\xab\x14E\xadi\x07\xc6._f\xa1RyK\xf0\xdb\xe8(\xd3\xcf\x9f/95-\xd0B4 %A:M\xb0~=\xaa\xa7\x07\xb5};AG\x07)c\x08\x92@2J\x91\xd7\x1a79\xc9\xcb\xfb\xf7\x1b\x04\xde{\xee\x8f\x8c \xad\xc5\x08\x81\x12\x02\x950\x8b\xe4-\x01)\x04*\x9dFl\xde\x0c}}\x88={`\xe3FT*\x85J\x820M\xa28\xe6\xe5\xdd\xbbx\xef\x916\x8ax<6\x86L\xda\x8f\xa4C\xfc\n{\xa9\xd5\x84\x00)\xc1\x18\x84\xd6\x08)\x11\xc9Z\x01\x8d\x83(%\x7f>|\x88\x8b"\xb4\xb5\x96j\xa5B\xec=.\xe9\xef\xd5`\xe3\x98\xa8VCMN6\x02\xf1\x1e?5\x85\rC\x9c\xf7\xc4+\x02\t\xe7\xe7q\xd66\xa4\xc2\x03\x91\xf7\x84qL\xe8}\xc3nE\x1c\xa3\x9cC-.\xc2\xd4\x14fn\x0e\x00\xb7\xb8HX\xaf\x13\xc51\x91\xf7Dq\x8c\xf5\x1e\x9b\x04\x05\xa0\xb5\xd6\xe4\n\x05\xa6\x9c\xa3\xe6\x1c\x8b\xad\x90\x92\x94\x10\x18!\x90B\x80\xb5\xb8Z\r]\xaf#\x808\xd9Y\xdd\xb9\x06\xe2xi\xad\xcc\xe5PZ#\xb51\xf4\xf4\xf6Rs\x8e\xaas\xbcI\xb0\xb0\x02\xb5&\xace!\x8a\x1a\xb0v\xd9?\xcd\xb5\xf3\xd6\xf2\xe1\x8e\x1d(c\x90B\x08v\x0f\x0c\x801\xccE\x11\xe5(\xa2b-\xf3\xd6R\xb5\x96\xaas\x8d\xf7J\xbb\x15\xce1\x9f8.G\x11e\xa0{\xef^\x84\x10\x8d\x1a|\xda\xdf\xcf\xe6\xad[\x99|\xf2\x84\x99("\xa3\x14A\xd2\xb2$\x85\x8f\xbc\'\xed\xfd\xb2\xefM=\xaa\xc71U\xe7\x98\x8b"^\x87!\xaa\xab\x8b\xad\xbbw\xbf=h\x85b\x91\xafO\x9e\xc4k\xcd\xab0\xe4U\x18\xf2:\x0c\x99\tCf\xa2\x88\xd9U0\xd7b\x97\xc2\x90R\x182]\xaf3\xed=_\x1c?N\xb6Xl\x14\xb9\xd1\xda\x82\xfd\x87\x0f\xf3\xeb\xad[\xdc\xbcz\x95\xbf\x16\x17\x01\x88\x810\x91\xe5\xa6\\7\x0f\xa3\x00\\\xb2\x83\x05\xe7(G\x11\xaf\xac\xa5\xfb\xc0\x01>?xpi\x00-\x93\xeb\xd9R\x89o\x8e\x1ca\xfc\xc1\x032B\xb0.\x08hO\x14\xb5I\xb02u\xcd\xf4\xcc:Gf\xdb6\xce^\xb9B\xb1\xa3cIM\xff1pfK%\xbe;u\x8a[CC\x08k)$\xb2\x9cK\x040\x90\x12\xd5rvj\xce\xf1FJ>\x1e\x1c\xe4\xc4\xb9s\xaciq\xbe*\x014f\xc3\x8dk\xd7\xf8\xe1\xc2\x05&\xc6\xc7!)|3ER\x08b\xef\x89\xb5\xa6s\xcb\x16\x8e\x9c8\xc1\x97\x87\x0e\x91nk[\xe9ju\x02h\xcc\x88J\xb9\xcc\x83\xd1Q\xee\x8d\x8c\xf0xl\x8cj\xa5\x82\x00r\x85\x02=\xbd\xbd\xec\x1a\x18\xe0\xb3\xfe~\xf2\xc5\xe2\xff\x1b\xfa\xab\x91\xd9(\xc2&\xd7\x16\xad5\xfa?^[\xfe\x06\'\x00\xa4\n\xf2\xf5?w\x00\x00\x00\x00IEND\xaeB`\x82'
# This is my own
MARKER = "\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x10\x00\x00\x00\x08\x08\x02\x00\x00\x00\x7f\x14\xe8\xc0\x00\x00\x00\x01sRGB\x00\xae\xce\x1c\xe9\x00\x00\x00\x04gAMA\x00\x00\xb1\x8f\x0b\xfca\x05\x00\x00\x00 cHRM\x00\x00z&\x00\x00\x80\x84\x00\x00\xfa\x00\x00\x00\x80\xe8\x00\x00u0\x00\x00\xea`\x00\x00:\x98\x00\x00\x17p\x9c\xbaQ<\x00\x00\x00>IDAT(Scd \x0e\xfc\xff\xff\x1f\xa1\xf0=\x11\x00\xa8\x1a\xa8\x07\xaa\xed\x01q\x00\xa2\x07d\xcf\x01\xa2\x01\xd4UU\xd8@\x036\x80O\x03\xa6!\x08'\x85\x13\x01P<ML\xc0B\x82\x08\x08\x00a\xb9\xb4t\xf8:\x15\xcd\x00\x00\x00\x00IEND\xaeB`\x82"

HT_MARKER = 1
HT_START = 2
HT_STOP = 3
EVT_VALUE_CHANGED_TYPE  = wx.NewEventType()
EVT_VALUE_CHANGED       = wx.PyEventBinder(EVT_VALUE_CHANGED_TYPE)
EVT_TAKE_STEP_TYPE      = wx.NewEventType()
EVT_TAKE_STEP           = wx.PyEventBinder(EVT_TAKE_STEP_TYPE)

STATE_PAUSED   = "paused"
STATE_PLAYING  = "playing"

class SliderCtl(wx.Panel):
    
    def __init__(self,parent,
                 id = -1,
                 value = 0,
                 min_value = 0,
                 max_value = 100,
                 start_value = 0,
                 stop_value = 100,
                 value_names = None,
                 pos = wx.DefaultPosition,
                 size = wx.DefaultSize,
                 style = wx.TAB_TRAVERSAL|wx.NO_BORDER,
                 name = SLIDER_CTL_STR):
        super(SliderCtl,self).__init__(parent, id, pos, size, style, name)
        self.border = 10
        self.tick_length = 5
        self.__value = value
        self.__min_value = min_value
        self.__max_value = max_value
        self.__start_value = start_value
        self.__stop_value = stop_value
        self.value_names = value_names
        self.BackgroundColour = wx.RED
        wx.EVT_PAINT(self, self.on_paint)
        wx.EVT_ERASE_BACKGROUND(self, self.on_erase_background)
        self.Bind(wx.EVT_SIZE, self.on_size, self)
        self.Bind(wx.EVT_LEFT_DOWN, self.on_left_down, self)
        self.Bind(wx.EVT_LEFT_UP, self.on_left_up)
        self.Bind(wx.EVT_MOTION, self. on_motion)
    
    def get_value(self):
        """The value selected by the control (the arrow)"""
        return self.__value
    
    def set_value(self, new_value):
        if new_value < self.min_value:
            raise ValueError("Value %d is less than minimum (= %d)"%(new_value, self.min_value))
        if new_value > self.max_value:
            raise ValueError("Value %d is more than minimum (= %d)"%(new_value, self.max_value))
        if self.__value == new_value:
            return
        if self.__start_value > new_value:
            self.__start_value = new_value
        if self.__stop_value < new_value:
            self.__stop_value = new_value
        self.__value = new_value
        event = wx.CommandEvent(EVT_VALUE_CHANGED_TYPE,self.Id)
        event.EventObject = self
        event.SetClientData(new_value)
        self.AddPendingEvent(event)
        self.Refresh()

    value = property(get_value,set_value)
    
    def get_start_value(self):
        return self.__start_value
    
    def set_start_value(self, new_value):
        if new_value < self.min_value:
            raise ValueError("Value %d is less than minimum (= %d)"%(new_value, self.min_value))
        if new_value > self.max_value:
            raise ValueError("Value %d is more than minimum (= %d)"%(new_value, self.max_value))
        if self.__start_value == new_value:
            return
        if new_value == self.__stop_value:
            self.stop_value = new_value+1
        self.__start_value = new_value
        self.Refresh()
        
    start_value = property(get_start_value, set_start_value)
            
    def get_stop_value(self):
        return self.__stop_value
    
    def set_stop_value(self, new_value):
        if new_value < self.min_value:
            raise ValueError("Value %d is less than minimum (= %d)"%(new_value, self.min_value))
        if new_value > self.max_value:
            raise ValueError("Value %d is more than minimum (= %d)"%(new_value, self.max_value))
        if self.__stop_value == new_value:
            return
        if new_value == self.__start_value and new_value > 0:
            self.start_value = new_value-1
        self.__stop_value = new_value
        self.Refresh()
        
    stop_value = property(get_stop_value, set_stop_value)
    
    def get_min_value(self):
        """The minimum (top) value of the slider"""
        return self.__min_value
    
    def set_min_value(self,min_value):
        self.__min_value = min_value
        if self.start_value < min_value:
            self.start_value = min_value
        if self.stop_value < min_value:
            self.stop_value = min_value
        if self.value < min_value:
            self.value = min_value
        self.Refresh()
    min_value = property(get_min_value, set_min_value)
    
    def get_max_value(self):
        """The maximum (top) value of the slider"""
        return self.__max_value
    
    def set_max_value(self,max_value):
        self.__max_value = max_value
        if self.start_value > max_value:
            self.start_value = max_value
        if self.stop_value > max_value:
            self.stop_value = max_value
        if self.value > max_value:
            self.value = max_value
        self.Refresh()
    max_value = property(get_max_value, set_max_value)
    
    
    def on_left_down(self,event):
        x = event.GetX()
        y = event.GetY()
        hit = self.hit_test(x,y)
        if hit in (HT_MARKER,HT_START,HT_STOP):
            self.CaptureMouse()
            self.capture_object = hit
            self.SetCursor(wx.StockCursor(wx.CURSOR_SIZENS))
        else:
            event.Skip()
    
    def on_motion(self, event):
        x = event.GetX()
        y = event.GetY()
        if self.HasCapture():
            if self.capture_object == HT_MARKER:
                new_value = self.get_mark_from_y(event.GetY())
                if (new_value != self.value and
                    new_value >= self.start_value and
                    new_value <= self.stop_value): 
                    self.value = new_value
            elif self.capture_object == HT_START:
                new_value = self.get_mark_from_y(event.GetY())
                if (new_value != self.start_value and 
                    new_value <= self.value and
                    new_value < self.stop_value):
                    self.start_value = new_value
            elif self.capture_object == HT_STOP:
                new_value = self.get_mark_from_y(event.GetY())
                if (new_value != self.stop_value and 
                    new_value >= self.value and
                    new_value > self.start_value):
                    self.stop_value = new_value
        else:
            hit = self.hit_test(x,y)
            if hit == HT_MARKER:
                self.SetCursor(wx.StockCursor(wx.CURSOR_SIZENS))
            else:
                self.SetCursor(wx.StockCursor(wx.CURSOR_ARROW))
        index = self.get_mark_from_y(y)
        if self.value_names is not None and len(self.value_names) > index:
            self.SetToolTipString(self.value_names[index])
        else:
            self.SetToolTipString("")

    def on_left_up(self, event):
        if self.HasCapture():
            self.ReleaseMouse()
            self.SetCursor(wx.StockCursor(wx.CURSOR_ARROW))
    
    def hit_test(self, x,y):
        if self.marker_rect.Contains((x,y)):
            return HT_MARKER
        for pt, result in ((self.get_stop_point(),HT_STOP),):
            if (x-pt.x)**2 + (y-pt.y)**2 < 12*12:
                return result
        return None
    
    def on_size(self, event):
        self.Refresh()

    def on_paint(self, event):
        dc = wx.BufferedPaintDC(self)
        dc.SetBackground(wx.Brush(cpprefs.get_background_color()))
        dc.Clear()
        self.draw_groove(dc)
        self.draw_ticks(dc)
        self.draw_marker(dc)
        event.Skip()
    
    def get_mark_distance(self):
        total_height = self.groove_rect.height
        if self.min_value == self.max_value:
            return float(total_height)
        return float(total_height) / float(self.max_value - self.min_value)
    mark_distance = property(get_mark_distance)

    def get_mark_y(self, mark_value):
        return self.border + self.mark_distance * mark_value
    
    def get_mark_from_y(self, y):
        mark = int((y - self.border + self.mark_distance/2)/self.mark_distance)
        mark += self.min_value
        return min(max(mark, self.min_value),self.max_value)
    
    def get_marker_rect(self):
        y = self.get_mark_y(self.value)
        center_x = self.groove_rect.x + self.groove_rect.width/2
        return wx.Rect(center_x-8,y-4,16,8)
    
    marker_rect = property(get_marker_rect)
    
    def get_start_point(self):
        y = self.get_mark_y(self.start_value)
        center_x = self.groove_rect.x + self.groove_rect.width/2
        return wx.Point(center_x,y)
    
    def get_stop_point(self):
        y = self.get_mark_y(self.stop_value)
        center_x = self.groove_rect.x + self.groove_rect.width/2
        return wx.Point(center_x,y)
    
    def get_groove_rect(self):
        rect = self.GetClientRect()
        center_x = (rect.right + rect.left) / 2
        top = rect.top + self.border
        bottom = rect.bottom - self.border
        return wx.Rect(center_x-5,top,11,bottom-top)
    groove_rect = property(get_groove_rect)
    
    def draw_groove(self,dc):
        rect = self.groove_rect
        rect.Inflate(0,1)
        dc.Pen = wx.BLACK_PEN
        dc.Brush = wx.WHITE_BRUSH
        dc.DrawRectangle(rect.Left,rect.Top,rect.width,rect.height)
        rect.Deflate(1,1)
        rect = draw_bevel(dc,rect,2,BV_DOWN)
        sep_y = self.get_mark_y(self.value)
        rtop = wx.Rect(rect.Left,rect.Top,rect.width,sep_y-rect.Top)
        dc.Pen = wx.BLACK_PEN
        dc.Brush = wx.GREEN_BRUSH
        dc.DrawRectangle(rtop.x,rtop.y,rtop.width,rtop.height)
        dc.Brush = wx.WHITE_BRUSH
        dc.DrawRectangle(rect.Left, sep_y, rect.width, rect.Bottom-sep_y)

    def draw_marker(self,dc):
        rect = self.get_marker_rect()
        stream = StringIO.StringIO(MARKER)
        image  = wx.ImageFromStream(stream)
        bitmap = wx.BitmapFromImage(image)
        mask   = wx.Mask(bitmap, wx.WHITE)
        bitmap.SetMask(mask)
        dc.DrawBitmap(bitmap,rect.x, rect.y, True)

    def draw_stop(self,dc):
        stop_pt = self.get_stop_point()
        stream = StringIO.StringIO(RED_DOT)
        image  = wx.ImageFromStream(stream)
        bitmap = wx.BitmapFromImage(image)
        mask   = wx.Mask(bitmap, wx.WHITE)
        bitmap.SetMask(mask)
        dc.DrawBitmap(bitmap,stop_pt.x-12, stop_pt.y - 12, True)
        
    def draw_ticks(self, dc):
        xstart = self.groove_rect.Right
        xend   = xstart + self.tick_length
        dc.Pen = wx.BLACK_PEN
        for i in range(self.min_value, self.max_value+1):
            dc.DrawLine(xstart,self.get_mark_y(i),
                        xend,self.get_mark_y(i))
            
    def on_erase_background(self, event):
        pass
            
    def make_bitmap_button(self, data):
        stream = StringIO.StringIO(data)
        image  = wx.ImageFromStream(stream)
        bitmap = wx.BitmapFromImage(image)
        button = wx.BitmapButton(self, -1, bitmap)
        return button

class MovieSlider(wx.Panel):
    """A control that uses the metaphor of a movie player to control selection
    
    """
    def __init__(self, parent, 
                 id = -1,
                 value = 0,
                 min_value  = 0,
                 max_value  = 100,
                 start_value = 0,
                 stop_value = 100,
                 value_names = None,
                 pos = wx.DefaultPosition,
                 size = wx.DefaultSize,
                 style = wx.TAB_TRAVERSAL|wx.NO_BORDER,
                 name=MOVIE_SLIDER_NAME_STR):
        """Construct the movie slider
        
        parent      - parent control to the movie slider
        id          - window ID assigned to the top-level window
        value       - initial position of the slider
        min_value   - minimum allowed value for selection
        max_value   - maximum allowed value for selection
        stop_value  - play will continue until the stop
        value_names - sequence of names for each possible value
        pos         - position for control (2-tuple)
        size        - size of control (2-tuple)
        style       - style for panel window
        name        - window's name
        """
        super(MovieSlider,self).__init__(parent, id, pos, size, style, name)
        self.BackgroundColour = cpprefs.get_background_color()
        self.value_names = value_names 
        sizer = wx.BoxSizer(wx.VERTICAL)
        self.SetSizer(sizer)
        self.slider = SliderCtl(self,
                                value = value,
                                min_value = min_value,
                                max_value = max_value,
                                start_value = start_value,
                                stop_value = stop_value,
                                value_names = value_names,
                                size=(50, -1),
                                style=wx.SL_VERTICAL|wx.SL_AUTOTICKS)
        sizer.Add(self.slider,1,wx.EXPAND)
        #controls_sizer = wx.BoxSizer(wx.HORIZONTAL)
        # sizer.Add(controls_sizer,0,wx.ALIGN_CENTER_HORIZONTAL)
        #self.skip_start_button = self.make_bitmap_button(BUTTON_SKIPSTART)
        #controls_sizer.Add(self.skip_start_button,0,wx.SHAPED)
        # self.play_button = self.make_bitmap_button(BUTTON_PLAY)
        #controls_sizer.Add(self.play_button, 0, wx.SHAPED | wx.ALIGN_CENTER_HORIZONTAL)
        #self.skip_end_button = self.make_bitmap_button(BUTTON_SKIPEND)
        #controls_sizer.Add(self.skip_end_button,0,wx.SHAPED)
        #self.Bind(wx.EVT_BUTTON, self.on_play_pressed, self.play_button)
        self.Bind(EVT_VALUE_CHANGED, self.on_slider_value_changed, self.slider)
        self.state = STATE_PAUSED 
    
    def on_slider_value_changed(self, event):
        # Handle some button display issues here relating to the position
        # of the slider and the max_value
        if self.state == STATE_PAUSED: 
            if self.slider.value == self.slider.max_value:
                self.set_play_button_image(BUTTON_PAUSE)
            else:
                self.set_play_button_image(BUTTON_PLAY)
            
    def on_play_pressed(self, event):
        if self.state == STATE_PAUSED:
            if self.slider.value == self.slider.max_value:
                return
            outgoing_event = wx.CommandEvent(EVT_TAKE_STEP_TYPE,self.Id)
            outgoing_event.EventObject = self
            self.AddPendingEvent(outgoing_event)
            self.set_state(STATE_PLAYING)
        else:
            self.set_state(STATE_PAUSED)
    
    def on_step_taken(self):
        self.slider.value = self.slider.value + 1
        if self.slider.value == self.slider.stop_value:
            self.set_state(STATE_PAUSED)
        if self.state == STATE_PLAYING:
            event = wx.CommandEvent(EVT_TAKE_STEP_TYPE,self.Id)
            event.EventObject = self
            self.AddPendingEvent(event)
    
    def on_step_failed(self):
        self.set_state(STATE_PAUSED)

    def set_state(self,new_state):
        self.state = new_state
        if new_state == STATE_PAUSED:
            if self.slider.value == self.slider.max_value:
                data = BUTTON_PAUSE
            else:
                data = BUTTON_PLAY
        else:
            data = BUTTON_PAUSE
        self.set_play_button_image(data)
        self.state = new_state
    
    def set_play_button_image(self, data): 
        stream = StringIO.StringIO(data)
        image  = wx.ImageFromStream(stream)
        bitmap = wx.BitmapFromImage(image)
        self.play_button.SetBitmapLabel(bitmap)
    
    def make_bitmap_button(self, data):
        stream = StringIO.StringIO(data)
        image  = wx.ImageFromStream(stream)
        bitmap = wx.BitmapFromImage(image)
        button = wx.BitmapButton(self, -1, bitmap)
        return button

if __name__ == "__main__":
    import wx.lib.inspection
    class MyFrame(wx.Frame):
        def __init__(self):
            wx.Frame.__init__(self, None, title="Movie slider demo",
                              pos=wx.DefaultPosition, size=wx.DefaultSize,
                              style=wx.DEFAULT_FRAME_STYLE)
            sizer = wx.BoxSizer()
            self.SetSizer(sizer)
            value_names = ["0: happy","1: grumpy","2: sleepy","3: dopey","4: doc","5: dwarf # 6", "6: dwarf # 7"]
            self.movie_slider = MovieSlider(self,
                                            max_value=9,
                                            start_value=0,
                                            stop_value=7,
                                            value_names=value_names)
            sizer.Add(self.movie_slider,1,wx.EXPAND)
            self.Bind(EVT_TAKE_STEP, self.on_take_step, self.movie_slider)
            
        def on_take_step(self, event):
            wx.MessageBox("Take a step")
            self.movie_slider.on_step_taken()

    class MyApp(wx.App):
        def OnInit(self):
            self.frame = MyFrame()
            self.SetTopWindow(self.frame)
            self.frame.Show()
            wx.lib.inspection.InspectionTool().Show()
            return 1
    app = MyApp(0)
    app.MainLoop()
    
